(self.webpackChunkskyline_console=self.webpackChunkskyline_console||[]).push([[192],{2265:(e,a,n)=>{"use strict";var r=n(33950),l=n(48924);r(a,"__esModule",{value:!0}),a.default=a.StepSpec=void 0;var i=l(n(75613)),o=l(n(24836)),u=l(n(89195)),s=l(n(3787)),d=l(n(77481)),c=l(n(1839)),f=l(n(77879)),p=l(n(78711)),m=n(87067),h=l(n(20253)),v=n(43750),g=l(n(97137));class b extends p.default{constructor(){super(...arguments),(0,f.default)(this,"exposedPortValidator",((e,a)=>{var n;return(0,i.default)(n=a||[]).call(n,(e=>{var{value:t}=e;return null==t||!t.port||null==t||!t.protocol}))?o.default.reject(new Error(t("Please input port and protocol"))):o.default.resolve()}))}init(){this.getAvailabilityZones(),this.state.disableRetry=!0,this.checkDefaultQuota()}get title(){return t("Spec")}get name(){return t("Spec")}getAvailabilityZones(){return(0,c.default)((function*(){yield h.default.fetchListWithoutDetail()}))()}get availabilityZoneList(){var e,t;return(0,u.default)(e=(0,s.default)(t=h.default.list.data||[]).call(t,(e=>e.zoneState.available))).call(e,(e=>({value:e.zoneName,label:e.zoneName})))}get exitPoliciesOptions(){var e;return(0,u.default)(e=(0,d.default)(v.exitPolicies)).call(e,(e=>{var[t,a]=e;return{label:a,value:t}}))}checkDefaultQuota(){this.updateContext(this.defaultValue)}get defaultValue(){return{cpu:1,memory:512,disk:10}}get formItems(){var{context:{exitPolicy:e,healthcheck:a}={}}=this.props,n="on-failure"!==e;return[{name:"cpu",label:t("CPU (Core)"),type:"input-int",tip:t("The number of virtual cpu for this container"),min:1,onChange:e=>this.updateContext({cpu:e})},{name:"memory",label:t("Memory (MiB)"),type:"input-int",tip:t("The container memory size in MiB"),min:4,onChange:e=>this.updateContext({memory:e})},{name:"disk",label:t("Disk (GiB)"),type:"input-int",tip:t("The disk size in GiB for per container"),min:1,onChange:e=>this.updateContext({disk:e})},{name:"availability_zone",label:t("Availability Zone"),type:"select",options:this.availabilityZoneList},{name:"exitPolicy",label:t("Exit Policy"),type:"select",options:this.exitPoliciesOptions,onChange:e=>this.updateContext({exitPolicy:e})},{name:"maxRetry",label:t("Max Retry"),type:"input-number",tip:t("Retry times for restart on failure policy"),min:1,disabled:n},{name:"auto_heal",label:t("Enable auto heal"),type:"check"},{name:"auto_remove",label:t("Enable auto remove"),type:"check"},{name:"interactive",label:t("Enable interactive mode"),type:"check"},{name:"healthcheck",label:t("Enable Health Check"),type:"check",onChange:e=>this.updateContext({healthcheck:e})},{name:"healthcheck_cmd",label:t("Health Check CMD"),extra:t("Command to run to check health"),type:"input",min:1,required:!!a,display:!!a},{name:"healthcheck_interval",label:t("Health Check Interval"),extra:t("Time between running the check in seconds"),type:"input-int",min:1,required:!!a,display:!!a},{name:"healthcheck_retries",label:t("Health Check Retries"),extra:t("Consecutive failures needed to report unhealthy"),type:"input-int",min:1,required:!!a,display:!!a},{name:"healthcheck_timeout",label:t("Health Check Timeout"),extra:t("Maximum time to allow one check to run in seconds"),type:"input-int",min:1,required:!!a,display:!!a},{name:"exposedPorts",label:t("Exposed Ports"),type:"add-select",optionsProtocol:[{label:t("TCP"),value:"tcp"},{label:t("UDP"),value:"udp"}],itemComponent:g.default,addText:t("Add Exposed Ports"),validator:this.exposedPortValidator,tip:t("If this parameter is specified, Zun will create a security group with a set of rules to open the ports that should be exposed, and associate the security group to the container.")}]}}a.StepSpec=b;a.default=(0,m.inject)("rootStore")((0,m.observer)(b))},7497:(e,a,n)=>{"use strict";var r=n(33950),l=n(48924);r(a,"__esModule",{value:!0}),a.default=void 0;var i=l(n(77879)),o=n(60615),u=l(n(63428)),s=n(43750);class d extends o.ConfirmAction{constructor(){super(...arguments),(0,i.default)(this,"policy","container:delete"),(0,i.default)(this,"aliasPolicy","zun:container:delete"),(0,i.default)(this,"allowedCheckFunc",(e=>(0,s.checkItemAction)(e,"delete"))),(0,i.default)(this,"onSubmit",(e=>u.default.delete({id:e.uuid})))}get id(){return"delete"}get title(){return t("Delete Container")}get actionName(){return t("Delete Container")}get isDanger(){return!0}get buttonText(){return t("Delete")}}a.default=d},8914:(e,a,n)=>{"use strict";var r=n(33950),l=n(48924);r(a,"__esModule",{value:!0}),a.default=a.Services=void 0;var i=l(n(54017)),o=n(87067),u=l(n(75372)),s=n(6433),d=n(83575);class c extends i.default{init(){this.store=u.default,this.downloadStore=u.default}get name(){return t("services")}get policy(){return"zun-service:get_all"}getColumns(){return[{title:t("Name"),dataIndex:"binary"},{title:t("Hosts"),dataIndex:"host",isHideable:!0},{title:t("Availability Zone"),dataIndex:"availability_zone",isHideable:!0},{title:t("Report Count"),dataIndex:"report_count",isHideable:!0},{title:t("Forced Down"),dataIndex:"forced_down",valueRender:"yesNo",isHideable:!0},{title:t("Forbidden"),dataIndex:"disabled",valueRender:"yesNo",isHideable:!0},{title:t("Service State"),dataIndex:"state",valueMap:s.serviceState},{title:t("Last Updated"),dataIndex:"updated_at",isHideable:!0,valueRender:"sinceTime"}]}get searchFilters(){return[{label:t("Name"),name:"binary"},{label:t("Service State"),name:"state",options:(0,d.getOptions)(s.serviceState)}]}}a.Services=c;a.default=(0,o.inject)("rootStore")((0,o.observer)(c))},14970:(e,a,n)=>{"use strict";n(33950)(a,"__esModule",{value:!0}),a.capsuleStatus=void 0;a.capsuleStatus={Creating:t("Creating"),Pending:t("Pending"),Running:t("Running"),Succeeded:t("Succeeded"),Failed:t("Failed"),Unknown:t("Unknown")}},19394:(e,a,n)=>{"use strict";var r=n(33950),l=n(48924);r(a,"__esModule",{value:!0}),a.actionMap=a.actionEvent=a.actionColumn=void 0;var i=l(n(23872)),o=n(37649),u=l(n(92379)),s=a.actionEvent={compute__do_container_start:t("Start Container"),compute__do_container_create:t("Create Container"),compute__do_container_stop:t("Stop Container"),compute__do_container_reboot:t("Reboot Container"),compute__do_container_restart:t("Restart Container"),compute__do_container_pause:t("Pause Container"),compute__do_container_unpause:t("Unpause Container"),compute__do_container_rebuild:t("Rebuild Container"),compute__do_container_kill:t("Kill Container"),compute__do_container_delete:t("Delete Container")},d=a.actionMap={create:t("Create"),stop:t("Stop"),reboot:t("Reboot"),start:t("Start"),restart:t("Restart"),pause:t("Pause"),unpause:t("Unpause"),resize:t("Resize"),rebuild:t("Rebuild"),kill:t("Kill"),delete:t("Delete")};a.actionColumn=e=>[{title:t("Operation Name"),dataIndex:"action",valueMap:d},{title:t("Project ID/Name"),dataIndex:"project_name",isHideable:!0,hidden:!e.isAdminPage},{title:t("Operation Time"),dataIndex:"start_time",valueRender:"toLocalTimeMoment"},{title:t("Request ID"),dataIndex:"request_id",isHideable:!0,render:(e,t)=>i.default.createElement(i.default.Fragment,null,i.default.createElement("span",null,e),i.default.createElement(u.default,{id:t.container_uuid,requestId:e,store:new o.ActionsLogStore,actionEvent:s}))},{title:t("User ID"),dataIndex:"user_id",isHideable:!0,hidden:!e.isAdminPage,render:t=>e.getLinkRender("userDetail",t,{id:t},null)}]},19813:(e,a,n)=>{"use strict";var r=n(33950),l=n(48924);r(a,"__esModule",{value:!0}),a.default=a.AttachNetwork=void 0;var i=l(n(75613)),o=l(n(77879)),u=n(87067),s=l(n(63428)),d=n(60615),c=n(43750);class f extends d.ModalAction{constructor(){super(...arguments),(0,o.default)(this,"aliasPolicy","zun:container:network_attach"),(0,o.default)(this,"disabledNetwork",(e=>{var{networks:t}=this.item;return(0,i.default)(t).call(t,(t=>t.id===e.id))})),(0,o.default)(this,"onSubmit",(e=>{var{networks:t}=e,a=t.selectedRowKeys[0];return this.store.attachNetwork(this.item.id,{network:a})}))}init(){this.store=s.default}static get modalSize(){return"large"}getModalSize(){return"large"}get name(){return t("Attach Network")}get defaultValue(){var{name:e}=this.item;return{instance:e}}get formItems(){return[{name:"instance",label:t("Instance"),type:"label",iconType:"instance"},{name:"networks",label:t("Networks"),type:"network-select-table",required:!0,disabledFunc:this.disabledNetwork}]}}a.AttachNetwork=f,(0,o.default)(f,"id","AttachNetwork"),(0,o.default)(f,"title",t("Attach Network")),(0,o.default)(f,"policy","container:network_attach"),(0,o.default)(f,"allowed",(e=>(0,c.checkItemAction)(e,"network_attach_detach")));a.default=(0,u.inject)("rootStore")((0,u.observer)(f))},24151:(e,a,n)=>{"use strict";var r=n(33950),l=n(48924);r(a,"__esModule",{value:!0}),a.default=void 0;var i=l(n(77879)),o=n(60615),u=l(n(63428)),s=n(43750);class d extends o.ConfirmAction{constructor(){super(...arguments),(0,i.default)(this,"policy","container:unpause"),(0,i.default)(this,"aliasPolicy","zun:container:unpause"),(0,i.default)(this,"allowedCheckFunc",(e=>(0,s.checkItemAction)(e,"unpause"))),(0,i.default)(this,"onSubmit",(e=>u.default.unpause({id:e.uuid})))}get id(){return"Unpause"}get title(){return t("Unpause Container")}get actionName(){return t("Unpause Container")}get buttonText(){return t("Unpause")}}a.default=d},25157:(e,a,n)=>{"use strict";var r=n(33950),l=n(48924);r(a,"__esModule",{value:!0}),a.default=a.BaseDetail=void 0;var i=l(n(42181)),o=n(87067);class u extends i.default{get leftCards(){return[this.containersInfoCard,this.systemInfoCard]}get containersInfoCard(){var e=[{label:t("Total Containers"),dataIndex:"total_containers"}];return{title:t("Containers Info"),options:e}}get systemInfoCard(){var e=[{label:t("Architecture"),dataIndex:"architecture"},{label:t("Kernel Version"),dataIndex:"kernel_version"},{label:t("OS"),dataIndex:"os"},{label:t("OS Type"),dataIndex:"os_type"}];return{title:t("System Info"),options:e}}}a.BaseDetail=u;a.default=(0,o.inject)("rootStore")((0,o.observer)(u))},25756:(e,t,a)=>{"use strict";var n=a(18565),r=a(13696),l=a(3787),i=a(10732),o=a(32462),u=a(10819),s=a(22338),d=a(33950),c=a(48924);d(t,"__esModule",{value:!0}),t.default=t.CapsulesStore=void 0;var f,p=c(a(10732)),m=c(a(1839)),h=c(a(77879)),v=c(a(33301)),g=c(a(81891)),b=c(a(92621)),y=a(27567);function _(e,t){var a=n(e);if(r){var o=r(e);t&&(o=l(o).call(o,(function(t){return i(e,t).enumerable}))),a.push.apply(a,o)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a,n,r=null!=arguments[t]?arguments[t]:{};t%2?o(a=_(Object(r),!0)).call(a,(function(t){(0,h.default)(e,t,r[t])})):u?s(e,u(r)):o(n=_(Object(r))).call(n,(function(t){d(e,t,i(r,t))}))}return e}var k=new(t.CapsulesStore=(f=class extends g.default{get client(){return b.default.zun.capsules}get mapper(){return e=>C(C({},e),{},{id:e.uuid})}create(e){var t=this;return(0,m.default)((function*(){return t.client.create(e)}))()}delete(e){var t=this;return(0,m.default)((function*(){var{id:a}=e;return t.client.delete(a)}))()}},(0,v.default)(f.prototype,"create",[y.action],(0,p.default)(f.prototype,"create"),f.prototype),(0,v.default)(f.prototype,"delete",[y.action],(0,p.default)(f.prototype,"delete"),f.prototype),f));t.default=k},26518:(e,t,a)=>{"use strict";var n=a(33950),r=a(48924);n(t,"__esModule",{value:!0}),t.default=void 0;var l=r(a(66224)),i=r(a(28333)),o={rowActions:{firstAction:i.default},batchActions:[i.default],primaryActions:[l.default]};t.default=o},27964:(e,a,n)=>{"use strict";var r=n(33950),l=n(48924);r(a,"__esModule",{value:!0}),a.default=void 0;var i=l(n(77879)),o=n(60615),u=l(n(63428)),s=n(43750);class d extends o.ConfirmAction{constructor(){super(...arguments),(0,i.default)(this,"policy","container:stop"),(0,i.default)(this,"aliasPolicy","zun:container:stop"),(0,i.default)(this,"allowedCheckFunc",(e=>(0,s.checkItemAction)(e,"stop"))),(0,i.default)(this,"onSubmit",(e=>u.default.stop({id:e.uuid})))}get id(){return"start"}get title(){return t("Stop Container")}get actionName(){return t("Stop Container")}get buttonText(){return t("Stop")}get isAsyncAction(){return!0}}a.default=d},28333:(e,a,n)=>{"use strict";var r=n(33950),l=n(48924);r(a,"__esModule",{value:!0}),a.default=void 0;var i=l(n(77879)),o=n(60615),u=l(n(25756));class s extends o.ConfirmAction{constructor(){super(...arguments),(0,i.default)(this,"policy","capsule:delete"),(0,i.default)(this,"allowedCheckFunc",(()=>!0)),(0,i.default)(this,"onSubmit",(e=>u.default.delete({id:e.uuid})))}get id(){return"delete"}get title(){return t("Delete Capsule")}get actionName(){return t("Delete Capsule")}get buttonText(){return t("Delete")}get isDanger(){return!0}}a.default=s},29916:(e,a,n)=>{"use strict";var r=n(33950),l=n(48924);r(a,"__esModule",{value:!0}),a.default=void 0;var i=l(n(77879)),o=n(60615),u=l(n(63428)),s=n(43750);class d extends o.ConfirmAction{constructor(){super(...arguments),(0,i.default)(this,"policy","container:pause"),(0,i.default)(this,"aliasPolicy","zun:container:pause"),(0,i.default)(this,"allowedCheckFunc",(e=>(0,s.checkItemAction)(e,"pause"))),(0,i.default)(this,"onSubmit",(e=>u.default.pause({id:e.uuid})))}get id(){return"pause"}get title(){return t("Pause Container")}get actionName(){return t("Pause Container")}get buttonText(){return t("Pause")}}a.default=d},31446:(e,t,a)=>{"use strict";var n=a(33950),r=a(48924);n(t,"__esModule",{value:!0}),t.stringifyContent=void 0;var l=r(a(77861)),i=r(a(71573)),o=r(a(23872));t.stringifyContent=e=>(0,i.default)(e)?"-":o.default.createElement("div",null,o.default.createElement("pre",null,(0,l.default)(e,null,4)))},34383:(e,a,n)=>{"use strict";var r=n(33950),l=n(48924);r(a,"__esModule",{value:!0}),a.default=a.ActionLogs=void 0;var i=l(n(77879)),o=l(n(54017)),u=n(87067),s=n(37649),d=n(19394),c=n(83575);class f extends o.default{constructor(){super(...arguments),(0,i.default)(this,"getColumns",(()=>(0,d.actionColumn)(this)))}init(){this.store=new s.ActionsLogStore}get name(){return t("Action Logs")}get policy(){return"container:actions"}get searchFilters(){return[{label:t("Operation Name"),name:"action",options:(0,c.getOptions)(d.actionMap)}]}}a.ActionLogs=f;a.default=(0,u.inject)("rootStore")((0,u.observer)(f))},36845:(e,a,n)=>{"use strict";var r=n(33950),l=n(48924);r(a,"__esModule",{value:!0}),a.default=a.HostsDetail=void 0;var i=l(n(19989)),o=n(87067),u=l(n(19585)),s=l(n(65229)),d=l(n(25157));class c extends u.default{init(){this.store=s.default}get name(){return t("Hosts Detail")}get listUrl(){return this.getRoutePath("zunHosts")}get policy(){return"host:get"}get detailInfos(){return[{title:t("Hostname"),dataIndex:"name"},{title:t("CPU (Core)"),dataIndex:"cpu_percent",render:(e,t)=>{var a;return(0,i.default)(a="".concat(t.cpu_used," / ")).call(a,t.cpus)}},{title:t("Configured Memory (GiB)"),dataIndex:"memory_percent",render:(e,t)=>{var a;return(0,i.default)(a="".concat(t.mem_used_gb," / ")).call(a,t.mem_total_gb)}},{title:t("Configured Disk (GiB)"),dataIndex:"disk_percent",render:(e,t)=>{var a;return(0,i.default)(a="".concat(t.disk_used," / ")).call(a,t.disk_total)}}]}get tabs(){return[{title:t("Detail"),key:"detail",component:d.default}]}}a.HostsDetail=c;a.default=(0,o.inject)("rootStore")((0,o.observer)(c))},37649:(e,t,a)=>{"use strict";var n=a(18565),r=a(13696),l=a(3787),i=a(10732),o=a(32462),u=a(10819),s=a(22338),d=a(33950),c=a(48924);d(t,"__esModule",{value:!0}),t.default=t.ActionsLogStore=void 0;var f=c(a(77879)),p=c(a(81891)),m=c(a(92621));function h(e,t){var a=n(e);if(r){var o=r(e);t&&(o=l(o).call(o,(function(t){return i(e,t).enumerable}))),a.push.apply(a,o)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a,n,r=null!=arguments[t]?arguments[t]:{};t%2?o(a=h(Object(r),!0)).call(a,(function(t){(0,f.default)(e,t,r[t])})):u?s(e,u(r)):o(n=h(Object(r))).call(n,(function(t){d(e,t,i(r,t))}))}return e}class g extends p.default{get client(){return m.default.zun.containers.actions}get isSubResource(){return!0}get paramsFunc(){return()=>{}}get mapper(){return e=>v(v({},e),{},{id:e.request_id})}detailFetchByClient(e){var{id:t,requestId:a}=e;return this.client.show(t,a)}}t.ActionsLogStore=g;var b=new g;t.default=b},38775:(e,a,n)=>{"use strict";var r=n(18565),l=n(13696),i=n(3787),o=n(10732),u=n(32462),s=n(10819),d=n(22338),c=n(33950),f=n(48924);c(a,"__esModule",{value:!0}),a.default=a.StepCreate=void 0;var p=f(n(32462)),m=f(n(19989)),h=f(n(58239)),v=f(n(24836));n(98368);var g=f(n(6174)),b=f(n(1839)),y=f(n(49849)),_=f(n(77879)),C=f(n(71573)),k=n(87067),x=(n(77800),n(60615)),S=f(n(63428)),w=f(n(52740)),I=f(n(85768)),M=f(n(2265)),E=f(n(75793)),D=f(n(59325)),P=f(n(62673)),N=["exposedPorts","environmentVariables","labels","mounts","image_driver","imageDocker","imageGlance","exitPolicy","maxRetry","networks","ports","hints","securityGroup","healthcheck","healthcheck_cmd","healthcheck_interval","healthcheck_retries","healthcheck_timeout","command","entrypoint"];function A(e,t){var a=r(e);if(l){var n=l(e);t&&(n=i(n).call(n,(function(t){return o(e,t).enumerable}))),a.push.apply(a,n)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a,n,r=null!=arguments[t]?arguments[t]:{};t%2?u(a=A(Object(r),!0)).call(a,(function(t){(0,_.default)(e,t,r[t])})):s?d(e,s(r)):u(n=A(Object(r))).call(n,(function(t){c(e,t,o(r,t))}))}return e}class T extends x.StepAction{constructor(){super(...arguments),(0,_.default)(this,"onSubmit",(e=>{var t,a,{exposedPorts:n,environmentVariables:r,labels:l,mounts:i,image_driver:o,imageDocker:u,imageGlance:s,exitPolicy:d,maxRetry:c,networks:f,ports:v,hints:g,securityGroup:b,healthcheck:_,healthcheck_cmd:k,healthcheck_interval:x,healthcheck_retries:S,healthcheck_timeout:w,command:I,entrypoint:M}=e,E=R({image_driver:o},(0,y.default)(e,N)),D={},P=[];if(n&&n.length&&((0,p.default)(n).call(n,(e=>{var t,a=(0,m.default)(t="".concat(e.value.port,"/")).call(t,e.value.protocol);D[a]={}})),E.exposed_ports=D),r&&r.length){var A=(0,h.default)(r).call(r,((e,t)=>{var a=t.value.key,n=t.value.value;return e[a]=n,e}),{});E.environment=A}if(l&&l.length){var T=(0,h.default)(l).call(l,((e,t)=>{var{key:a}=t.value,{value:n}=t.value;return e[a]=n,e}),{});E.labels=T}if(i&&i.length){var j=(0,h.default)(i).call(i,((e,t)=>{var{type:a,source:n,size:r,destination:l,isNewVolume:i}=t.value;return i?e.push({type:a,size:r,destination:l}):e.push({type:a,source:n,destination:l}),e}),[]);E.mounts=j}f&&f.selectedRowKeys.length&&((0,p.default)(t=f.selectedRowKeys).call(t,(e=>{P.push({network:e})})),E.nets=P);v&&v.selectedRowKeys.length&&((0,p.default)(a=v.selectedRowKeys).call(a,(e=>{P.push({port:e})})),E.nets=P);if(g&&g.length){var z=(0,h.default)(g).call(g,((e,t)=>{var{key:a}=t.value,{value:n}=t.value;return e[a]=n,e}),{});E.hints=z}if(b&&b.selectedRows.length&&(0,C.default)(D)){var O,L=(0,h.default)(O=b.selectedRows).call(O,((e,t)=>(e.push(t.name),e)),[]);E.security_groups=L}return _&&(E.healthcheck={cmd:k,interval:x,retries:S,timeout:w}),I&&(E.command=[I]),M&&(E.entrypoint=[M]),u&&"docker"===o&&(E.image=u),s&&"glance"===o&&(E.image=s.selectedRowKeys[0]),d&&(E.restart_policy=R({Name:d},c?{MaximumRetryCount:c}:{})),this.store.create(E)}))}init(){this.store=S.default,this.projectStore=w.default,this.getQuota(),this.state.isLoading=!0,this.errorMsg=""}static allowed(){return v.default.resolve(!0)}get name(){return t("Create Container")}get listUrl(){return this.getRoutePath("zunContainers")}get hasConfirmStep(){return!1}get steps(){return[{title:t("Info"),component:I.default},{title:t("Spec"),component:M.default},{title:t("Volumes"),component:E.default},{title:t("Network Config"),component:D.default},{title:t("Others"),component:P.default}]}get showQuota(){return!0}get quotaInfo(){if(this.state.isLoading)return[];var{containers:e={},cpu:a={},memory:n={},disk:r={}}=this.projectStore.zunQuota,{left:l=0}=e||{},{data:{cpu:i=0,memory:o=0,disk:u=0}={}}=this.state,s=R(R({},e),{},{add:l?1:0,name:"containers",title:t("Containers")}),{left:d=0}=a,{left:c=0}=n,{left:f=0}=r,p=l&&(-1===d||i<=d)&&(-1===c||o<=c)&&(-1===f||u<=f),m=R(R({},a),{},{add:p?i:0,name:"cpu",title:t("Containers CPU"),type:"line"}),h=R(R({},n),{},{add:p?o:0,name:"memory",title:t("Containers Memory (MiB)"),type:"line"}),v=R(R({},r),{},{add:p?u:0,name:"disk",title:t("Containers Disk (GiB)"),type:"line"});return this.checkQuota(this.state.data,this.projectStore.zunQuota),[s,m,h,v]}getQuota(){var e=this;return(0,b.default)((function*(){yield e.projectStore.fetchProjectZunQuota(),e.setState({isLoading:!1})}))()}getQuotaMessage(e,a,n){return-1===a?"":0===a?t("Quota: Insufficient { name } quota to create resources.",{name:n}):e>a?t("Insufficient {name} quota to create resources (left { quota }, input { input }).",{name:n,quota:a,input:e}):""}checkQuota(e,a){var{containers:n={},cpu:r={},memory:l={},disk:i={}}=a||{},{cpu:o=0,memory:u=0,disk:s=0}=e||{},{left:d=0}=n,c=this.getQuotaMessage(1,d,t("Containers")),{left:f=0}=r,p=this.getQuotaMessage(o,f,t("CPU")),{left:m=0}=l,h=this.getQuotaMessage(u,m,t("Memory")),{left:v=0}=i,b=this.getQuotaMessage(s,v,t("Disk"));if(c||p||h||b){var y=c||p||h||b;this.errorMsg!==y&&g.default.error(y),this.errorMsg=y}else this.errorMsg=""}get disableNext(){return!!this.errorMsg}get disableSubmit(){return!!this.errorMsg}}a.StepCreate=T,(0,_.default)(T,"id","create-container"),(0,_.default)(T,"title",t("Create Container")),(0,_.default)(T,"path","/container-service/containers/create"),(0,_.default)(T,"policy","container:create"),(0,_.default)(T,"aliasPolicy","zun:container:create");a.default=(0,k.inject)("rootStore")((0,k.observer)(T))},39086:(e,a,n)=>{"use strict";var r=n(33950),l=n(48924);r(a,"__esModule",{value:!0}),a.default=a.ContainerDetail=void 0;var i=l(n(29672)),o=n(87067),u=l(n(19585)),s=l(n(63428)),d=n(43750),c=n(60165),f=l(n(59842)),p=l(n(43076)),m=l(n(34383)),h=l(n(82829)),v=l(n(44029));class g extends u.default{init(){this.store=s.default}get name(){return t("Container Detail")}get listUrl(){return this.getRoutePath("zunContainers")}get policy(){return"container:get_one"}get actionConfigs(){return this.isAdminPage?f.default.actionConfigsAdmin:f.default.actionConfigs}get detailInfos(){return[{title:t("Name"),dataIndex:"name"},{title:t("Container Status"),dataIndex:"status",valueMap:d.containerStatus}]}get showLogs(){var{status:e}=this.detailData||{},t=["Created","Running","Stopped","Paused"];return(0,c.checkPolicyRule)("container:logs")&&(0,i.default)(t).call(t,e)}get tabs(){var e=[{title:t("Detail"),key:"general_info",component:p.default},{title:t("Action Logs"),key:"action_logs",component:m.default}];return this.showLogs&&e.push({title:t("Logs"),key:"logs",component:h.default}),!0===this.detailData.interactive&&e.push({title:t("Console"),key:"console",component:v.default}),e}}a.ContainerDetail=g;a.default=(0,o.inject)("rootStore")((0,o.observer)(g))},42687:(e,a,n)=>{"use strict";var r=n(33950),l=n(48924);r(a,"__esModule",{value:!0}),a.default=void 0;var i=l(n(77879)),o=n(60615),u=l(n(63428)),s=n(43750);class d extends o.ConfirmAction{constructor(){super(...arguments),(0,i.default)(this,"policy","container:reboot"),(0,i.default)(this,"aliasPolicy","zun:container:reboot"),(0,i.default)(this,"allowedCheckFunc",(e=>(0,s.checkItemAction)(e,"reboot"))),(0,i.default)(this,"onSubmit",(e=>u.default.reboot({id:e.uuid})))}get id(){return"reboot"}get title(){return t("Reboot Container")}get actionName(){return t("Reboot Container")}get buttonText(){return t("Reboot")}get isAsyncAction(){return!0}}a.default=d},43076:(e,a,n)=>{"use strict";var r=n(33950),l=n(48924);r(a,"__esModule",{value:!0}),a.default=a.BaseDetail=void 0;var i=l(n(89195)),o=l(n(71573)),u=l(n(42181)),s=l(n(23872)),d=n(87067),c=n(43750),f=n(31446);class p extends u.default{get leftCards(){var e=[this.baseInfoCard,this.otherCard],{stats:t}=this.detailData;return(0,o.default)(t)||e.push(this.statsCard),e}get rightCards(){return[this.specCard]}get baseInfoCard(){var{image:e,imageInfo:a}=this.detailData||{},n=a?this.getLinkRender("imageDetail",a.name,{id:a.id}):e,r=[{label:t("Image"),content:n},{label:t("Image Driver"),dataIndex:"image_driver",valueMap:c.imageDrivers},{label:t("Status Detail"),dataIndex:"status_detail",valueMap:c.containerStatus},{label:t("Status Reason"),dataIndex:"status_reason"},{label:t("Task State"),dataIndex:"task_state",valueMap:c.containerTaskStatus}];return{title:t("Base Info"),options:r}}get otherCard(){var e=[{label:t("Host"),dataIndex:"host"},{label:t("Hostname"),dataIndex:"hostname"},{label:t("Runtime"),dataIndex:"runtime"},{label:t("CMD"),dataIndex:"command",render:f.stringifyContent},{label:t("ENTRYPOINT"),dataIndex:"entrypoint",render:f.stringifyContent},{label:t("Workdir"),dataIndex:"workdir"},{label:t("Environment"),dataIndex:"environment",render:f.stringifyContent},{label:t("Labels"),dataIndex:"labels",render:f.stringifyContent}];return{title:t("Others"),options:e}}get specCard(){var e=this,a=[{label:t("CPU (Core)"),dataIndex:"cpu"},{label:t("Memory (MiB)"),dataIndex:"memory"},{label:t("Disk (GiB)"),dataIndex:"disk"},{label:t("Exit Policy"),dataIndex:"restart_policy",render:e=>{if((0,o.default)(e))return"-";var{Name:a,MaximumRetryCount:n}=e;return s.default.createElement("div",null,s.default.createElement("p",null,t("Name"),": ",c.exitPolicies[a]),s.default.createElement("p",null,t("Max Retry"),": ",n))}},{label:t("Enable auto remove"),dataIndex:"auto_remove",valueRender:"yesNo"},{label:t("Enable auto heal"),dataIndex:"auto_heal",valueRender:"yesNo"},{label:t("Enable interactive mode"),dataIndex:"interactive",valueRender:"yesNo"},{label:t("Enable Health Check"),dataIndex:"healthcheck",render:e=>{if((0,o.default)(e))return t("No");var{interval:a,retries:n,test:r,timeout:l}=e;return s.default.createElement("div",null,s.default.createElement("p",null,t("Health Check CMD"),": ",r),s.default.createElement("p",null,t("Health Check Interval"),": ",a," s"),s.default.createElement("p",null,t("Health Check Retries"),": ",n),s.default.createElement("p",null,t("Health Check Timeout"),": ",l," s"))}},{label:t("Addresses"),dataIndex:"addresses",render:f.stringifyContent},{label:t("IP Address"),dataIndex:"addrs",render:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return s.default.createElement(s.default.Fragment,null,e.length?(0,i.default)(e).call(e,(e=>s.default.createElement("div",{key:e.addr},e.addr))):"-")}},{label:t("Networks"),dataIndex:"networks",render:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return s.default.createElement(s.default.Fragment,null,t.length?(0,i.default)(t).call(t,(t=>{var a=e.getLinkRender("networkDetail",t.name,{id:t.id});return s.default.createElement("div",{key:t.id},a)})):"-")}},{label:t("Subnets"),dataIndex:"subnets",render:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return s.default.createElement(s.default.Fragment,null,t.length?(0,i.default)(t).call(t,(t=>{var a=e.getLinkRender("subnetDetail",t.name,{networkId:t.network_id,id:t.id});return s.default.createElement("div",{key:t.id},a)})):"-")}},{label:t("Ports"),dataIndex:"ports",render:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return s.default.createElement(s.default.Fragment,null,e.length?(0,i.default)(e).call(e,(e=>s.default.createElement("div",{key:e},e))):"-")}},{label:t("Security Groups"),dataIndex:"security_groups",render:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return s.default.createElement(s.default.Fragment,null,t.length?(0,i.default)(t).call(t,(t=>{var a=e.getLinkRender("securityGroupDetail",t,{id:t});return s.default.createElement("div",{key:t},a)})):"-")}}];return{title:t("Spec"),labelCol:4,options:a}}get statsCard(){var e=[{label:t("BLOCK I/O(B)"),dataIndex:"stats[BLOCK I/O(B)]"},{label:t("NET I/O(B)"),dataIndex:"stats[NET I/O(B)]"},{label:t("CPU %"),dataIndex:"stats[CPU %]",render:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0).toFixed(4)}},{label:t("MEM LIMIT (MiB)"),dataIndex:"stats[MEM LIMIT(MiB)]"},{label:t("MEM USAGE (MiB)"),dataIndex:"stats[MEM USAGE(MiB)]",render:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0).toFixed(4)}},{label:t("MEM %"),dataIndex:"stats[MEM %]",render:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0).toFixed(4)}}];return{title:t("Stats Information"),options:e}}}a.BaseDetail=p;a.default=(0,d.inject)("rootStore")((0,d.observer)(p))},43750:(e,a,n)=>{"use strict";var r=n(33950),l=n(48924);r(a,"__esModule",{value:!0}),a.imageDrivers=a.exitPolicies=a.containerTaskStatus=a.containerStatus=a.checkItemAction=void 0;var i=l(n(29672)),o=(a.containerStatus={Creating:t("Creating"),Created:t("Created"),Running:t("Running"),Stopped:t("Stopped"),Paused:t("Paused"),Restarting:t("Restarting"),Deleting:t("Deleting"),Error:t("Error"),Unknown:t("Unknown"),Rebuilding:t("Rebuilding")},a.containerTaskStatus={free:t("No Task"),container_creating:t("Container Creating"),container_starting:t("Container Starting"),container_stopping:t("Container Stopping"),container_rebooting:t("Container Rebooting"),container_deleting:t("Container Deleting"),container_rebuilding:t("Container Rebuilding"),container_killing:t("Container Killing"),container_pausing:t("Container Pausing"),container_unpausing:t("Container Unpausing"),container_restarting:t("Container Restarting"),image_pulling:t("Image Pulling"),sg_adding:t("Security Groups Adding"),sg_removing:t("Security Groups Removing"),network_attaching:t("Network Attaching"),network_detaching:t("Network Detaching")},"Error"),u="Running",s="Stopped",d="Paused",c="Created",f="Deleted",p="Dead",m={update:[c,u,s,d],start:[c,s,o],stop:[u],reboot:[c,u,s,o],rebuild:[c,u,s,o],pause:[u],unpause:[d],execute:[u],kill:[u],delete:[c,o,s,f,p],delete_force:[c,"Creating",o,u,s,"Unknown",f,p,"Restarting","Rebuilding","Deleting"],delete_stop:[u,c,o,s,f,p],manage_security_groups:[c,u,s,d],network_attach_detach:[c,u,s,d]};a.checkItemAction=(e,t)=>{var a;if(!e)return!1;var{status:n}=e;return(0,i.default)(a=m[t]).call(a,n)};a.imageDrivers={docker:t("Docker Hub"),glance:t("Glance Image")},a.exitPolicies={no:t("No"),"on-failure":t("On failure"),always:t("Always"),"unless-stopped":t("Unless Stopped")}},44029:(e,t,a)=>{"use strict";var n=a(71742),r=a(33950),l=a(10732),i=a(48924);r(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.useEffect)((()=>{u.default.attach(e.detail.uuid).then((e=>{var{head:t}=document,a=document.createElement("link");a.rel="stylesheet",a.href="https://cdn.jsdelivr.net/npm/xterm@4.19.0/css/xterm.css",t.appendChild(a);var n=document.createElement("script");return n.src="https://cdnjs.cloudflare.com/ajax/libs/xterm/3.14.5/xterm.min.js",n.onload=()=>{var t=new window.Terminal({cursorBlink:!0});t.write(" >$ "),t.open(document.getElementById("terminal"));var a=new WebSocket(e,["binary","base64"]);t.on("data",(function(e){a.send(function(e){for(var t=new ArrayBuffer(e.length),a=new Uint8Array(t),n=0,r=e.length;n<r;n++)a[n]=e.charCodeAt(n);return t}(e))})),a.onmessage=function(e){if(e.data instanceof Blob){var a=new FileReader;a.onload=function(){t.write(a.result)},a.readAsText(e.data)}else t.write(e.data)}},t.appendChild(n),()=>{t.removeChild(a),t.removeChild(n)}}))}),[]),o.default.createElement("div",null,o.default.createElement("div",{id:"terminal"}))};var o=function(e,t){if("function"==typeof n)var a=new n,i=new n;return function(e,t){if(!t&&e&&e.__esModule)return e;var n,o,u={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return u;if(n=t?i:a){if(n.has(e))return n.get(e);n.set(e,u)}for(var s in e)"default"!==s&&{}.hasOwnProperty.call(e,s)&&((o=(n=r)&&l(e,s))&&(o.get||o.set)?n(u,s,o):u[s]=e[s]);return u}(e,t)}(a(23872)),u=i(a(63428))},49329:(e,a,n)=>{"use strict";var r=n(33950),l=n(48924);r(a,"__esModule",{value:!0}),a.default=a.Capsules=void 0;var i=l(n(54017)),o=n(87067),u=l(n(25756)),s=n(14970),d=n(83575),c=l(n(26518));class f extends i.default{init(){this.store=u.default,this.downloadStore=u.default}get name(){return t("capsules")}get policy(){return"capsule:get_all"}get actionConfigs(){return c.default}getColumns(){return[{title:t("ID/Name"),dataIndex:"meta_name",isLink:!0,routeName:this.getRouteName("zunCapsuleDetail"),idKey:"uuid"},{title:t("Status"),isHideable:!0,dataIndex:"status",valueMap:s.capsuleStatus},{title:t("CPU"),isHideable:!0,dataIndex:"cpu"},{title:t("Memory"),isHideable:!0,dataIndex:"memory"}]}get searchFilters(){return[{label:t("Name"),name:"name"},{label:t("Status"),name:"status",options:(0,d.getOptions)(s.capsuleStatus)}]}}a.Capsules=f;a.default=(0,o.inject)("rootStore")((0,o.observer)(f))},54827:(e,a,n)=>{"use strict";var r=n(33950),l=n(48924);r(a,"__esModule",{value:!0}),a.default=a.DetachNetwork=void 0;var i=l(n(29672)),o=l(n(77879)),u=n(87067),s=l(n(63428)),d=n(60615),c=n(43750),f=n(12903);class p extends d.ModalAction{constructor(){super(...arguments),(0,o.default)(this,"aliasPolicy","zun:container:network_detach"),(0,o.default)(this,"disabledNetwork",(e=>{var{networks:t}=this.item;return(0,i.default)(t).call(t,e.id)})),(0,o.default)(this,"onSubmit",(e=>{var{networks:t}=e,a=t.selectedRowKeys[0];return this.store.detachNetwork(this.item.id,{network:a})}))}init(){this.store=s.default}static get modalSize(){return"large"}getModalSize(){return"large"}get name(){return t("Detach Network")}get networks(){var{networks:e=[]}=this.item;return e}get defaultValue(){var{name:e}=this.item;return{instance:e}}get formItems(){return[{name:"instance",label:t("Instance"),type:"label",iconType:"instance"},{name:"networks",label:t("Networks"),type:"select-table",data:this.networks,columns:(0,f.networkColumns)(this),filterParams:[{label:t("Name"),name:"name"}],required:!0}]}}a.DetachNetwork=p,(0,o.default)(p,"id","DetachNetwork"),(0,o.default)(p,"title",t("Detach Network")),(0,o.default)(p,"policy","container:network_detach"),(0,o.default)(p,"allowed",(e=>(0,c.checkItemAction)(e,"network_attach_detach")));a.default=(0,u.inject)("rootStore")((0,u.observer)(p))},55378:(e,a,n)=>{"use strict";var r=n(33950),l=n(48924);r(a,"__esModule",{value:!0}),a.default=a.CapsulesDetail=void 0;var i=n(87067),o=l(n(19585)),u=l(n(25756)),s=n(14970),d=l(n(80288)),c=l(n(26518));class f extends o.default{init(){this.store=u.default}get name(){return t("Cluster Template Detail")}get listUrl(){return this.getRoutePath("zunCapsules")}get policy(){return"capsule:get_one_all_projects"}get actionConfigs(){return c.default}get detailInfos(){return[{title:t("Name"),dataIndex:"meta_name"},{title:t("Status"),dataIndex:"status",valueMap:s.capsuleStatus},{title:t("Created At"),dataIndex:"created_at",valueRender:"toLocalTime"},{title:t("Updated At"),dataIndex:"updated_at",valueRender:"toLocalTime"}]}get tabs(){return[{title:t("Detail"),key:"general_info",component:d.default}]}}a.CapsulesDetail=f;a.default=(0,i.inject)("rootStore")((0,i.observer)(f))},57128:(e,a,n)=>{"use strict";var r=n(18565),l=n(13696),i=n(3787),o=n(10732),u=n(32462),s=n(10819),d=n(22338),c=n(33950),f=n(48924);c(a,"__esModule",{value:!0}),a.default=void 0,n(56459);var p=f(n(75249));n(51011);var m=f(n(28153));n(10953);var h=f(n(30519));n(44771);var v=f(n(44313));n(23153);var g=f(n(47983)),b=f(n(77879)),y=f(n(23872)),_=(n(77800),f(n(61296))),C=f(n(87546)),k=f(n(89358));function x(e,t){var a=r(e);if(l){var n=l(e);t&&(n=i(n).call(n,(function(t){return o(e,t).enumerable}))),a.push.apply(a,n)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a,n,r=null!=arguments[t]?arguments[t]:{};t%2?u(a=x(Object(r),!0)).call(a,(function(t){(0,b.default)(e,t,r[t])})):s?d(e,s(r)):u(n=x(Object(r))).call(n,(function(t){c(e,t,o(r,t))}))}return e}class w extends y.default.Component{constructor(e){super(e),(0,b.default)(this,"onChange",(e=>{var{onChange:t}=this.props;t&&t(e)})),(0,b.default)(this,"onTypeChange",(e=>{this.setState({isNewVolume:"volume"===e},(()=>{this.onChange(S(S({},this.state),{},{type:e}))}))})),(0,b.default)(this,"onSourceChange",(e=>{this.onChange(S(S({},this.state),{},{source:e}))})),(0,b.default)(this,"onVolumeSizeChange",(e=>{this.onChange(S(S({},this.state),{},{size:e}))})),(0,b.default)(this,"onDestinationChange",(e=>{this.onChange(S(S({},this.state),{},{destination:e.target.value}))})),this.state={type:"",source:"",destination:"",size:0,isNewVolume:!1}}static getDerivedStateFromProps(e,t){var{type:a,source:n,size:r,destination:l}=e.value||{};return a!==t.type||n!==t.source||r!==t.size||l!==t.destination?{type:a,source:n,size:r,destination:l,isNewVolume:"volume"===a}:null}render(){var{type:e,source:a,destination:n,size:r,isNewVolume:l}=this.state,i=y.default.createElement(g.default,{value:e,options:this.props.optionsType,onChange:this.onTypeChange,className:k.default.select,placeholder:t("Please select type"),required:!0}),o=y.default.createElement(g.default,{value:a,options:this.props.optionsSource,onChange:this.onSourceChange,className:k.default.select,placeholder:t("Please select source")}),u=y.default.createElement(C.default,{value:r,min:1,onChange:this.onVolumeSizeChange,style:{maxWidth:"40%"}}),s=y.default.createElement(v.default,{value:n,onChange:this.onDestinationChange,style:{maxWidth:"60%"},placeholder:t("Specify mount point."),required:!0});return y.default.createElement(p.default.Item,{className:k.default["select-input"]},y.default.createElement(m.default,{gutter:8},y.default.createElement(h.default,{span:6},y.default.createElement("span",{className:k.default.label},t("Type")),i),y.default.createElement(h.default,{span:10,hidden:l},y.default.createElement("span",{className:k.default.label},t("Source")),o),y.default.createElement(h.default,{span:10,hidden:!l},y.default.createElement("span",{className:k.default.label},t("Size (GiB)")),u),y.default.createElement(h.default,{span:8},y.default.createElement("span",{className:k.default.label},t("Destination")),s)))}}a.default=w,(0,b.default)(w,"propTypes",{onChange:_.default.func,value:_.default.any})},59325:(e,a,n)=>{"use strict";var r=n(33950),l=n(48924);r(a,"__esModule",{value:!0}),a.default=a.StepNetworks=void 0;var i=l(n(3787)),o=l(n(23872)),u=n(91106),s=n(95605),d=l(n(78711)),c=n(87067),f=n(27567),p=n(46964),m=n(15065),h=n(13479);class v extends d.default{init(){this.portStore=new s.PortStore,this.securityGroupStore=new u.SecurityGroupStore,this.getPorts()}get title(){return t("Networks")}get name(){return t("Networks")}getPorts(){this.portStore.fetchList({project_id:this.currentProjectId,status:"DOWN"})}get ports(){var e;return(0,i.default)(e=(0,f.toJS)(this.portStore.list.data)||[]).call(e,(e=>!e.device_id))}get formItems(){var{networks:e=[]}=this.state,{context:{exposedPorts:a=[]}}=this.props;return[{name:"networks",label:t("Networks"),type:"network-select-table",isMulti:!0,onChange:e=>{var{selectedRowKeys:t=[]}=e;this.setState({networks:t})}},{name:"ports",type:"select-table",label:t("Ports"),data:this.ports,isLoading:this.portStore.list.isLoading,isMulti:!0,header:t("Ports provide extra communication channels to your containers. You can select ports instead of networks or a mix of both, If the terminal port and the network are selected at the same time, note that the terminal port is not a terminal port of the selected network, and the container under the same network will only be assigned one IP address (The port executes its own security group rules by default)."),filterParams:p.portFilters,columns:p.portColumns},{name:"securityGroup",label:t("Security Group"),type:"select-table",backendPageStore:this.securityGroupStore,extraParams:{project_id:this.currentProjectId},isMulti:!0,hidden:a.length||!e.length,header:o.default.createElement("div",{style:{marginBottom:8}},t("The security group is similar to the firewall function and is used to set up network access control. "),t(" You can go to the console to "),(0,h.getLinkRender)({key:"securityGroup",value:"".concat(t("create a new security group"),"> "),extra:{target:"_blank"}})),filterParams:m.securityGroupFilter,columns:m.securityGroupColumns,tip:t("If exposed port is specified, this parameter will be ignored.")}]}}a.StepNetworks=v;a.default=(0,c.inject)("rootStore")((0,c.observer)(v))},59842:(e,a,n)=>{"use strict";var r=n(33950),l=n(48924);r(a,"__esModule",{value:!0}),a.default=void 0;var i=l(n(38775)),o=l(n(7497)),u=l(n(29916)),s=l(n(42687)),d=l(n(75642)),c=l(n(27964)),f=l(n(24151)),p=l(n(74835)),m=l(n(96192)),h=l(n(90503)),v=l(n(64002)),g=l(n(67688)),b=l(n(19813)),y=l(n(54827)),_=[d.default,c.default,s.default,h.default,p.default],C=[b.default,y.default],k={rowActions:{firstAction:o.default,moreActions:[{title:t("Container Status"),actions:[..._,u.default,f.default,g.default]},{title:t("Related Resources"),actions:C},{action:m.default},{action:v.default}]},batchActions:[o.default],primaryActions:[i.default]},x={rowActions:{firstAction:o.default,moreActions:[{title:t("Container Status"),actions:_},{action:m.default},{action:v.default}]},batchActions:[o.default],primaryActions:[]};a.default={actionConfigs:k,actionConfigsAdmin:x}},62673:(e,a,n)=>{"use strict";var r=n(33950),l=n(48924);r(a,"__esModule",{value:!0}),a.default=a.StepOthers=void 0;var i=l(n(75613)),o=l(n(24836)),u=l(n(77879)),s=l(n(78711)),d=n(87067),c=l(n(62731));class f extends s.default{constructor(){super(...arguments),(0,u.default)(this,"keyValueValidator",((e,a)=>{var n;return(0,i.default)(n=a||[]).call(n,(e=>{var{value:t}=e;return null==t||!t.key||null==t||!t.value}))?o.default.reject(new Error(t("Please input key and value"))):o.default.resolve()}))}get title(){return t("Others")}get name(){return t("Others")}get formItems(){return[{name:"hostname",label:t("Hostname"),type:"input",placeholder:t("The host name of this container")},{name:"runtime",label:t("Runtime"),type:"input",placeholder:t("The container runtime tool to create container with")},{name:"command",label:t("CMD"),type:"input",placeholder:t("A command that will be sent to the container")},{name:"entrypoint",label:t("ENTRYPOINT"),type:"input",extra:t("The entrypoint which overwrites the default ENTRYPOINT of the image")},{name:"workdir",label:t("Working Directory"),type:"input",placeholder:t("The working directory for commands to run in")},{name:"environmentVariables",label:t("Environment Variables"),type:"add-select",itemComponent:c.default,addText:t("Add Environment Variable"),validator:this.keyValueValidator},{name:"hints",label:t("Scheduler Hints"),type:"add-select",itemComponent:c.default,addText:t("Add scheduler hints"),validator:this.keyValueValidator},{name:"labels",label:t("Labels"),type:"add-select",itemComponent:c.default,addText:t("Add Label"),validator:this.keyValueValidator}]}}a.StepOthers=f;a.default=(0,d.inject)("rootStore")((0,d.observer)(f))},63428:(e,t,a)=>{"use strict";var n=a(18565),r=a(13696),l=a(3787),i=a(10732),o=a(32462),u=a(10819),s=a(22338),d=a(33950),c=a(48924);d(t,"__esModule",{value:!0}),t.default=t.ContainersStore=void 0;var f,p=c(a(24836)),m=c(a(89195)),h=c(a(32462)),v=c(a(77481)),g=c(a(68982)),b=c(a(10732)),y=c(a(1839)),_=c(a(77879)),C=c(a(33301)),k=c(a(81891)),x=c(a(92621)),S=a(27567);function w(e,t){var a=n(e);if(r){var o=r(e);t&&(o=l(o).call(o,(function(t){return i(e,t).enumerable}))),a.push.apply(a,o)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a,n,r=null!=arguments[t]?arguments[t]:{};t%2?o(a=w(Object(r),!0)).call(a,(function(t){(0,_.default)(e,t,r[t])})):u?s(e,u(r)):o(n=w(Object(r))).call(n,(function(t){d(e,t,i(r,t))}))}return e}var M=new(t.ContainersStore=(f=class extends k.default{get client(){return x.default.zun.containers}get imageClient(){return x.default.glance.images}get networkClient(){return x.default.neutron.networks}get subnetClient(){return x.default.neutron.subnets}get mapper(){return e=>I(I({},e),{},{id:e.uuid,task_state:null===e.task_state?"free":e.task_state})}create(e){var t=this;return(0,y.default)((function*(){return t.submitting(t.client.create(e))}))()}delete(e){var t=this;return(0,y.default)((function*(){var{id:a}=e;return t.client.delete(a)}))()}start(e){var t=this;return(0,y.default)((function*(){var{id:a}=e;return t.client.start(a)}))()}stop(e){var t=this;return(0,y.default)((function*(){var{id:a}=e;return t.client.stop(a)}))()}pause(e){var t=this;return(0,y.default)((function*(){var{id:a}=e;return t.client.pause(a)}))()}reboot(e){var t=this;return(0,y.default)((function*(){var{id:a}=e;return t.client.reboot(a)}))()}unpause(e){var t=this;return(0,y.default)((function*(){var{id:a}=e;return t.client.unpause(a)}))()}rebuild(e,t){var a=this;return(0,y.default)((function*(){return a.client.rebuild(e,t)}))()}kill(e,t){var a=this;return(0,y.default)((function*(){return a.client.kill(e,t)}))()}forceDelete(e){var t=this;return(0,y.default)((function*(){var{id:a}=e;return t.client.delete(a,null,{force:!0})}))()}execute(e,t){var a=this;return(0,y.default)((function*(){return a.client.execute(e,t)}))()}attach(e){var t=this;return(0,y.default)((function*(){return t.client.attach(e)}))()}attachNetwork(e,t){var a=this;return(0,y.default)((function*(){return a.client.network_attach(e,null,t)}))()}detachNetwork(e,t){var a=this;return(0,y.default)((function*(){return a.client.network_detach(e,null,t)}))()}listDidFetch(e){var t=this;return(0,y.default)((function*(){if(!e.length)return e;var[{networks:a},{subnets:n}]=yield p.default.all([t.networkClient.list(),t.subnetClient.list()]);return(0,m.default)(e).call(e,(e=>{var t,{addresses:r={}}=e,l=[],i=[],o=[];return(0,h.default)(t=(0,v.default)(r)).call(t,(e=>{var t,[r,u]=e;(0,h.default)(t=u||[]).call(t,(e=>{var t=(0,g.default)(a).call(a,(e=>e.id===r)),u=(0,g.default)(n).call(n,(t=>t.id===e.subnet_id));i.push({network:t,addr:e.addr,port:e.port}),l.push(t),o.push(u)}))})),I(I({},e),{},{addrs:i,networks:l,subnets:o})}))}))()}detailDidFetch(e){var t=this;return(0,y.default)((function*(){var a,{uuid:n,status:r,image_driver:l,image:i,addresses:o={}}=e,u={};if("Running"===r&&(u=(yield t.client.stats.list(n))||{}),"glance"===l)try{var s=yield t.imageClient.show(i);e.imageInfo=s}catch(e){}var[{networks:d},{subnets:c}]=yield p.default.all([t.networkClient.list(),t.subnetClient.list()]),f=[],m=[],b=[];return(0,h.default)(a=(0,v.default)(o)).call(a,(e=>{var t,[a,n]=e;(0,h.default)(t=n||[]).call(t,(e=>{var t=(0,g.default)(d).call(d,(e=>e.id===a)),n=(0,g.default)(c).call(c,(t=>t.id===e.subnet_id));m.push({network:t,addr:e.addr,port:e.port}),f.push(t),b.push(n)}))})),I(I({},e),{},{stats:u,networks:f,addrs:m,subnets:b})}))()}fetchLogs(e){var t=this;return(0,y.default)((function*(){return yield t.client.logs.list(e)}))()}},(0,C.default)(f.prototype,"create",[S.action],(0,b.default)(f.prototype,"create"),f.prototype),(0,C.default)(f.prototype,"delete",[S.action],(0,b.default)(f.prototype,"delete"),f.prototype),(0,C.default)(f.prototype,"start",[S.action],(0,b.default)(f.prototype,"start"),f.prototype),(0,C.default)(f.prototype,"stop",[S.action],(0,b.default)(f.prototype,"stop"),f.prototype),(0,C.default)(f.prototype,"pause",[S.action],(0,b.default)(f.prototype,"pause"),f.prototype),(0,C.default)(f.prototype,"reboot",[S.action],(0,b.default)(f.prototype,"reboot"),f.prototype),(0,C.default)(f.prototype,"unpause",[S.action],(0,b.default)(f.prototype,"unpause"),f.prototype),(0,C.default)(f.prototype,"rebuild",[S.action],(0,b.default)(f.prototype,"rebuild"),f.prototype),(0,C.default)(f.prototype,"kill",[S.action],(0,b.default)(f.prototype,"kill"),f.prototype),(0,C.default)(f.prototype,"forceDelete",[S.action],(0,b.default)(f.prototype,"forceDelete"),f.prototype),(0,C.default)(f.prototype,"execute",[S.action],(0,b.default)(f.prototype,"execute"),f.prototype),(0,C.default)(f.prototype,"attach",[S.action],(0,b.default)(f.prototype,"attach"),f.prototype),(0,C.default)(f.prototype,"attachNetwork",[S.action],(0,b.default)(f.prototype,"attachNetwork"),f.prototype),(0,C.default)(f.prototype,"detachNetwork",[S.action],(0,b.default)(f.prototype,"detachNetwork"),f.prototype),f));t.default=M},64002:(e,a,n)=>{"use strict";var r=n(33950),l=n(48924);r(a,"__esModule",{value:!0}),a.default=void 0;var i=l(n(77879)),o=n(60615),u=l(n(63428)),s=n(43750);class d extends o.ConfirmAction{constructor(){super(...arguments),(0,i.default)(this,"policy","container:delete_force"),(0,i.default)(this,"aliasPolicy","zun:container:delete_force"),(0,i.default)(this,"allowedCheckFunc",(e=>(0,s.checkItemAction)(e,"delete_force"))),(0,i.default)(this,"onSubmit",(e=>u.default.forceDelete({id:e.uuid})))}get id(){return"force-delete"}get title(){return t("Force Delete Container")}get actionName(){return t("Force Delete Container")}get buttonText(){return t("Force Delete")}get isDanger(){return!0}}a.default=d},65229:(e,t,a)=>{"use strict";var n=a(18565),r=a(13696),l=a(3787),i=a(10732),o=a(32462),u=a(10819),s=a(22338),d=a(33950),c=a(48924);d(t,"__esModule",{value:!0}),t.default=t.HostsStore=void 0;var f=c(a(77879)),p=c(a(81891)),m=c(a(92621)),h=a(83575);function v(e,t){var a=n(e);if(r){var o=r(e);t&&(o=l(o).call(o,(function(t){return i(e,t).enumerable}))),a.push.apply(a,o)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a,n,r=null!=arguments[t]?arguments[t]:{};t%2?o(a=v(Object(r),!0)).call(a,(function(t){(0,f.default)(e,t,r[t])})):u?s(e,u(r)):o(n=v(Object(r))).call(n,(function(t){d(e,t,i(r,t))}))}return e}class b extends p.default{get client(){return m.default.zun.hosts}mapper(e){var{mem_total:t,mem_used:a,cpus:n,cpu_used:r,disk_total:l,disk_used:i}=e;return g(g({},e),{},{id:e.uuid,name:e.hostname,cpu_percent:n?(r/n*100).toFixed(2):0,memory_percent:t?(a/t*100).toFixed(2):0,mem_total_gb:(0,h.getGiBValue)(t),mem_used_gb:(0,h.getGiBValue)(a),disk_percent:l?(i/l*100).toFixed(2):0})}}t.HostsStore=b;var y=new b;t.default=y},66224:(e,a,n)=>{"use strict";var r=n(33950),l=n(48924);r(a,"__esModule",{value:!0}),a.default=a.Create=void 0;var i=l(n(24836)),o=l(n(77879)),u=n(87067),s=n(60615),d=n(92666),c=l(n(25756));class f extends s.ModalAction{constructor(){super(...arguments),(0,o.default)(this,"onSubmit",(e=>{var t=(0,d.getYaml)(e.template_file);return this.store.create({template:t})}))}init(){this.store=c.default}static get modalSize(){return"middle"}get name(){return t("Create Capsule")}get formItems(){return[{name:"template_file",label:t("Load Template from a file"),type:"textarea-from-file",rows:6,required:!0,accept:".yaml",validator:(e,a)=>a?i.default.resolve():i.default.reject(t("Please input or load Template from a file"))}]}}a.Create=f,(0,o.default)(f,"id","create-capsules"),(0,o.default)(f,"title",t("Create Capsule")),(0,o.default)(f,"allowed",(()=>i.default.resolve(!0))),(0,o.default)(f,"buttonText",t("Create Capsule")),(0,o.default)(f,"policy","capsule:create");a.default=(0,u.inject)("rootStore")((0,u.observer)(f))},67119:(e,t,a)=>{"use strict";var n=a(33950),r=a(48924);n(t,"__esModule",{value:!0}),t.default=void 0;var l=r(a(21888)),i=r(a(30916)),o=r(a(71258)),u=r(a(49329)),s=r(a(78515)),d=r(a(39086)),c=r(a(55378)),f=r(a(36845)),p=r(a(38775)),m=r(a(8914)),h="/container-service";t.default=[{path:h,component:l.default,routes:[{path:"".concat(h,"/containers"),component:o.default,exact:!0},{path:"".concat(h,"/containers/create"),component:p.default,exact:!0},{path:"".concat(h,"/containers/detail/:id"),component:d.default,exact:!0},{path:"".concat(h,"/containers-admin"),component:o.default,exact:!0},{path:"".concat(h,"/containers-admin/detail/:id"),component:d.default,exact:!0},{path:"".concat(h,"/capsules"),component:u.default,exact:!0},{path:"".concat(h,"/capsules/detail/:id"),component:c.default,exact:!0},{path:"".concat(h,"/hosts-admin"),component:s.default,exact:!0},{path:"".concat(h,"/hosts-admin/detail/:id"),component:f.default,exact:!0},{path:"".concat(h,"/services-admin"),component:m.default,exact:!0},{path:"*",component:i.default}]}]},67688:(e,a,n)=>{"use strict";var r=n(33950),l=n(48924);r(a,"__esModule",{value:!0}),a.default=a.ExecuteCommandContainer=void 0;var i=l(n(19989)),o=l(n(24836));n(88260);var u=l(n(86482)),s=l(n(1839)),d=l(n(77879)),c=l(n(23872)),f=(n(77800),n(87067)),p=n(60615),m=l(n(63428)),h=n(43750),v=l(n(31170));class g extends p.ModalAction{constructor(){var e;super(...arguments),e=this,(0,d.default)(this,"onSubmit",function(){var a=(0,s.default)((function*(a){var{uuid:n,name:r}=e.item,{command:l}=a,{Title:s,Paragraph:d}=u.default;try{var f,p=yield m.default.execute(n,{command:l});return v.default.warn(t("Command was successfully executed at container {name}.",{name:r}),c.default.createElement(c.default.Fragment,null,c.default.createElement(s,{level:5},(0,i.default)(f="".concat(t("Command"),": ")).call(f,l)),c.default.createElement(s,{level:5},"".concat(t("Outputs"),":")),c.default.createElement(d,null,p.output?c.default.createElement("pre",null,p.output):t("No Outputs")))),o.default.resolve()}catch(e){return v.default.errorWithDetail(e),o.default.reject(e)}}));return function(e){return a.apply(this,arguments)}}())}get name(){return t("Execute Command")}get showNotice(){return!1}get defaultValue(){var{name:e}=this.item;return{name:e}}get formItems(){return[{name:"name",label:t("Container Name"),type:"label"},{name:"command",label:t("Command"),type:"input",placeholder:t("The command to execute")}]}}a.ExecuteCommandContainer=g,(0,d.default)(g,"id","execute-command"),(0,d.default)(g,"title",t("Execute Command")),(0,d.default)(g,"buttonText",t("Execute Command")),(0,d.default)(g,"policy","container:execute"),(0,d.default)(g,"aliasPolicy","zun:container:execute"),(0,d.default)(g,"allowed",(e=>(0,h.checkItemAction)(e,"execute")));a.default=(0,f.inject)("rootStore")((0,f.observer)(g))},71258:(e,a,n)=>{"use strict";var r=n(33950),l=n(48924);r(a,"__esModule",{value:!0}),a.default=a.Containers=void 0;var i=l(n(89195)),o=l(n(23872)),u=l(n(54017)),s=n(87067),d=l(n(63428)),c=n(43750),f=n(83575),p=l(n(59842));class m extends u.default{init(){this.store=d.default,this.downloadStore=d.default}get name(){return t("containers")}get policy(){return"container:get_all"}get actionConfigs(){return this.isAdminPage?p.default.actionConfigsAdmin:p.default.actionConfigs}getColumns(){var e=this;return[{title:t("ID/Name"),dataIndex:"name",isLink:!0,routeName:this.getRouteName("zunContainerDetail"),idKey:"uuid"},{title:t("Image Driver"),isHideable:!0,dataIndex:"image_driver",valueMap:c.imageDrivers},{title:t("IP Address"),isHideable:!0,dataIndex:"addrs",render:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return o.default.createElement(o.default.Fragment,null,e.length?(0,i.default)(e).call(e,(e=>o.default.createElement("div",{key:e.addr},e.addr))):"-")},stringify:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,i.default)(e).call(e,(e=>e.addr)).join(",")}},{title:t("Ports"),isHideable:!0,dataIndex:"ports",render:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return o.default.createElement(o.default.Fragment,null,e.length?(0,i.default)(e).call(e,(e=>o.default.createElement("div",{key:e},e))):"-")}},{title:t("Networks"),isHideable:!0,dataIndex:"networks",render:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return o.default.createElement(o.default.Fragment,null,t.length?(0,i.default)(t).call(t,(t=>{var a=e.getLinkRender("networkDetail",t.name,{id:t.id});return o.default.createElement("div",{key:t.id},a)})):"-")}},{title:t("Container Status"),isHideable:!0,dataIndex:"status",valueMap:c.containerStatus},{title:t("Task State"),isHideable:!0,dataIndex:"task_state",valueMap:c.containerTaskStatus}]}get searchFilters(){return[{label:t("Name"),name:"name"},{label:t("Image Driver"),name:"image_driver",options:(0,f.getOptions)(c.imageDrivers)},{label:t("Container Status"),name:"status",options:(0,f.getOptions)(c.containerStatus)},{label:t("Task State"),name:"task_state",options:(0,f.getOptions)(c.containerTaskStatus)}]}}a.Containers=m;a.default=(0,s.inject)("rootStore")((0,s.observer)(m))},74835:(e,a,n)=>{"use strict";var r=n(33950),l=n(48924);r(a,"__esModule",{value:!0}),a.default=a.RebuildContainer=void 0;var i=l(n(24836)),o=l(n(49849)),u=l(n(77879)),s=n(87067),d=n(60615),c=l(n(63428)),f=n(43750),p=n(41832),m=["name"];class h extends d.ModalAction{constructor(){super(...arguments),(0,u.default)(this,"aliasPolicy","zun:container:rebuild"),(0,u.default)(this,"onSubmit",(e=>{var{uuid:t}=this.item,{name:a}=e,n=(0,o.default)(e,m);return c.default.rebuild(t,n)}))}get name(){return t("Rebuild Container")}get isAsyncAction(){return!0}get defaultValue(){var{name:e,image:t,image_driver:a}=this.item;return{name:e,image:t,image_driver:a}}get formItems(){return[{name:"name",label:t("Container Name"),type:"label"},{name:"image",label:t("Image"),type:"input",placeholder:t("Name or ID og the container image"),required:!0,validator:(e,a)=>(new p.ImageStore).fetchDetail({id:a}).then((()=>i.default.resolve(!0))).catch((()=>i.default.reject(new Error(t("The image is not existed")))))},{name:"image_driver",label:t("Image Driver"),placeholder:t("Image Driver"),type:"select",options:[{label:t("Docker"),value:"docker"},{label:t("Glance"),value:"glance"}],allowClear:!0}]}}a.RebuildContainer=h,(0,u.default)(h,"id","rebuild"),(0,u.default)(h,"title",t("Rebuild Container")),(0,u.default)(h,"buttonText",t("Rebuild")),(0,u.default)(h,"policy","container:rebuild"),(0,u.default)(h,"allowed",(e=>(0,f.checkItemAction)(e,"rebuild")));a.default=(0,s.inject)("rootStore")((0,s.observer)(h))},75372:(e,t,a)=>{"use strict";var n=a(18565),r=a(13696),l=a(3787),i=a(10732),o=a(32462),u=a(10819),s=a(22338),d=a(33950),c=a(48924);d(t,"__esModule",{value:!0}),t.default=t.ServicesStore=void 0;var f=c(a(77879)),p=c(a(81891)),m=c(a(92621));function h(e,t){var a=n(e);if(r){var o=r(e);t&&(o=l(o).call(o,(function(t){return i(e,t).enumerable}))),a.push.apply(a,o)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a,n,r=null!=arguments[t]?arguments[t]:{};t%2?o(a=h(Object(r),!0)).call(a,(function(t){(0,f.default)(e,t,r[t])})):u?s(e,u(r)):o(n=h(Object(r))).call(n,(function(t){d(e,t,i(r,t))}))}return e}class g extends p.default{get client(){return m.default.zun.services}get mapper(){return e=>v(v({},e),{},{id:e.uuid})}}t.ServicesStore=g;var b=new g;t.default=b},75642:(e,a,n)=>{"use strict";var r=n(33950),l=n(48924);r(a,"__esModule",{value:!0}),a.default=void 0;var i=l(n(77879)),o=n(60615),u=l(n(63428)),s=n(43750);class d extends o.ConfirmAction{constructor(){super(...arguments),(0,i.default)(this,"policy","container:start"),(0,i.default)(this,"aliasPolicy","zun:container:start"),(0,i.default)(this,"allowedCheckFunc",(e=>(0,s.checkItemAction)(e,"start"))),(0,i.default)(this,"onSubmit",(e=>u.default.start({id:e.uuid})))}get id(){return"start"}get title(){return t("Start Container")}get actionName(){return t("Start Container")}get buttonText(){return t("Start")}get isAsyncAction(){return!0}}a.default=d},75793:(e,a,n)=>{"use strict";var r=n(33950),l=n(48924);r(a,"__esModule",{value:!0}),a.default=a.StepVolumes=void 0;var i=l(n(1839)),o=l(n(89195)),u=l(n(3787)),s=l(n(19989)),d=l(n(75613)),c=l(n(24836)),f=l(n(78711)),p=n(27567),m=n(87067),h=n(42616),v=l(n(57128));class g extends f.default{init(){this.volumeStore=new h.VolumeStore,this.getVolumes()}get volumes(){var e,t;return(0,o.default)(e=(0,u.default)(t=(0,p.toJS)(this.volumeStore.list.data||[])).call(t,(e=>"available"===e.status))).call(e,(e=>{var t;return{value:e.id,label:(0,s.default)(t="".concat(e.name||e.id," (")).call(t,e.id,")")}}))}getVolumes(){var e=this;return(0,i.default)((function*(){yield e.volumeStore.fetchList(),e.updateDefaultValue()}))()}get formItems(){return[{name:"mounts",label:t("Type"),type:"add-select",optionsType:[{label:t("Existing Volume"),value:"bind"},{label:t("New Volume"),value:"volume"}],optionsSource:this.volumes,itemComponent:v.default,validator:(e,a)=>{var n;return(0,d.default)(n=a||[]).call(n,(e=>{var{value:t={}}=e;return!t.type||("volume"===t.type?!t.size||!t.destination:"bind"===t.type&&(!t.source||!t.destination))}))?c.default.reject(new Error(t("Please input complete data"))):c.default.resolve()}}]}}a.StepVolumes=g;a.default=(0,m.inject)("rootStore")((0,m.observer)(g))},78515:(e,a,n)=>{"use strict";var r=n(33950),l=n(48924);r(a,"__esModule",{value:!0}),a.default=a.Hosts=void 0;var i=l(n(19989)),o=l(n(23872)),u=l(n(54017)),s=n(87067),d=l(n(65229)),c=l(n(63936));class f extends u.default{init(){this.store=d.default,this.downloadStore=d.default}get name(){return t("hosts")}get policy(){return"host:get_all"}getColumns(){return[{title:t("ID/Name"),dataIndex:"name",routeName:"zuHostsDetailAdmin"},{title:t("Architecture"),dataIndex:"architecture",isHideable:!0},{title:t("Total Containers"),dataIndex:"total_containers",isHideable:!0},{title:t("CPU (Core)"),dataIndex:"cpu_percent",render:(e,t)=>{var a;return o.default.createElement(c.default,{value:e,label:(0,i.default)(a="".concat(t.cpu_used," / ")).call(a,t.cpus)})},width:180,stringify:(e,a)=>{var n,r,l,o;return(0,i.default)(n=(0,i.default)(r=(0,i.default)(l=(0,i.default)(o="".concat(e,"% (")).call(o,t("Used"),": ")).call(l,a.cpu_used," / ")).call(r,t("Total"),": ")).call(n,a.cpus,")")}},{title:t("Configured Memory (GiB)"),dataIndex:"memory_percent",render:(e,t)=>{var a;return o.default.createElement(c.default,{value:e,label:(0,i.default)(a="".concat(t.mem_used_gb," / ")).call(a,t.mem_total_gb)})},width:180,stringify:(e,a)=>{var n,r,l,o;return(0,i.default)(n=(0,i.default)(r=(0,i.default)(l=(0,i.default)(o="".concat(e,"% (")).call(o,t("Used"),": ")).call(l,a.mem_used_gb," / ")).call(r,t("Total"),": ")).call(n,a.mem_total_gb,")")}},{title:t("Configured Disk (GiB)"),dataIndex:"disk_percent",render:(e,t)=>{var a;return o.default.createElement(c.default,{value:e,label:(0,i.default)(a="".concat(t.disk_used," / ")).call(a,t.disk_total)})},width:180,stringify:(e,a)=>{var n,r,l,o;return(0,i.default)(n=(0,i.default)(r=(0,i.default)(l=(0,i.default)(o="".concat(e,"% (")).call(o,t("Used"),": ")).call(l,a.disk_used," / ")).call(r,t("Total"),": ")).call(n,a.disk_total,")")}}]}get searchFilters(){return[{label:t("Name"),name:"name"}]}}a.Hosts=f;a.default=(0,s.inject)("rootStore")((0,s.observer)(f))},80288:(e,a,n)=>{"use strict";var r=n(33950),l=n(48924);r(a,"__esModule",{value:!0}),a.default=a.BaseDetail=void 0,n(51011);var i=l(n(28153));n(10953);var o=l(n(30519)),u=l(n(89195)),s=l(n(42181)),d=l(n(23872)),c=n(87067),f=(n(77800),n(31446));class p extends s.default{get leftCards(){var{containers:e=[]}=this.detailData,t=[this.baseInfoCard];return e.length&&t.push(this.containersCard),t}get rightCards(){return[this.specCard]}get baseInfoCard(){var e=[{label:t("Status Reason"),dataIndex:"status_reason"},{label:t("Project ID"),dataIndex:"project_id"},{label:t("User ID"),dataIndex:"user_id"}];return{title:t("Capsule Type"),options:e}}get containersCard(){var e=[{label:t("Containers"),dataIndex:"containers",render:e=>(0,u.default)(e).call(e,(e=>d.default.createElement(i.default,{key:e.uuid},d.default.createElement(o.default,{style:{marginRight:8}},t("ID/Name"),":"),d.default.createElement(o.default,null,d.default.createElement("p",null,e.name),d.default.createElement("p",null,e.uuid)))))}];return{title:t("Containers Info"),options:e,labelCol:0,contentCol:24}}get specCard(){var e=[{label:t("CPU"),dataIndex:"cpu"},{label:t("Memory (MiB)"),dataIndex:"memory"},{label:t("Exit Policy"),dataIndex:"restart_policy"},{label:t("Addresses"),dataIndex:"addresses",render:f.stringifyContent}];return{title:t("Spec"),options:e}}}a.BaseDetail=p;a.default=(0,c.inject)("rootStore")((0,c.observer)(p))},82829:(e,a,n)=>{"use strict";var r=n(71742),l=n(33950),i=n(10732),o=n(48924);l(a,"__esModule",{value:!0}),a.default=function(e){var[a,n]=(0,s.useState)(""),[r,l]=(0,s.useState)(!0);return(0,s.useEffect)((()=>{var t=function(){var t=(0,u.default)((function*(){l(!0);var t=yield d.default.fetchLogs(e.detail.uuid);n(t),l(!1)}));return function(){return t.apply(this,arguments)}}();t()}),[]),s.default.createElement("div",{style:{margin:"0 16px 16px",padding:16,backgroundColor:"#90a4ae",borderRadius:4,color:"#fff",fontSize:14}},a||r?s.default.createElement("pre",null,a):t("No Logs..."))};var u=o(n(1839)),s=function(e,t){if("function"==typeof r)var a=new r,n=new r;return function(e,t){if(!t&&e&&e.__esModule)return e;var r,o,u={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return u;if(r=t?n:a){if(r.has(e))return r.get(e);r.set(e,u)}for(var s in e)"default"!==s&&{}.hasOwnProperty.call(e,s)&&((o=(r=l)&&i(e,s))&&(o.get||o.set)?r(u,s,o):u[s]=e[s]);return u}(e,t)}(n(23872)),d=o(n(63428))},85238:(e,t,a)=>{(t=e.exports=a(40049)(!1)).push([e.id,".index__select-input--Oyf81 {\n  display: block;\n  margin-bottom: 8px;\n}\n.index__label--1AGv7 {\n  max-width: 20%;\n  margin-right: 10px;\n}\n.index__select--199s0 {\n  max-width: 80%;\n}\n",""]),t.locals={"select-input":"index__select-input--Oyf81",label:"index__label--1AGv7",select:"index__select--199s0"}},85768:(e,a,n)=>{"use strict";var r=n(33950),l=n(48924);r(a,"__esModule",{value:!0}),a.default=a.StepInfo=void 0;var i=l(n(3787)),o=l(n(29672)),u=l(n(89195)),s=l(n(77481)),d=l(n(24836)),c=l(n(78711)),f=n(87067),p=n(41832),m=n(93651),h=n(43750);class v extends c.default{init(){this.imageStore=new p.ImageStore}get title(){return t("Info")}get name(){return t("Info")}get imageColumns(){var e;return(0,i.default)(e=(0,m.getImageColumns)(this)).call(e,(e=>{var t;return!(0,o.default)(t=["project_name","owner"]).call(t,e.dataIndex)}))}get imageDriverOptions(){var e;return(0,u.default)(e=(0,s.default)(h.imageDrivers)).call(e,(e=>{var[t,a]=e;return{label:a,value:t}}))}get formItems(){var{context:{image_driver:e}={}}=this.props;return[{name:"name",label:t("Container Name"),type:"input",placeholder:t("Please input container name"),required:!0,validator:(e,a)=>/^[a-zA-Z0-9][a-zA-Z0-9_.-]+$/.test(a)?d.default.resolve():d.default.reject(a?t('The name should start with letter or number, and be a string of 2 to 255, characters can only contain "0-9, a-z, A-Z, -, _, ."'):"")},{name:"image_driver",label:t("Image Driver"),placeholder:t("Please select image driver"),type:"select",options:this.imageDriverOptions,onChange:e=>this.updateContext({image_driver:e}),required:!0},{name:"imageDocker",label:t("Image"),type:"input",placeholder:t("Please input image"),required:!0,display:"docker"===e},{name:"imageGlance",label:t("Image"),type:"select-table",required:!0,backendPageStore:this.imageStore,extraParams:{container_format:"docker"},isLoading:this.imageStore.list.isLoading,filterParams:[{label:t("Name"),name:"name"}],columns:this.imageColumns,display:"glance"===e}]}}a.StepInfo=v;a.default=(0,f.inject)("rootStore")((0,f.observer)(v))},86237:(e,t,a)=>{"use strict";var n=a(33950),r=a(48924);n(t,"__esModule",{value:!0}),t.default=void 0;var l=r(a(65512)),i=r(a(67119));t.default=e=>(0,l.default)(i.default,e)},89358:(e,t,a)=>{var n=a(85238);"string"==typeof n&&(n=[[e.id,n,""]]);var r={hmr:!0,transform:undefined,insertInto:void 0};a(53027)(n,r);n.locals&&(e.exports=n.locals)},90503:(e,a,n)=>{"use strict";var r=n(33950),l=n(48924);r(a,"__esModule",{value:!0}),a.default=a.KillContainer=void 0;var i=l(n(77879)),o=n(87067),u=n(60615),s=l(n(63428)),d=n(43750);class c extends u.ModalAction{constructor(){super(...arguments),(0,i.default)(this,"onSubmit",(e=>{var{uuid:t}=this.item,{signal:a}=e;return s.default.kill(t,{signal:a})}))}get name(){return t("Kill Container")}get defaultValue(){var{name:e}=this.item;return{name:e}}get formItems(){return[{name:"name",label:t("Container Name"),type:"label"},{name:"signal",label:t("Kill Signal"),type:"input",placeholder:t("The kill signal to send"),tip:t('Signal to send to the container: integer or string like SIGINT. When not set, SIGKILL is set as default value and the container will exit. The supported signals varies between platform. Besides, you can omit "SIG" prefix.')}]}}a.KillContainer=c,(0,i.default)(c,"id","kill"),(0,i.default)(c,"title",t("Kill Container")),(0,i.default)(c,"buttonText",t("Kill")),(0,i.default)(c,"policy","container:kill"),(0,i.default)(c,"aliasPolicy","zun:container:kill"),(0,i.default)(c,"allowed",(e=>(0,d.checkItemAction)(e,"kill")));a.default=(0,o.inject)("rootStore")((0,o.observer)(c))},96192:(e,a,n)=>{"use strict";var r=n(33950),l=n(48924);r(a,"__esModule",{value:!0}),a.default=a.EditContainer=void 0;var i=l(n(77879)),o=n(87067),u=n(60615),s=l(n(63428)),d=n(43750);class c extends u.ModalAction{constructor(){super(...arguments),(0,i.default)(this,"onSubmit",(e=>{var{uuid:t}=this.item;return s.default.patch({id:t},e)}))}get name(){return t("Edit Container")}get defaultValue(){var{name:e,memory:t,cpu:a}=this.item;return{name:e,cpu:a,memory:t}}get formItems(){return[{name:"name",label:t("Container Name"),type:"input",placeholder:t("Container Name"),required:!0},{name:"cpu",label:t("CPU (Core)"),type:"input-int",tip:t("The number of virtual cpu for this container"),min:1},{name:"memory",label:t("Memory (MiB)"),type:"input-int",tip:t("The container memory size in MiB"),min:4}]}}a.EditContainer=c,(0,i.default)(c,"id","edit"),(0,i.default)(c,"title",t("Edit Container")),(0,i.default)(c,"buttonText",t("Edit")),(0,i.default)(c,"policy","container:update"),(0,i.default)(c,"aliasPolicy","zun:container:update"),(0,i.default)(c,"allowed",(e=>(0,d.checkItemAction)(e,"update")));a.default=(0,o.inject)("rootStore")((0,o.observer)(c))},97137:(e,a,n)=>{"use strict";var r=n(18565),l=n(13696),i=n(3787),o=n(10732),u=n(32462),s=n(10819),d=n(22338),c=n(33950),f=n(48924);c(a,"__esModule",{value:!0}),a.default=void 0,n(56459);var p=f(n(75249));n(51011);var m=f(n(28153));n(10953);var h=f(n(30519));n(23153);var v=f(n(47983)),g=f(n(77879)),b=f(n(23872)),y=(n(77800),f(n(61296))),_=f(n(87546)),C=f(n(89358));function k(e,t){var a=r(e);if(l){var n=l(e);t&&(n=i(n).call(n,(function(t){return o(e,t).enumerable}))),a.push.apply(a,n)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a,n,r=null!=arguments[t]?arguments[t]:{};t%2?u(a=k(Object(r),!0)).call(a,(function(t){(0,g.default)(e,t,r[t])})):s?d(e,s(r)):u(n=k(Object(r))).call(n,(function(t){c(e,t,o(r,t))}))}return e}class S extends b.default.Component{constructor(e){super(e),(0,g.default)(this,"onChange",(e=>{var{onChange:t}=this.props;t&&t(e)})),(0,g.default)(this,"onPortChange",(e=>{this.onChange(x(x({},this.state),{},{port:e}))})),(0,g.default)(this,"onProtocolChange",(e=>{this.onChange(x(x({},this.state),{},{protocol:e}))})),this.state={port:"",protocol:""}}static getDerivedStateFromProps(e,t){var{port:a,protocol:n}=e.value||{};return a!==t.port||n!==t.protocol?{port:a,protocol:n}:null}render(){var{port:e,protocol:a}=this.state,n=b.default.createElement(_.default,{value:e,min:1,onChange:this.onPortChange}),r=b.default.createElement(v.default,{value:a,options:this.props.optionsProtocol,onChange:this.onProtocolChange,className:C.default.select,required:!0});return b.default.createElement(p.default.Item,{className:C.default["select-input"]},b.default.createElement(m.default,{gutter:8},b.default.createElement(h.default,{span:6},b.default.createElement("span",{className:C.default.label},t("Port")),n),b.default.createElement(h.default,{span:8},b.default.createElement("span",{className:C.default.label},t("Protocol")),r)))}}a.default=S,(0,g.default)(S,"propTypes",{onChange:y.default.func,value:y.default.any})}}]);