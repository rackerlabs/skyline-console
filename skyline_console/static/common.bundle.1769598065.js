(self.webpackChunkskyline_console=self.webpackChunkskyline_console||[]).push([[76],{2957:(e,t,a)=>{"use strict";var r=a(471742),n=a(633950),l=a(810732),i=a(548924);n(t,"__esModule",{value:!0}),t.default=void 0;var o=i(a(89195)),s=i(a(43007));a(358350);var u=i(a(377556)),d=i(a(877879)),c=i(a(341204)),f=i(a(684074)),p=i(a(733711)),h=function(e,t){if("function"==typeof r)var a=new r,i=new r;return function(e,t){if(!t&&e&&e.__esModule)return e;var r,o,s={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return s;if(r=t?i:a){if(r.has(e))return r.get(e);r.set(e,s)}for(var u in e)"default"!==u&&{}.hasOwnProperty.call(e,u)&&((o=(r=n)&&l(e,u))&&(o.get||o.set)?r(s,u,o):s[u]=e[u]);return s}(e,t)}(a(823872)),m=i(a(61296)),g=(a(877800),a(384472),i(a(948858)));class v extends h.Component{constructor(){super(...arguments),(0,d.default)(this,"changeVisibleList",(e=>{var t=e.key,{value:a,onChange:r}=this.props,[...n]=a;(0,p.default)(n,t)?(0,f.default)(n,(e=>e===t)):n.push(t),r(n)}))}isVisibleOption(e){var{value:t}=e,{value:a}=this.props;return(0,p.default)(a,t)}renderHeader(){var{title:e}=this.props;return(0,c.default)(e)?null:h.default.createElement("header",null,e)}renderOptions(){var{options:e}=this.props,t=(0,o.default)(e).call(e,(e=>this.renderOption(e)));return h.default.createElement(u.default,{onClick:this.changeVisibleList,theme:"light"},t)}renderOption(e){var t=this.isVisibleOption(e),{value:a,label:r}=e,n=t?h.default.createElement(s.default,null):h.default.createElement("span",{className:g.default.empty});return h.default.createElement(u.default.Item,{key:a},n,r)}render(){var{className:e}=this.props;return h.default.createElement("div",{className:e},this.renderHeader(),this.renderOptions())}}(0,d.default)(v,"propTypes",{value:m.default.array,onChange:m.default.func.isRequired,className:m.default.string,title:m.default.node,options:m.default.array.isRequired}),(0,d.default)(v,"defaultProps",{value:[]});t.default=v},16039:(e,a,r)=>{"use strict";var n=r(633950),l=r(548924);n(a,"__esModule",{value:!0}),a.default=a.ConfirmStep=void 0;var i=l(r(424836)),o=l(r(819989)),s=l(r(89195)),u=l(r(799952)),d=l(r(303787)),c=l(r(29672));r(851011);var f=l(r(328153));r(710953);var p=l(r(430519)),h=l(r(877879)),m=l(r(823872)),g=r(87067),v=l(r(978711)),y=r(492325),b=(r(877800),r(90727));class _ extends v.default{constructor(){super(...arguments),(0,h.default)(this,"allowed",(()=>i.default.resolve()))}init(){}get title(){return"ConfirmStep"}get name(){return"ConfirmStep"}get enableCinder(){return this.props.rootStore.checkEndpoint("cinder")}getDisk(e,t){var a,r;if(!t)return null;var n,{size:l,typeOption:i,deleteTypeLabel:s}=e||{};return i&&i.label?(0,o.default)(a=(0,o.default)(r="".concat(i.label," ")).call(r,l,"GiB ")).call(a,s):l?(0,o.default)(n="".concat(l,"GiB ")).call(n,s||""):""}getBootableVolumeDisk(){var e,{bootableVolume:t}=this.props.context,{size:a,volume_type:r}=t.selectedRows[0];return(0,o.default)(e="".concat(r," ")).call(e,a,"GiB")}getDeleteVolumeInstance(){var e,{deleteVolumeInstance:a}=null===(e=this.props)||void 0===e?void 0:e.context;return a?t("Yes"):t("No")}getSystemDisk(){if(!this.enableCinder)return null;var{context:e}=this.props,{systemDisk:t,source:{value:a}={},instanceSnapshotDisk:r,bootFromVolume:n=!0}=e;return"bootableVolume"===a?this.getBootableVolumeDisk():"instanceSnapshot"===a&&null!==r?this.getDisk(r,n):this.getDisk(t,n)}getDataDisk(){if(!this.enableCinder)return null;var{context:e}=this.props,{dataDisk:t=[],source:{value:a}={},instanceSnapshotDataVolumes:r=[]}=e,n=t;return"instanceSnapshot"===a&&(null==r?void 0:r.length)>0&&(n=(0,b.getAllDataDisks)({dataDisk:t,instanceSnapshotDataVolumes:r})),(0,s.default)(n).call(n,(e=>this.getDisk(e.value,!0)))}getFlavor(){var e,t,a,{context:r}=this.props,{flavor:n}=r,{disk:l,ram:i,vcpus:s}=n.selectedRows[0];return l?(0,o.default)(e=(0,o.default)(t="".concat(s,"VCPU/")).call(t,l,"GiB/")).call(e,(0,u.default)(i/1024,10),"GiB"):(0,o.default)(a="".concat(s,"VCPU/")).call(a,(0,u.default)(i/1024,10),"GiB")}getSourceValue(){var{context:e}=this.props,{source:t}=e,{selectedRows:a=[],selectedRowKeys:r=[]}=e[t.value];return a.length?a[0].name:r[0]}getVirtualLANs(){var{context:e}=this.props,{networks:t=[]}=e,a=(0,s.default)(t).call(t,(e=>{var t,a,r,{networkOption:n,subnetOption:l,ipTypeOption:i,ip:s}=e.value,u=1===i.value?l.name||l.label:"";return(0,o.default)(t=(0,o.default)(a=(0,o.default)(r="".concat(n.name||n.label," ")).call(r,i.label," ")).call(a,u," ")).call(t,1===i.value?s:"")}));return m.default.createElement(f.default,null,(0,s.default)(a).call(a,(e=>m.default.createElement(p.default,{span:24,key:e},e))))}getPorts(){var{context:e}=this.props,{ports:{selectedRows:t=[]}={}}=e,a=(0,s.default)(t).call(t,(e=>e.name||e.id));return m.default.createElement(f.default,null,(0,s.default)(a).call(a,(e=>m.default.createElement(p.default,{span:24,key:e},e))))}getSecurityGroups(){var{context:e}=this.props,{securityGroup:{selectedRows:t=[]}={}}=e,a=(0,s.default)(t).call(t,(e=>e.name));return m.default.createElement(f.default,null,(0,s.default)(a).call(a,(e=>m.default.createElement(p.default,{span:24,key:e},e))))}getLoginType(){var e,{context:t}=this.props,{loginType:a,keypair:r}=t,{value:n,label:l}=a;return(0,o.default)(e="".concat(l," ")).call(e,"keypair"===n?r.selectedRows[0].name:"")}getPhysicalNode(){var{context:e}=this.props,{physicalNodeType:t,physicalNode:a}=e;return t?"smart"===t.value?t.label:a.selectedRows[0].hypervisor_hostname:y.physicalNodeTypes[0].label}getServerGroup(){var{context:e}=this.props,{serverGroup:t}=e;return t&&t.selectedRows.length?t.selectedRows[0].name:"-"}getIso(){var{context:e}=this.props,{iso:t}=e;return t&&0!==t.length?(0,s.default)(t).call(t,(e=>e.value)).join(" "):"-"}goStep(e){var{goStep:t}=this.props;t&&t(e)}get defaultValue(){return{}}get formItems(){var e,a,{context:r}=this.props,n=[{label:t("Start Source"),value:r.source.label},{label:t("System Disk"),value:this.getSystemDisk()},{label:t("Delete Volume on Instance Delete"),value:this.getDeleteVolumeInstance(),key:"deleteVolume"},{label:t("Available Zone"),value:r.availableZone.label},{label:t("Start Source Name"),value:this.getSourceValue()},{label:t("Data Disk"),value:this.getDataDisk(),contentStyle:{display:"inline-block"}},{label:t("Project"),value:r.project},{label:t("Flavor"),value:this.getFlavor()}];return this.enableCinder||(n=(0,d.default)(n).call(n,(e=>{var a;return!(0,c.default)(a=[t("System Disk"),t("Data Disk")]).call(a,e.label)}))),"BOOTABLEVOLUME"!==r.source.value.toUpperCase()&&(n=(0,d.default)(n).call(n,(e=>"deleteVolume"!==(null==e?void 0:e.key)))),[{name:"confirm-count",label:t("Count"),type:"label",content:r.count||1},{name:"confirm-config",label:t("Config Overview"),type:"descriptions",title:t("Base Config"),onClick:()=>{this.goStep(0)},items:n},{type:"short-divider"},{name:"confirm-config-network",label:" ",type:"descriptions",title:t("Network Config"),onClick:()=>{this.goStep(1)},items:[{label:(0,o.default)(e="".concat(t("Virtual LAN"),"(")).call(e,t("New"),")"),value:this.getVirtualLANs(),span:1},{label:(0,o.default)(a="".concat(t("Virtual LAN"),"(")).call(a,t("Created"),")"),value:this.getPorts(),span:1},{label:t("Security Group"),value:this.getSecurityGroups(),span:1}]},{type:"short-divider"},{name:"confirm-config-system",label:" ",type:"descriptions",title:t("System Config"),onClick:()=>{this.goStep(2)},items:[{label:t("Name"),value:r.name},{label:t("Login Type"),value:this.getLoginType()},{label:t("Physical Node"),value:this.getPhysicalNode()},{label:t("Server Group"),value:this.getServerGroup()}]}]}}a.ConfirmStep=_;a.default=(0,g.inject)("rootStore")((0,g.observer)(_))},24665:(e,a,r)=>{"use strict";var n=r(818565),l=r(213696),i=r(303787),o=r(810732),s=r(532462),u=r(110819),d=r(722338),c=r(633950),f=r(548924);c(a,"__esModule",{value:!0}),a.default=a.CreatePortForwarding=void 0;var p=f(r(89195)),h=f(r(424836)),m=f(r(548222)),g=f(r(68982)),v=f(r(819989)),y=f(r(46175)),b=f(r(303787)),_=f(r(29672)),S=f(r(994687)),x=f(r(608093)),w=f(r(601839)),C=f(r(549849)),k=f(r(877879)),I=f(r(835961)),P=f(r(414407)),D=f(r(823872)),T=r(87067),A=r(860615),R=r(449630),F=r(595605),E=r(846964),N=r(522376),M=f(r(101185)),j=r(955924),B=r(646197),L=r(83575),V=["external_port_range","internal_port_range"],O=["floatingIp","virtual_adapter","fixed_ip_address","external_port","internal_port"];function z(e,t){var a=n(e);if(l){var r=l(e);t&&(r=i(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function q(e){for(var t=1;t<arguments.length;t++){var a,r,n=null!=arguments[t]?arguments[t]:{};t%2?s(a=z(Object(n),!0)).call(a,(function(t){(0,k.default)(e,t,n[t])})):u?d(e,u(n)):s(r=z(Object(n))).call(r,(function(t){c(e,t,o(n,t))}))}return e}var{portRangeRegex:K}=B.regex;class G extends A.ModalAction{constructor(){var e;super(...arguments),e=this,(0,k.default)(this,"portsDisableFunc",(e=>0===e.fixed_ips.length)),(0,k.default)(this,"onSubmit",(e=>{var{external_port_range:t,internal_port_range:a}=e,r=(0,C.default)(e,V);if(!t||this.supportRange)return M.default.create({id:this.item.id,data:e});var n=this.getPortsByInput(t),l=this.getPortsByInput(a),i=(0,p.default)(n).call(n,((e,t)=>M.default.create({id:this.item.id,data:q(q({},r),{},{external_port:e,internal_port:l[t]})})));return h.default.all(i)})),(0,k.default)(this,"handlePortSelect",function(){var t=(0,w.default)((function*(t){e.setState({fixedIpLoading:!0});var{canReachSubnetIdsWithRouterId:a}=e.state,r=yield(0,N.getInterfaceWithReason)(t.selectedRows),n=(0,E.getPortsAndReasons)(r,a,!0);e.setState({portFixedIPs:n,fixed_ip_address:void 0,fixedIpLoading:!1}),e.formRef.current&&e.formRef.current.resetFields(["fixed_ip_address","internal_port"])}));return function(e){return t.apply(this,arguments)}}()),(0,k.default)(this,"checkPortUsedBase",((e,t,a,r)=>{var{external_port:n,internal_port:l,external_port_range:i,internal_port_range:o}=e,s="external"===t?i:o;if(s){var[u,d]=this.getRangeFromString(s);return a>=u&&a<=d&&e.protocol===r}return a===("external"===t?n:l)&&e.protocol===r})),(0,k.default)(this,"checkPortUsedInternal",((e,t)=>{if(!e)return!1;var a=this.formRef.current.getFieldsValue(["virtual_adapter","fixed_ip_address"]),r=a.fixed_ip_address.selectedRows[0].fixed_ip_address,n=a.virtual_adapter.selectedRows[0].id;return t.internal_port_id===n&&t.internal_ip_address===r})),(0,k.default)(this,"checkPortUsed",((e,t)=>{var{alreadyUsedPorts:a,protocol:r}=this.state,n=(0,m.default)(e,10);return(0,g.default)(a).call(a,(e=>{var a=this.checkPortUsedBase(e,t,n,r);return"external"===t?a:this.checkPortUsedInternal(a,e)}))})),(0,k.default)(this,"checkExtPortUsed",(e=>this.checkPortUsed(e,"external"))),(0,k.default)(this,"getRangeFromString",(e=>{var t=(e||"").split(":");return!t.length||t.length>2?[]:[(0,m.default)(t[0],10),(0,m.default)(t[1],10)]})),(0,k.default)(this,"getPortForwardingContent",(e=>{var t,a,{external_port:r,external_port_range:n,internal_ip_address:l,internal_port:i,internal_port_range:o}=e;return(0,v.default)(t=(0,v.default)(a="".concat(r||n," => ")).call(a,l,":")).call(t,i||o)})),(0,k.default)(this,"getUsedError",((e,a)=>1===e.length&&(0,I.default)(e[0])?t("The {name} has already been used by other {resource}({content}), please change.",{name:a,resource:this.resource,content:this.getPortForwardingContent(e[0])}):t("The {name} {ports} have already been used, please change.",{name:a,ports:e.join(",")}))),(0,k.default)(this,"checkRangeInput",(e=>{var[a,r]=this.getRangeFromString(e),n=r-a+1;return n<=1?{error:t("The value of the upper limit of the range must be greater than the value of the lower limit of the range.")}:n>this.maxRangeSize?{error:this.maxRangeSizeTip}:{length:n,start:a,end:r}})),(0,k.default)(this,"getPortsByRange",((e,t)=>(0,y.default)({length:t},((t,a)=>e+a)))),(0,k.default)(this,"getPortsByInput",(e=>{var{length:t,start:a}=this.checkRangeInput(e);return this.getPortsByRange(a,t)})),(0,k.default)(this,"checkPortRangeUsed",((e,a,r)=>{var n=this.getPortsByRange(e,a),l=(0,b.default)(n).call(n,(e=>"external"===r?this.checkExtPortUsed(e):this.checkInternalPortUsed(e)));if(l.length){var i="external"===r?t("external ports"):t("internal ports");return{error:this.getUsedError(l,i)}}return{ports:n,length:a}})),(0,k.default)(this,"checkTwoRangeLength",((e,a)=>e!==a?t("The size of the external port range is required to be the same as the size of the internal port range"):"")),(0,k.default)(this,"checkExternalPortInput",((e,a)=>{var r=(0,_.default)(e).call(e,":"),n=(0,_.default)(a).call(a,":");if(a&&r!==n)return t("Ports are either single values or ranges");if(!r){var l=this.checkExtPortUsed(e);return l?this.getUsedError([l],t("external port")):""}var{start:i,length:o,error:s}=this.checkRangeInput(e);if(s)return s;var{error:u}=this.checkPortRangeUsed(i,o,"external");if(u)return u;if(!K.test(a))return"";var{length:d}=this.checkRangeInput(a);return d?this.checkTwoRangeLength(o,d):""})),(0,k.default)(this,"validateExternalPort",((e,t)=>{var a=null==t?"":"".concat(t),{internal_port:r}=this.formRef.current.getFieldsValue(["internal_port"]);if(!K.test(a))return h.default.resolve(!0);var n=this.checkExternalPortInput(a,(r||"").toString()||"");return n?h.default.reject(n):h.default.resolve(!0)})),(0,k.default)(this,"checkInternalPortUsed",(e=>this.checkPortUsed(e,"internal"))),(0,k.default)(this,"checkInternalPortInput",((e,a)=>{var r=(0,_.default)(e).call(e,":"),n=(0,_.default)(a).call(a,":");if(e&&r!==n)return t("Ports are either single values or ranges");if(!n){var l=this.checkInternalPortUsed(a);return l?this.getUsedError([l],t("internal port")):""}var{start:i,length:o,error:s}=this.checkRangeInput(a);if(s)return s;var{error:u}=this.checkPortRangeUsed(i,o,"internal");if(u)return u;if(!K.test(e))return"";var{length:d}=this.checkRangeInput(e);return d?this.checkTwoRangeLength(o,d):""})),(0,k.default)(this,"validateInternalPort",((e,t)=>{var a=null==t?"":"".concat(t);if(!K.test(a))return h.default.resolve(!0);var{external_port:r}=this.formRef.current.getFieldsValue(["external_port"]),n=this.checkInternalPortInput((r||"").toString()||"",a);return n?h.default.reject(n):h.default.resolve()})),(0,k.default)(this,"onFixedIpChange",(e=>{this.setState({fixed_ip_address:e},(()=>{this.formRef.current.resetFields(["internal_port"])}))}))}get name(){return t("Create Port Forwarding")}get resource(){return t("port forwarding")}get resources(){return t("port forwardings")}init(){this.portStore=new F.PortStore,this.state=q(q({},this.state),{},{alreadyUsedPorts:[],portFixedIPs:[],canReachSubnetIdsWithRouterId:[],routerIdWithExternalNetworkInfo:[],supportRange:!0}),this.getPorts(),this.getRangeSupport(),this.getFipAlreadyUsedPorts(),this.getExtraInfo()}getExtraInfo(){R.getCanReachSubnetIdsWithRouterIdInComponent.call(this,(e=>{var{item:t}=this;return e.external_gateway_info&&e.external_gateway_info.network_id===t.floating_network_id}))}get fipId(){return this.item.id}getFipAlreadyUsedPorts(){var e=this;return(0,w.default)((function*(){var t=yield M.default.fetchList({fipId:e.fipId});e.setState({alreadyUsedPorts:t||[]})}))()}get instanceName(){return(0,N.getPortForwardingName)(this.submitData||(0,S.default)(this),this.item.floating_ip_address)}static get modalSize(){return"large"}getModalSize(){return"large"}get defaultValue(){var{floating_ip_address:e}=this.item;return{floatingIp:e}}getSubmitData(e){var{floatingIp:t,virtual_adapter:{selectedRows:a=[]}={},fixed_ip_address:{selectedRows:r=[]}={},external_port:n,internal_port:l}=e,i=q({},(0,C.default)(e,O));return(0,_.default)(n).call(n,":")?i.external_port_range=n:i.external_port=n,(0,_.default)(l).call(l,":")?i.internal_port_range=l:i.internal_port=l,i.internal_ip_address=r[0].fixed_ip_address,i.internal_port_id=a[0].id,this.submitData=i,i}get nameForStateUpdate(){return["protocol"]}get portDeviceOwner(){return["compute:nova",""]}getPorts(){E.getPortsForPortFormItem.call(this,this.portDeviceOwner)}getRangeSupport(){var e=this;return(0,w.default)((function*(){try{yield M.default.fetchListByPage({limit:1,fipId:e.fipId,external_port_range:"80:81"}),e.setState({supportRange:!0})}catch(t){e.setState({supportRange:!1})}}))()}get supportRange(){var{supportRange:e}=this.state;return e}get maxRangeSize(){return this.supportRange?1/0:20}get maxRangeSizeTip(){return t("The maximum batch size is {size}, that is, the size of the port range cannot exceed {size}.",{size:this.maxRangeSize})}get tips(){return D.default.createElement("div",null,D.default.createElement("p",null,t("1. You can create {resources} using ports or port ranges.",{resources:this.resources})),D.default.createElement("p",null,t("2. In the same protocol, you cannot create multiple {resources} for the same source port or source port range.",{resources:this.resources})),D.default.createElement("p",null,t("3. When using a port range to create a port mapping, the size of the external port range is required to be the same as the size of the internal port range. For example, the external port range is 80:90 and the internal port range is 8080:8090.")),!this.supportRange&&D.default.createElement("p",null,t("4. When you use a port range to create {resources}, multiple {resources} will be created in batches. ",{resources:this.resources})+this.maxRangeSizeTip))}get formItems(){var{fixed_ip_address:e={selectedRows:[]}}=this.state,a=t("Input external port or port range (example: 80 or 80:160)"),r=t("Input internal port or port range (example: 80 or 80:160)"),n=[{name:"floatingIp",label:t("Floating Ip"),type:"label",iconType:"floatingIp"},{name:"description",label:t("Description"),type:"textarea"},{name:"protocol",label:t("Protocol"),type:"select",options:(0,L.getOptions)(N.portForwardingProtocols),required:!0},{name:"external_port",label:t("External Port/Port Range"),type:"port-range",required:!0,validator:this.validateExternalPort,dependencies:["protocol","internal_port"],placeholder:a,extra:a,hasRequiredCheck:!1},{name:"internal_port",label:t("Internal Port/Port Range"),type:"port-range",hidden:0===e.selectedRows.length,required:!0,validator:this.validateInternalPort,dependencies:["protocol","external_port"],placeholder:r,extra:r,hasRequiredCheck:!1}],[l,i]=E.getPortFormItem.call(this);return l.label=t("Target Port"),i.label=t("Target IP Address"),i.onChange=this.onFixedIpChange,(0,x.default)(n).call(n,4,0,l,i),n}}a.CreatePortForwarding=G,(0,k.default)(G,"id","create-port-forwarding"),(0,k.default)(G,"title",t("Create Port Forwarding")),(0,k.default)(G,"policy","create_floatingip_port_forwarding"),(0,k.default)(G,"allowed",(e=>h.default.resolve((0,P.default)(e.fixed_ip_address)&&(0,j.enablePFW)())));a.default=(0,T.inject)("rootStore")((0,T.observer)(G))},28916:(e,a,r)=>{"use strict";var n=r(818565),l=r(213696),i=r(303787),o=r(810732),s=r(532462),u=r(110819),d=r(722338),c=r(633950),f=r(548924);c(a,"__esModule",{value:!0}),a.default=a.CreateAction=void 0;var p=f(r(89195)),h=f(r(424836));r(573969);var m=f(r(38959)),g=f(r(953173)),v=f(r(549849)),y=f(r(601839)),b=f(r(877879)),_=f(r(823872)),S=r(87067),x=r(860615),w=(r(384472),r(877800),r(288274)),C=r(591106),k=r(583156),I=f(r(595605)),P=f(r(452740)),D=r(915363),T=r(799571),A=r(365468),R=["mac_address","security_groups","enableQosPolicy","qos_policy_id","more","network_id","fixed_ips","bindingProfile"];function F(e,t){var a=n(e);if(l){var r=l(e);t&&(r=i(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a,r,n=null!=arguments[t]?arguments[t]:{};t%2?s(a=F(Object(n),!0)).call(a,(function(t){(0,b.default)(e,t,n[t])})):u?d(e,u(n)):s(r=F(Object(n))).call(r,(function(t){c(e,t,o(n,t))}))}return e}class N extends x.ModalAction{constructor(){var e;super(...arguments),e=this,(0,b.default)(this,"fetchSubnetDetails",function(){var t=(0,y.default)((function*(t){var a=yield e.subnetStore.fetchList({network_id:t});e.setState({subnetDetails:a||[]})}));return function(e){return t.apply(this,arguments)}}()),(0,b.default)(this,"handleOwnedNetworkChange",(e=>{var t=e.selectedRowKeys[0];this.setState({network_id:t}),this.formRef.current.setFieldsValue({fixed_ips:void 0}),this.getSubnets(t)})),(0,b.default)(this,"onSubmit",(e=>{var{mac_address:{type:t,mac:a},security_groups:r,enableQosPolicy:n,qos_policy_id:l,more:i,network_id:o,fixed_ips:s,bindingProfile:u}=e,d=(0,v.default)(e,R),c=E(E({},s&&s.length>0?{fixed_ips:(0,p.default)(s).call(s,(e=>{var t={subnet_id:e.subnet};return e.ip_address&&"manual"===e.ip_address.type&&(t.ip_address=e.ip_address.ip),t}))}:{}),{},{network_id:o.selectedRowKeys[0]},d);return t&&"auto"!==t&&(c.mac_address=a),n&&l&&(c.qos_policy_id=0===l.selectedRowKeys.length?null:l.selectedRowKeys[0]),r&&(c.security_groups=r.selectedRowKeys||void 0),c.project_id=this.currentProjectId,u&&(c["binding:profile"]=JSON.parse(u)),I.default.create(c)}))}get qosEndpoint(){return(0,A.qosEndpoint)()}init(){this.state.quota={},this.state.quotaLoading=!0,this.projectStore=P.default,this.networkStore=new w.NetworkStore,this.securityGroupStore=new C.SecurityGroupStore,this.qosPolicyStore=new k.QoSPolicyStore,this.subnetStore=new D.SubnetStore,this.getQuota()}getSubnets(e){var t=this;return(0,y.default)((function*(){yield t.networkStore.fetchDetail({id:e}),yield t.fetchSubnetDetails(e)}))()}get name(){return t("Create Virtual Adapter")}static get modalSize(){return"large"}getModalSize(){return"large"}get tips(){return t("Virtual adapter mainly used for binding instance and other operations, occupying the quota of the port.")}static get disableSubmit(){var{neutronQuota:{port:{used:e=0,limit:t=0}={}}}=P.default;return-1!==t&&e>=t}static get showQuota(){return!0}get showQuota(){return!0}getQuota(){var e=this;return(0,y.default)((function*(){e.setState({quotaLoading:!0});var t=yield e.projectStore.fetchProjectNeutronQuota(),{port:a={}}=t||{};e.setState({quota:a,quotaLoading:!1})}))()}get quotaInfo(){var{quota:e={},quotaLoading:a}=this.state;if(a)return[];var{used:r=0,limit:n=0}=e,l=-1!==n&&r>=n?0:1;return[E(E({},e),{},{add:l,name:"port",title:t("Ports")})]}get defaultValue(){return{more:!1,mac_address:{type:"auto"},qos_policy:"disable",port_security_enabled:!0,enableQosPolicy:!1}}get securityGroups(){var e;return(0,p.default)(e=this.securityGroupStore.list.data||[]).call(e,(e=>E(E({},e),{},{key:e.id})))}get formItems(){var e,{more:a,network_id:r,subnetDetails:n=[],port_security_enabled:l=!0,enableQosPolicy:i=!1}=this.state,o=(0,p.default)(e="normal,macvtap,direct,baremetal,direct-physical,virtio-forwarder,smart-nic".split(",")).call(e,(e=>({label:e,value:e})));return[{name:"name",label:t("Name"),type:"input-name",required:!0,withoutChinese:!0},{name:"description",label:t("Description"),type:"textarea",required:!1},{name:"network_id",label:t("Owned Network"),type:"network-select-table",onChange:this.handleOwnedNetworkChange,required:!0},{name:"fixed_ips",label:t("Owned Subnet"),type:"ip-distributor",subnets:n,hidden:!r},{name:"ipv6",label:"IPv6",type:"label",style:{marginBottom:24},content:_.default.createElement("span",null,t("The selected VPC/subnet does not have IPv6 enabled.")," ",_.default.createElement(m.default,{type:"link"},t("To open")," ",_.default.createElement(g.default,null))," "),hidden:!0},{name:"mac_address",label:t("Mac Address"),wrapperCol:{span:16},required:!0,type:"mac-address"},{name:"port_security_enabled",label:t("Port Security"),type:"switch",tip:t("Disabling port security will turn off the security group policy protection and anti-spoofing protection on the port. General applicable scenarios: NFV or operation and maintenance Debug."),onChange:e=>{this.setState({port_security_enabled:e})}},{name:"security_groups",label:t("Security Group"),type:"select-table",tips:t("The security group is similar to the firewall function for setting up network access control, or you can go to the console and create a new security group. (Note: The security group you selected will work on all virtual LANs on the instances.)"),data:this.securityGroups,isLoading:this.securityGroupStore.list.isLoading,extraParams:{project_id:this.currentProjectId},backendPageStore:this.securityGroupStore,isMulti:!0,hidden:!l,required:l,filterParams:[{label:t("Name"),name:"name"}],columns:[{title:t("Name"),dataIndex:"name"},{title:t("Description"),dataIndex:"description"},{title:t("Created At"),dataIndex:"created_at",valueRender:"toLocalTime"}]},{name:"binding:vnic_type",label:t("Port Type"),type:"select",options:o,hidden:!a},{name:"enableQosPolicy",label:t("Enable QoS Policy"),type:"switch",onChange:e=>{this.setState({enableQosPolicy:e})},hidden:!a,display:!!this.qosEndpoint},{name:"qos_policy_id",label:t("QoS Policy"),type:"tab-select-table",tabs:T.getQoSPolicyTabs.call(this),isMulti:!1,required:i,tip:t("Choosing a QoS policy can limit bandwidth and DSCP"),hidden:!(a&&i),display:!!this.qosEndpoint},{name:"bindingProfile",label:t("Binding Profile"),type:"aceEditor",hidden:!a,mode:"json",wrapEnabled:!0,tabSize:2,width:"100%",height:"200px",setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0},validator:(e,a)=>{if(void 0!==a&&""!==a)try{return JSON.parse(a),h.default.resolve(!0)}catch(e){return h.default.reject(new Error(t("Illegal JSON scheme")))}return h.default.resolve(!0)}},{name:"more",label:t("Advanced Options"),type:"more"}]}}a.CreateAction=N,(0,b.default)(N,"id","create-virtual-adapter"),(0,b.default)(N,"title",t("Create Virtual Adapter")),(0,b.default)(N,"policy","create_port"),(0,b.default)(N,"allowed",(()=>h.default.resolve(!0)));a.default=(0,S.inject)("rootStore")((0,S.observer)(N))},31170:(e,a,r)=>{"use strict";var n=r(633950),l=r(548924);n(a,"__esModule",{value:!0}),a.default=void 0;var i=l(r(548222)),o=l(r(819989));r(584574);var s=l(r(203748)),u=l(r(480755)),d=l(r(110307)),c=l(r(851975)),f=l(r(542487)),p=l(r(785219)),h=l(r(371573)),m=l(r(823872)),g=(r(877800),l(r(61296))),v=(r(384472),l(r(300657))),y=l(r(690132)),b=l(r(577186)),_=r(83575),S=r(351898),x=r(655739),w=l(r(493717)),C=e=>{var{title:a=t("Error"),type:r="error",description:n="",onClose:l,top:i=48}=e,o="#F5222D",p=null;"info"===r?(o=globalCSS.primaryColor,p=m.default.createElement(f.default,{theme:"filled",style:{color:o}})):"success"===r?(o=globalCSS.normalColor,p=m.default.createElement(c.default,{theme:"filled",style:{color:o}})):"error"===r?(o=globalCSS.errorColor,p=m.default.createElement(d.default,{theme:"filled",style:{color:o}})):"process"===r?(o=globalCSS.primaryColor,p=m.default.createElement(u.default,{style:{color:o}})):"warn"===r&&(o=globalCSS.warnColor,p=m.default.createElement(f.default,{theme:"filled",style:{color:o}}));var h="error"===r||"warn"===r?0:4.5;s.default.open({message:(0,_.unescapeHtml)(a),duration:h,icon:p,description:(0,_.unescapeHtml)(n),className:w.default.notify,onClose:l,top:i,style:{whiteSpace:"pre-line"}})};C.propTypes={title:g.default.string,type:g.default.string,description:g.default.string};var k=(e,t)=>{b.default.addNoticeCount(),C({title:e,description:t,type:"error",onClose:()=>{b.default.removeNoticeCount()}})},I={open:C,success:(e,t)=>{C({title:e,description:t,type:"success"})},error:k,warn:(e,t)=>{C({title:e,description:t,type:"warn"})},info:(e,t)=>{C({title:e,description:t,type:"info"})},process:(e,t)=>{C({title:e,description:t,type:"process"})},errorWithDetail:(e,a)=>{var r,{status:n,message:l}=e||{},s=a;if(n&&(0,i.default)(n,10)>=500)if((0,h.default)(l)||S.statusMap[n])s+=S.statusMap[n];else{var u,d;if((0,p.default)(l))s+=(0,o.default)(d="".concat(t("message"))).call(d,t("."));else if(l.reason){var c;s+=(0,o.default)(c="".concat(t("message.reason"))).call(c,t("."))}s+=(0,o.default)(u="".concat(t("Status Code"),": ")).call(u,n)}else{var f=e&&(0,p.default)(e)?(0,x.decode)(e,{level:"html5"}):e;r=e?m.default.createElement(y.default,{style:{float:"right"},buttonType:"link",buttonText:t("Click to show detail"),component:m.default.createElement(v.default,{className:w.default["code-editor"],value:f,mode:"json",options:{readOnly:!0}})}):""}k(s,r)}};a.default=I},38122:(e,a,r)=>{"use strict";var n=r(633950),l=r(548924);n(a,"__esModule",{value:!0}),a.default=a.RestoreAction=void 0;var i=l(r(819989)),o=l(r(424836)),s=l(r(877879)),u=r(87067),d=r(860615),c=r(342616),f=l(r(48474)),p=r(505997),h=r(211110);class m extends d.ModalAction{constructor(){super(...arguments),(0,s.default)(this,"onSubmit",(e=>{var{snapshot:{selectedRowKeys:t=[]}={}}=e,{id:a}=this.item;return this.store.revert(a,{snapshot_id:t[0]})}))}init(){this.store=new c.VolumeStore,this.snapshotStore=f.default}static get modalSize(){return"large"}getModalSize(){return"large"}get defaultValue(){var e,t,{name:a,id:r="-",volume_type:n="-",size:l}=this.item;return{volume:(0,i.default)(e=(0,i.default)(t="".concat(a||r,"(")).call(t,n," | ")).call(e,l,"GiB)")}}get formItems(){var{id:e}=this.item;return[{name:"volume",label:t("Volume"),type:"label",iconType:"volume"},{name:"snapshot",label:t("Select Volume Snapshot"),type:"select-table",backendPageStore:this.snapshotStore,extraParams:{volume_id:e},required:!0,isMulti:!1,isSortByBack:!0,defaultSortKey:"created_at",defaultSortOrder:"descend",filterParams:[{label:t("Name"),name:"name"}],columns:[{title:t("Name"),dataIndex:"name"},{title:t("Size"),dataIndex:"size",unit:"GiB",sorter:!1},{title:t("Status"),dataIndex:"status",valueMap:p.volumeStatus},{title:t("Created At"),dataIndex:"created_at",render:e=>(0,h.getSinceTime)(e)}]}]}get name(){return t("Restore from snapshot")}}a.RestoreAction=m,(0,s.default)(m,"id","Restore from snapshot"),(0,s.default)(m,"title",t("Restore From Snapshot")),(0,s.default)(m,"policy","volume:create"),(0,s.default)(m,"allowed",(e=>o.default.resolve("available"===e.status)));a.default=(0,u.inject)("rootStore")((0,u.observer)(m))},39513:(e,t,a)=>{var r=a(328001);"string"==typeof r&&(r=[[e.id,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(453027)(r,n);r.locals&&(e.exports=r.locals)},40503:(e,a,r)=>{"use strict";var n=r(633950),l=r(548924);n(a,"__esModule",{value:!0}),a.sslParseMethod=a.provisioningStatusCodes=a.poolProtocols=a.operatingStatusCodes=a.listenerProtocols=a.insertHeaderTips=a.insertHeaderOptions=a.insertHeaderDesc=a.healthProtocols=a.getListenerInsertHeadersFormItem=a.getInsertHeadersValueFromForm=a.getInsertHeadersFormValueFromListener=a.getInsertHeaderCard=a.getCertificateColumns=a.certificateStatus=a.certificateMode=a.INSERT_HEADERS=void 0;var i,o,s=l(r(89195)),u=l(r(818565)),d=l(r(532462)),c=l(r(371573)),f=l(r(823872)),p=(a.operatingStatusCodes={ONLINE:t("Online"),DRAINING:t("Draining"),OFFLINE:t("Offline"),DEGRADED:t("Degraded"),ERROR:t("Error"),NO_MONITOR:t("No Monitor")},a.provisioningStatusCodes={ACTIVE:t("Active"),DELETED:t("Deleted"),ERROR:t("Error"),PENDING_CREATE:t("Pending Create"),PENDING_UPDATE:t("Pending Update"),PENDING_DELETE:t("Pending Delete")},a.certificateMode={SERVER:t("Server Certificate"),CA:t("CA Certificate")});a.certificateStatus={ACTIVE:t("Active"),ERROR:t("Error")};a.getCertificateColumns=e=>[{title:t("Name"),dataIndex:"name"},{title:t("Certificate Type"),dataIndex:"mode",valueMap:p},{title:t("Expires At"),dataIndex:"expiration",valueRender:"toLocalTime"},{title:t("Domain Name"),dataIndex:"domain",render:e=>e||"-"},{title:t("Listener"),dataIndex:"listener",render:t=>t?(0,s.default)(t).call(t,(t=>f.default.createElement("div",{key:t.id},e.getLinkRender("lbListenerDetail",t.name,{loadBalancerId:t.lb,id:t.id},null)))):"-"},{title:t("Status"),dataIndex:"expiration",valueRender:"toLocalTime",render:e=>{if(e){var a=new Date(e)<new Date;return t(a?"Expired":"Active")}return t("Active")}},{title:t("Created At"),dataIndex:"created",valueRender:"toLocalTime"}];a.sslParseMethod=[{label:t("One-way authentication"),value:"one-way"},{label:t("Two-way authentication"),value:"two-way"}],a.listenerProtocols=[{label:"HTTP",value:"HTTP"},{label:"TCP",value:"TCP"},{label:"HTTPS",value:"TERMINATED_HTTPS"},{label:"UDP",value:"UDP"}],a.poolProtocols=[{label:"HTTP",value:"HTTP"},{label:"TCP",value:"TCP"},{label:"UDP",value:"UDP"}],a.healthProtocols=[{label:"HTTP",value:"HTTP"},{label:"TCP",value:"TCP"},{label:"UDP",value:"UDP-CONNECT"}];var h=a.INSERT_HEADERS={"X-Forwarded-For":t("Specify the client IP address"),"X-Forwarded-Port":t("Specify the listener port"),"X-Forwarded-Proto":t("When checked this header is inserted")},m=a.insertHeaderOptions=(0,s.default)(i=(0,u.default)(h)).call(i,(e=>({label:e,value:e}))),g=a.insertHeaderTips=f.default.createElement(f.default.Fragment,null,(0,s.default)(o=(0,u.default)(h)).call(o,(e=>f.default.createElement("p",{key:e},e,": ",h[e])))),v=a.insertHeaderDesc=t("The optional headers to insert into the request before it is sent to the backend member.");a.getListenerInsertHeadersFormItem=()=>({name:"insert_headers",label:t("Custom Headers"),type:"check-group",extra:v,tip:g,options:m});a.getInsertHeadersValueFromForm=e=>{var t;if(!e)return null;var a={};return(0,d.default)(t=(0,u.default)(h)).call(t,(t=>{e[t]&&(a[t]="true")})),(0,c.default)(a)?null:a};a.getInsertHeadersFormValueFromListener=e=>{var t,{insert_headers:a}=e||{},r={};return(0,d.default)(t=(0,u.default)(h)).call(t,(e=>{a[e]&&(r[e]="true"===a[e])})),r};a.getInsertHeaderCard=e=>{var a,r=[];return(0,d.default)(a=(0,u.default)(h)).call(a,(t=>{e[t]&&r.push({label:t,content:e[t],tooltip:h[t]})})),{title:t("Custom Headers"),titleHelp:v,options:r}}},47945:(e,a,r)=>{"use strict";var n=r(633950),l=r(548924);n(a,"__esModule",{value:!0}),a.poolColumns=a.default=void 0;var i=l(r(819989)),o=l(r(896363)),s=l(r(823872)),u=l(r(363936)),d=a.poolColumns=[{title:t("Name"),dataIndex:"name"},{title:t("Protocol"),dataIndex:"storage_protocol"},{title:t("Backend Name"),dataIndex:"volume_backend_name",isHideable:!0},{title:t("Storage Capacity(GiB)"),dataIndex:"usedGBPercent",isHideable:!0,render:(e,t)=>{var a;return(0,o.default)(e)?s.default.createElement(u.default,{value:e,label:(0,i.default)(a="".concat(t.usedGB," / ")).call(a,t.total_capacity_gb)}):"-"},stringify:(e,a)=>{var r,n,l,s;return(0,o.default)(e)?(0,i.default)(r=(0,i.default)(n=(0,i.default)(l=(0,i.default)(s="".concat(e,"% (")).call(s,t("Used"),": ")).call(l,a.usedGB," / ")).call(n,t("Total"),": ")).call(r,a.total_capacity_gb,")"):"-"}}];a.default=d},49929:(e,a,r)=>{"use strict";var n=r(633950),l=r(548924);n(a,"__esModule",{value:!0}),a.default=a.DisAssociateFip=void 0;var i=l(r(424836)),o=l(r(877879)),s=r(87067),u=l(r(722625)),d=r(860615),c=r(492325);class f extends d.ModalAction{constructor(){super(...arguments),(0,o.default)(this,"onSubmit",(e=>{var{floating_ip:t}=e,{id:a}=t.selectedRows[0];return u.default.disassociateFip({id:a})}))}static get modalSize(){return"large"}getModalSize(){return"large"}get name(){return t("Disassociate Floating IP")}get defaultValue(){var{name:e}=this.item;return{virtualAdapter:e}}get formItems(){var{associatedDetail:e}=this.item;return[{name:"virtualAdapter",label:t("Virtual Adapter"),type:"label",iconType:"instance"},{name:"floating_ip",label:t("Floating IP"),type:"select-table",required:!0,data:e,isMulti:!1,tagKey:"floating_ip_address",filterParams:[{label:t("Fixed IP Address"),name:"fixed_ip_address"}],columns:[{title:t("Fixed IP Address"),dataIndex:"fixed_ip_address"},{title:t("Floating IP Address"),dataIndex:"floating_ip_address"}]}]}}a.DisAssociateFip=f,(0,o.default)(f,"id","DisAssociateFip"),(0,o.default)(f,"title",t("Disassociate Floating IP")),(0,o.default)(f,"policy","update_floatingip"),(0,o.default)(f,"allowed",((e,t)=>{var{isAdminPage:a=!1}=t;return i.default.resolve(!a&&(0,c.isNotError)(e)&&e.associatedDetail&&e.associatedDetail.length)}));a.default=(0,s.inject)("rootStore")((0,s.observer)(f))},50750:(e,a,r)=>{"use strict";var n=r(633950),l=r(548924);n(a,"__esModule",{value:!0}),a.default=a.Bootable=void 0;var i=l(r(424836)),o=l(r(994687)),s=l(r(877879)),u=r(87067),d=r(860615),c=l(r(342616));class f extends d.ModalAction{constructor(){super(...arguments),(0,s.default)(this,"onSubmit",(e=>{var{bootable:t}=e,{id:a}=this.item;return c.default.changeBootable(a,{bootable:t})}))}static allowed(){return i.default.resolve(!0)}get name(){var{bootable:e}=(0,o.default)(this);return e?t("Bootable"):t("Unbootable")}get defaultValue(){var{item:e}=this.props;return{bootable:"true"===e.bootable}}get formItems(){return[{name:"bootable",label:t("Bootable"),checkedText:t("Bootable"),uncheckedText:t("Unbootable"),type:"switch",required:!0}]}}a.Bootable=f,(0,s.default)(f,"id","volume-bootable"),(0,s.default)(f,"title",t("Bootable")),(0,s.default)(f,"buttonText",t("Bootable")),(0,s.default)(f,"policy","volume:update");a.default=(0,u.inject)("rootStore")((0,u.observer)(f))},58992:(e,a,r)=>{"use strict";var n=r(818565),l=r(213696),i=r(303787),o=r(810732),s=r(532462),u=r(110819),d=r(722338),c=r(633950),f=r(471742),p=r(548924);c(a,"__esModule",{value:!0}),a.default=a.Volume=void 0;var h=p(r(549849)),m=p(r(89195)),g=p(r(29672)),v=p(r(877879)),y=r(87067),b=p(r(654017)),_=r(505997),S=function(e,t){if("function"==typeof f)var a=new f,r=new f;return function(e,t){if(!t&&e&&e.__esModule)return e;var n,l,i={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return i;if(n=t?r:a){if(n.has(e))return n.get(e);n.set(e,i)}for(var s in e)"default"!==s&&{}.hasOwnProperty.call(e,s)&&((l=(n=c)&&o(e,s))&&(l.get||l.set)?n(i,s,l):i[s]=e[s]);return i}(e,t)}(r(342616)),x=r(425505),w=r(731447),C=r(153434),k=p(r(227180)),I=["id"],P=["id"];function D(e,t){var a=n(e);if(l){var r=l(e);t&&(r=i(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a,r,n=null!=arguments[t]?arguments[t]:{};t%2?s(a=D(Object(n),!0)).call(a,(function(t){(0,v.default)(e,t,n[t])})):u?d(e,u(n)):s(r=D(Object(n))).call(r,(function(t){c(e,t,o(n,t))}))}return e}class A extends b.default{constructor(){super(...arguments),(0,v.default)(this,"getColumns",(()=>(0,_.getVolumeColumnsList)(this))),(0,v.default)(this,"updateFetchParams",(e=>{if(this.isVolumeSnapshotDetail){var{child_volumes:t=[]}=this.props.detail||{},a=(0,m.default)(t).call(t,(e=>e.volume_id)),{id:r}=e;return T(T({},(0,h.default)(e,I)),{},{volumeIds:a})}if(this.inDetailPage){var{id:n}=e;return T(T({},(0,h.default)(e,P)),{},{serverId:n})}return e}))}init(){this.isVolumeSnapshotDetail?this.store=new x.SnapshotVolumeStore:this.inDetailPage?(this.store=new w.InstanceVolumeStore,this.downloadStore=this.store):(this.store=S.default,this.downloadStore=new S.VolumeStore)}get policy(){return"volume:get_all"}get name(){return t("volumes")}get isRecycleBinDetail(){var e;return this.inDetailPage&&(0,g.default)(e=this.path).call(e,"recycle-bin")}get isVolumeSnapshotDetail(){var e;return this.inDetailPage&&(0,g.default)(e=this.path).call(e,"storage/snapshot")}get isInstanceDetail(){var e;return this.inDetailPage&&(0,g.default)(e=this.path).call(e,"compute/instance")}get actionConfigs(){return this.isRecycleBinDetail?C.emptyActionConfig:this.isAdminPage?this.inDetailPage&&!this.isVolumeSnapshotDetail?k.default.instanceDetailAdminConfig:k.default.adminConfig:this.inDetailPage?k.default.instanceDetailConfig:k.default.actionConfigs}get transitionStatusList(){return _.volumeTransitionStatuses}get isFilterByBackend(){return!this.inDetailPage}get isSortByBackend(){return this.isFilterByBackend}get adminPageHasProjectFilter(){return!0}get defaultSortKey(){return"created_at"}get searchFilters(){return _.volumeFilters}}a.Volume=A;a.default=(0,y.inject)("rootStore")((0,y.observer)(A))},64391:(e,t,a)=>{"use strict";var r=a(818565),n=a(213696),l=a(303787),i=a(810732),o=a(532462),s=a(110819),u=a(722338),d=a(633950),c=a(548924);d(t,"__esModule",{value:!0}),t.default=t.FlavorStore=void 0;var f,p,h=c(a(601839)),m=c(a(549849)),g=c(a(29672)),v=c(a(303787)),y=c(a(424836)),b=c(a(89195)),_=c(a(532462)),S=c(a(810732)),x=c(a(337187)),w=c(a(877879)),C=c(a(533301)),k=(c(a(155041)),a(127567)),I=c(a(892621)),P=c(a(381891)),D=["key"],T=["extra_specs"],A=["all_projects","name"];function R(e,t){var a=r(e);if(n){var o=n(e);t&&(o=l(o).call(o,(function(t){return i(e,t).enumerable}))),a.push.apply(a,o)}return a}function F(e){for(var t=1;t<arguments.length;t++){var a,r,n=null!=arguments[t]?arguments[t]:{};t%2?o(a=R(Object(n),!0)).call(a,(function(t){(0,w.default)(e,t,n[t])})):s?u(e,s(n)):o(r=R(Object(n))).call(r,(function(t){d(e,t,i(n,t))}))}return e}var E=new(t.FlavorStore=(f=class extends P.default{constructor(){super(...arguments),(0,x.default)(this,"access",p,this),(0,w.default)(this,"getGpuInfo",(e=>{var{extra_specs:t={}}=e||{},a=t["pci_passthrough:alias"],r=t["resources:VGPU"],n=t[":category"],l="-",i="-",o="-",s="-";if(r&&(l=(r||"").split(":")[0],i=(r||"").split(":")[1]),a)if(n&&!(0,g.default)(n).call(n,"visualization_")){var u=a.split(",")[0],d=a.split(",")[1];l=u.split(":")[0],i=u.split(":")[1],d&&(o=d.split(":")[0],s=d.split(":")[1])}else{var c=a.split(",")[0];o=c.split(":")[0],s=c.split(":")[1]}return{gpuType:l,gpuCount:i,usbType:o,usbCount:s}}))}get listWithDetail(){return!0}get client(){return I.default.nova.flavors}get mapperBeforeFetchProject(){return e=>{var{extra_specs:{key:t}={}}=e,a=(0,m.default)(e.extra_specs,D),r=(0,m.default)(e,T),n=this.getGpuInfo(e);return F(F(F(F({},r),a),{},{architecture:a[":architecture"]||"custom",category:a[":category"]},n),{},{is_public:r["os-flavor-access:is_public"],originData:e})}}get paramsFunc(){return e=>{var{all_projects:t,name:a}=e,r=(0,m.default)(e,A);return t?F(F({},r),{},{is_public:"None"}):F({name:a},r)}}listDidFetch(e,t,a){return(0,h.default)((function*(){var{tab:t}=a;return t?(0,v.default)(e).call(e,(e=>e.architecture===t)):e}))()}fetchAccess(e){var t=this;return(0,h.default)((function*(){var a=yield t.client.access.list(e);t.access=a.flavor_access}))()}create(e,t,a){var r=this;return(0,h.default)((function*(){var n={};n[r.responseKey]=e;try{r.isSubmitting=!0;var l=yield r.client.create(n),{id:i}=l.flavor,o={extra_specs:t};return a&&a.length>0&&(yield y.default.all((0,b.default)(a).call(a,(e=>{var t={addTenantAccess:{tenant:e}};return r.client.action(i,t)})))),r.submitting(r.client.extraSpecs.create(i,o))}catch(e){return r.isSubmitting=!1,y.default.reject(e)}}))()}updateAccess(e,t,a){var r=this;return(0,h.default)((function*(){return r.isSubmitting=!0,yield y.default.all((0,b.default)(t).call(t,(t=>{var a={addTenantAccess:{tenant:t}};return r.client.action(e,a)}))),r.submitting(y.default.all((0,b.default)(a).call(a,(t=>{var a={removeTenantAccess:{tenant:t}};return r.client.action(e,a)}))))}))()}createExtraSpecs(e,t){var a=this;return(0,h.default)((function*(){var r={extra_specs:t};return a.submitting(a.client.extraSpecs.create(e,r))}))()}deleteExtraSpecs(e,t){var a=this;return(0,h.default)((function*(){return a.submitting(a.client.extraSpecs.delete(e,t))}))()}putExtraSpecs(e,t,a){var r=this;return(0,h.default)((function*(){return r.submitting(r.client.extraSpecs.update(e,t,a))}))()}updateExtraSpecs(e){var t=arguments,a=this;return(0,h.default)((function*(){var r=t.length>1&&void 0!==t[1]?t[1]:[],n=t.length>2&&void 0!==t[2]?t[2]:[],l=t.length>3&&void 0!==t[3]?t[3]:[];if(r.length>0){var i={};(0,_.default)(r).call(r,(e=>{i[e.key]=e.value})),yield a.createExtraSpecs(e,i)}return n.length>0&&(yield y.default.all((0,b.default)(n).call(n,(t=>a.putExtraSpecs(e,t.key,{[t.key]:t.value}))))),l.length>0&&(yield y.default.all((0,b.default)(l).call(l,(t=>a.deleteExtraSpecs(e,t))))),y.default.resolve()}))()}},p=(0,C.default)(f.prototype,"access",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),(0,C.default)(f.prototype,"fetchAccess",[k.action],(0,S.default)(f.prototype,"fetchAccess"),f.prototype),(0,C.default)(f.prototype,"create",[k.action],(0,S.default)(f.prototype,"create"),f.prototype),(0,C.default)(f.prototype,"updateAccess",[k.action],(0,S.default)(f.prototype,"updateAccess"),f.prototype),(0,C.default)(f.prototype,"createExtraSpecs",[k.action],(0,S.default)(f.prototype,"createExtraSpecs"),f.prototype),(0,C.default)(f.prototype,"deleteExtraSpecs",[k.action],(0,S.default)(f.prototype,"deleteExtraSpecs"),f.prototype),(0,C.default)(f.prototype,"putExtraSpecs",[k.action],(0,S.default)(f.prototype,"putExtraSpecs"),f.prototype),(0,C.default)(f.prototype,"updateExtraSpecs",[k.action],(0,S.default)(f.prototype,"updateExtraSpecs"),f.prototype),f));t.default=E},69543:(e,t,a)=>{(t=e.exports=a(840049)(!1)).push([e.id,"/* init */\n/* specific color */\n/*  border */\n/*  input */\n/*  background */\n/* button */\n/*  shadow */\n/*  font */\n/*  animation */\n/*  size */\n/*  sider */\n.index__layout-header-menu-search-border--33PAs {\n  border: none;\n}\n.index__vertical-center--2UTGk {\n  position: absolute;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n          transform: translateY(-50%);\n}\n/* login */\n.index__card--Na2sx {\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  margin-bottom: 16px;\n  background-color: #fff;\n  border-radius: 2px;\n  -webkit-box-shadow: 0 0 10px 0 rgba(0, 0, 0, 0.05);\n          box-shadow: 0 0 10px 0 rgba(0, 0, 0, 0.05);\n}\n.index__card--Na2sx .index__card-content--26JCN {\n  padding: 16px;\n}\n.index__card--Na2sx .index__card-content--26JCN .index__card-item--1w9VY {\n  margin-bottom: 8px;\n}\n.index__card--Na2sx .index__card-content--26JCN .index__card-item--1w9VY h3 {\n  margin-bottom: 0;\n}\n.index__card--Na2sx .index__card-content--26JCN .index__card-item--1w9VY .index__title-help--8XKV- {\n  margin-left: 8px;\n  line-height: 26px;\n}\n.index__card--Na2sx .index__card-content--26JCN .index__card-item--1w9VY div {\n  word-break: break-all;\n}\n.index__card--Na2sx .index__card-content--26JCN :last-child {\n  margin-bottom: 0;\n}\n.index__card--Na2sx .index__card-content--26JCN .ant-typography {\n  word-break: break-all;\n}\n",""]),t.locals={primaryColor:"#a33e3e",normalColor:"rgba(34, 117, 74, 0.78)",successColor:"#57e39b",warnColor:"#fedf40",warnDarkColor:"#fa8c16",warnLightColor:"#f6b23d",errorColor:"#eb354d",dangerColor:"#c4233e",moneyColor:"#f50",infoColor:"rgba(0, 104, 255, 0.65)",headerHeight:"50px",productsColumnWidth:"220px","layout-header-menu-search-border":"index__layout-header-menu-search-border--33PAs","vertical-center":"index__vertical-center--2UTGk",card:"index__card--Na2sx","card-content":"index__card-content--26JCN","card-item":"index__card-item--1w9VY","title-help":"index__title-help--8XKV-"}},69578:(e,a,r)=>{"use strict";var n=r(818565),l=r(213696),i=r(303787),o=r(810732),s=r(532462),u=r(110819),d=r(722338),c=r(633950),f=r(548924);c(a,"__esModule",{value:!0}),a.default=a.Port=void 0;var p=f(r(819989)),h=f(r(29672)),m=f(r(89195)),g=f(r(303787)),v=f(r(608093)),y=f(r(549849)),b=f(r(877879)),_=f(r(823872)),S=r(87067),x=f(r(654017)),w=r(595605),C=r(846964),k=r(153434),I=f(r(140850)),P=["id"],D=["id","networkId"];function T(e,t){var a=n(e);if(l){var r=l(e);t&&(r=i(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a,r,n=null!=arguments[t]?arguments[t]:{};t%2?s(a=T(Object(n),!0)).call(a,(function(t){(0,b.default)(e,t,n[t])})):u?d(e,u(n)):s(r=T(Object(n))).call(r,(function(t){c(e,t,o(n,t))}))}return e}class R extends x.default{constructor(){super(...arguments),(0,b.default)(this,"updateFetchParamsByPage",(e=>{var{id:t}=e,a=A({},(0,y.default)(e,P));return this.isInstanceDetail?a.device_id=t:this.isNetworkDetail&&(a.network_id=t),a})),(0,b.default)(this,"updateFetchParams",(e=>{var{id:t,networkId:a}=e;return A({network_id:a,subnetId:t},(0,y.default)(e,D))})),(0,b.default)(this,"renderResource",((e,t)=>{var a,{device_id:r,device_owner:n}=t;if(!n)return r||"-";var l,i=r,o=null;"compute:nova"===n?(i=e?(0,p.default)(l="".concat(r," (")).call(l,e,")"):r,o=this.getLinkRender("instanceDetail",i,{id:r},{tab:"interface"})):(0,h.default)(a=["network:router_interface","network:ha_router_replicated_interface","network:router_ha_interface"]).call(a,n)?o=this.getLinkRender("routerDetail",i,{id:r}):"network:floatingip"===n&&(o=this.getLinkRender("fipDetail",i,{id:r}));return o?_.default.createElement(_.default.Fragment,null,n,_.default.createElement("br",null),o):_.default.createElement(_.default.Fragment,null,n,_.default.createElement("br",null),r||"-")})),(0,b.default)(this,"getPortDetailRoute",(()=>this.isSubnetDetail?{routeName:this.getRouteName("subnetPortDetail"),routeParamsFunc:e=>({networkId:e.network_id,subnetId:e.subnet_id,id:e.id})}:this.isNetworkDetail?{routeName:this.getRouteName("networkPortDetail"),routeParamsFunc:e=>({networkId:e.network_id,id:e.id})}:this.isInstanceDetail?{routeName:this.getRouteName("instancePortDetail"),routeParamsFunc:e=>({instanceId:e.device_id,id:e.id})}:{routeName:this.getRouteName("portDetail")})),(0,b.default)(this,"getColumns",(()=>{var e=[A({title:t("ID/Name"),dataIndex:"name"},this.getPortDetailRoute()),{title:t("Project ID/Name"),dataIndex:"project_name",hidden:!this.isAdminPage,isHideable:!0,sortKey:"project_id"},{title:t("Bind Resource"),dataIndex:"server_name",stringify:(e,t)=>{var a,r,n,l,{device_id:i,device_owner:o}=t;return i&&"compute:nova"===o&&e?(0,p.default)(n=(0,p.default)(l="".concat(o," \n ")).call(l,i," (")).call(n,e,")"):(0,p.default)(a=(0,p.default)(r="\n            ".concat(o," ")).call(r,o&&"\n","\n            ")).call(a,i||"-","\n          ")},render:this.renderResource,isHideable:!0,sorter:!1},{title:t("Owned Network ID/Name"),dataIndex:"network_name",isLink:!0,routeName:this.getRouteName("networkDetail"),idKey:"network_id",sorter:!1},{title:t("IPv4 Address"),dataIndex:"ipv4",render:e=>(0,m.default)(e).call(e,(e=>_.default.createElement("div",{key:e},e))),isHideable:!0,stringify:e=>e.join(","),sorter:!1},{title:t("IPv6 Address"),dataIndex:"ipv6",render:e=>(0,m.default)(e).call(e,(e=>_.default.createElement("div",{key:e},e))),isHideable:!0,stringify:e=>e.join(","),sorter:!1},{title:t("Mac Address"),dataIndex:"mac_address",isHideable:!0},{title:t("Status"),dataIndex:"status",valueMap:C.portStatus}];return this.isInstanceDetail?(0,g.default)(e).call(e,(e=>"server_name"!==e.dataIndex)):this.isNetworkDetail?(0,g.default)(e).call(e,(e=>"network_name"!==e.dataIndex)):e}))}init(){this.store=new w.PortStore,this.downloadStore=new w.PortStore}get isInstanceDetail(){var e,t;return this.inDetailPage&&((0,h.default)(e=this.path).call(e,"compute/instance")||(0,h.default)(t=this.path).call(t,"management/recycle-bin"))}get isNetworkDetail(){var e,t;return this.inDetailPage&&((0,h.default)(e=this.path).call(e,"networks/detail")||(0,h.default)(t=this.path).call(t,"networks-admin/detail"))&&!this.isSubnetDetail}get isSubnetDetail(){var e;return this.inDetailPage&&(0,h.default)(e=this.path).call(e,"subnet")}get isRecycleBinDetail(){var e;return this.inDetailPage&&(0,h.default)(e=this.path).call(e,"recycle-bin")}get isFilterByBackend(){return!this.isSubnetDetail}get isSortByBackend(){return this.isFilterByBackend}get defaultSortKey(){return this.isFilterByBackend?"status":""}get policy(){return"get_port"}get name(){return t("ports")}get adminPageHasProjectFilter(){return!0}get actionConfigs(){return this.isRecycleBinDetail?k.emptyActionConfig:this.isAdminPage?I.default.adminActions:this.inDetailPage?this.isInstanceDetail?I.default.actionConfigsInDetail:I.default.noActions:I.default.actionConfigs}get searchFilters(){var e=[{label:t("ID"),name:"uuid"},{label:t("Name"),name:"name"},{label:t("Status"),name:"status",options:[{label:t("Active"),key:"ACTIVE"},{label:t("Down"),key:"DOWN"},{label:t("Error"),key:"ERROR"},{label:t("Build"),key:"BUILD"},{label:t("N/A"),key:"N/A"}]}];this.isNetworkDetail||(0,v.default)(e).call(e,1,0,{label:t("Owned Network"),name:"network_name"});var a={label:t("Device Owner"),name:"device_owner",options:[{label:t("Instance"),key:"compute:nova",checkLabel:t("View virtual adapters"),isQuick:!0},{label:t("Router"),key:"network:router_ha_interface,network:ha_router_replicated_interface,network:router_interface,network:router_gateway,network:router_interface_distributed,network:router_centralized_snat"},{label:t("Floating IP"),key:"network:floatingip,network:floatingip_agent_gateway"},{label:t("DHCP Agent"),key:"network:dhcp"},{label:t("Others"),key:"network:local_ip,network:routed,network:distributed,compute:kuryr,Octavia"},{label:t("Unbounded"),key:"none"}]};return this.isSubnetDetail&&(a.filterFunc=(e,t)=>"none"===t?!e:e&&(0,h.default)(t).call(t,e)),this.isInstanceDetail||e.push(a),e}}a.Port=R;a.default=(0,S.inject)("rootStore")((0,S.observer)(R))},70586:(e,a,r)=>{"use strict";var n=r(471742),l=r(633950),i=r(810732),o=r(548924);l(a,"__esModule",{value:!0}),a.default=void 0,r(851011);var s=o(r(328153)),u=o(r(441859));r(573969);var d=o(r(38959));r(710953);var c=o(r(430519));r(21184);var f=o(r(35934));r(628731);var p=o(r(35937));r(244771);var h=o(r(144313)),m=o(r(303884)),g=o(r(303787)),v=o(r(804445)),y=o(r(75613)),b=o(r(89195)),_=o(r(342279)),S=function(e,t){if("function"==typeof n)var a=new n,r=new n;return function(e,t){if(!t&&e&&e.__esModule)return e;var n,o,s={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return s;if(n=t?r:a){if(n.has(e))return n.get(e);n.set(e,s)}for(var u in e)"default"!==u&&{}.hasOwnProperty.call(e,u)&&((o=(n=l)&&i(e,u))&&(o.get||o.set)?n(s,u,o):s[u]=e[u]);return s}(e,t)}(r(823872)),x=(r(877800),r(384472),r(153434)),w=o(r(61296));var C=e=>{var{tags:a,onChange:r,maxLength:n,maxCount:l}=e,[i,o]=(0,S.useState)(a),[w,C]=(0,S.useState)(!1),[k,I]=(0,S.useState)(""),[P,D]=(0,S.useState)(-1),[T,A]=(0,S.useState)(""),R=n&&n>0?{maxLength:n}:{},F=l&&l>0||-1;var E=null,N=null,M=e=>{E=e};function j(e){A(e.target.value)}function B(){var e=[...i];e[P]=T,o(e),A(""),D(-1)}function L(){!function(){var e=(0,v.default)(k).call(k);if(!e)return C(!1),void I("");var t=e.toLocaleLowerCase();(0,y.default)(i).call(i,(e=>e.toLowerCase()===t))||(-1!==F&&i.length<l||-1===F)&&o([...i,e]),C(!1),I("")}()}return(0,S.useEffect)((()=>{N&&N.focus()}),[w]),(0,S.useEffect)((()=>{E&&E.focus()}),[P]),(0,S.useEffect)((()=>{r(i)}),[i]),S.default.createElement(s.default,{gutter:[0,8]},(0,b.default)(i).call(i,((e,t)=>{if(P===t)return S.default.createElement(h.default,(0,m.default)({ref:M,style:{width:78,marginRight:8,verticalAlign:"top"},key:e,size:"small",value:T,onChange:j,onBlur:B,onPressEnter:B},R));var a=e.length>20,r=a?"".concat((0,_.default)(e).call(e,0,20),"..."):e,n=S.default.createElement(p.default,{key:e,closable:!0,onClose:()=>{return t=e,void o((0,g.default)(i).call(i,(e=>e!==t)));var t},color:x.projectTagsColors[t%10]},S.default.createElement("span",{style:{whiteSpace:"pre-wrap"},onDoubleClick:a=>{D(t),A(e),a.preventDefault()}},r));return S.default.createElement(c.default,{span:24,key:e},a?S.default.createElement(f.default,{title:S.default.createElement("span",{style:{whiteSpace:"pre-wrap"}},e)},n):n)})),S.default.createElement(c.default,{span:24},w&&S.default.createElement("div",{style:{display:"flex",alignItems:"center",gap:8}},S.default.createElement(h.default,(0,m.default)({ref:e=>{N=e},style:{width:78,verticalAlign:"top"},type:"text",size:"small",value:k,onChange:function(e){I(e.target.value)},onPressEnter:L},R)),S.default.createElement(d.default,{size:"small",type:"primary",onClick:L},t("Add")),S.default.createElement(d.default,{size:"small",onClick:function(){C(!1),I("")}},t("Cancel"))),!w&&S.default.createElement(p.default,{onClick:function(){C(!0)},style:{cursor:"pointer"}},S.default.createElement(u.default,null)," ",t("New Tag"))))};C.propTypes={tags:w.default.array,onChange:w.default.func,maxLength:w.default.number,maxCount:w.default.number};a.default=C},70591:(e,a,r)=>{"use strict";var n=r(633950),l=r(548924);n(a,"__esModule",{value:!0}),a.getKeyPairHeader=void 0;var i=l(r(68982)),o=l(r(601839)),s=l(r(823872)),u=l(r(13425)),d=l(r(892583)),c=l(r(628672));a.getKeyPairHeader=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"keypair",r=function(){var t=(0,o.default)((function*(){var t;yield e.getKeypairs();var{createdItem:r}=e.keyPairStore,n=(0,i.default)(t=e.keypairs).call(t,(e=>e.name===(r||{}).name));if(n){var l={selectedRowKeys:[n.id],selectedRows:[n]};e.setState({initKeyPair:l},(()=>{e.updateFormValue(a,n)}))}}));return function(){return t.apply(this,arguments)}}();return s.default.createElement("div",{style:{marginBottom:10}},s.default.createElement("span",null,t("The key pair allows you to SSH into your newly created instance. You can select an existing key pair, import a key pair, or generate a new key pair.")),s.default.createElement("span",{className:c.default["action-wrapper"]},s.default.createElement(u.default,{actions:{moreActions:[{action:d.default}]},onFinishAction:r})))}},82224:(e,t,a)=>{"use strict";var r=a(633950),n=a(548924);r(t,"__esModule",{value:!0}),t.default=void 0,a(577990);var l=n(a(277756));a(862942);var i=n(a(41796)),o=n(a(89195)),s=n(a(823872)),u=(a(877800),n(a(61296))),d=a(83575),c=n(a(784009)),f=e=>{var{title:t,descriptions:a,loading:r}=e,n=(0,o.default)(a).call(a,(e=>("number"==typeof e.content&&(e.content=e.content.toString()),s.default.createElement(i.default.Item,{label:e.label,className:c.default.item,key:"label-".concat((0,d.generateId)())},e.content))));return s.default.createElement(l.default,{loading:r},s.default.createElement(i.default,{colon:!1,title:t},n))},p=u.default.shape({label:u.default.oneOfType([u.default.string,u.default.node]),content:u.default.any});f.propTypes={title:u.default.oneOfType([u.default.string,u.default.node]),descriptions:u.default.arrayOf(p),loading:u.default.bool};t.default=f},85445:(e,a,r)=>{"use strict";var n=r(818565),l=r(213696),i=r(303787),o=r(810732),s=r(532462),u=r(110819),d=r(722338),c=r(633950),f=r(548924);c(a,"__esModule",{value:!0}),a.default=a.Allocate=void 0;var p=f(r(549849)),h=f(r(89195)),m=f(r(424836)),g=f(r(601839)),v=f(r(877879)),y=f(r(823872)),b=r(87067),_=r(860615),S=r(722625),x=r(288274),w=f(r(452740)),C=f(r(915363)),k=r(365468),I=r(378063),P=r(83575),D=r(127567),T=r(360165),A=["subnet_id","batch_allocate","count","project_id","enable_subnet_selection"];function R(e,t){var a=n(e);if(l){var r=l(e);t&&(r=i(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function F(e){for(var t=1;t<arguments.length;t++){var a,r,n=null!=arguments[t]?arguments[t]:{};t%2?s(a=R(Object(n),!0)).call(a,(function(t){(0,v.default)(e,t,n[t])})):u?d(e,u(n)):s(r=R(Object(n))).call(r,(function(t){c(e,t,o(n,t))}))}return e}class E extends _.ModalAction{constructor(){var e;super(...arguments),e=this,(0,v.default)(this,"handleNetworkChange",function(){var t=(0,g.default)((function*(t){var a=yield C.default.fetchList({network_id:t}),r=(0,h.default)(a).call(a,(e=>({allocation_pools:e.allocation_pools,ip_version:e.ip_version,value:e.id,label:e.name})));e.setState({subnets:r,selectedNetwork:t},(()=>{var{enableSubnetSelection:t}=e.state;if(t&&r.length>0){var a,n=r[0];null===(a=e.formRef)||void 0===a||null===(a=a.current)||void 0===a||a.setFieldsValue({subnet_id:n}),e.handleSubnetChange(n)}else{var l;e.setState({selectedSubnet:null}),null===(l=e.formRef)||void 0===l||null===(l=l.current)||void 0===l||l.setFieldsValue({subnet_id:void 0,floating_ip_address:void 0})}}))}));return function(e){return t.apply(this,arguments)}}()),(0,v.default)(this,"handleSubnetChange",(e=>{this.setState({selectedSubnet:e})})),(0,v.default)(this,"onSubmit",(e=>{var{subnet_id:t,batch_allocate:a,count:r,project_id:n,enable_subnet_selection:l}=e,i=(0,p.default)(e,A);if(t&&(i.subnet_id=t.value),a){i.floating_ip_address=null;for(var o=[],s=0;s<r;s++)o.push(this.store.create(i));return m.default.all(o)}return this.store.create(F(F({},i),{},{project_id:n?n.selectedRowKeys[0]:this.currentProjectId}))})),(0,v.default)(this,"onCountChange",(e=>{this.setState({count:e})})),(0,v.default)(this,"onProjectChange",(e=>{var{selectedRowKeys:t}=e;this.setState({projectId:t[0]},(()=>{this.getQuota()}))})),(0,v.default)(this,"handleSubnetToggle",(e=>{this.setState({enableSubnetSelection:e},(()=>{if(e){var{subnets:t=[]}=this.state;if(t.length>0){var a,r=t[0];null===(a=this.formRef)||void 0===a||null===(a=a.current)||void 0===a||a.setFieldsValue({subnet_id:r}),this.handleSubnetChange(r)}}else{var n;this.setState({selectedSubnet:null}),null===(n=this.formRef)||void 0===n||null===(n=n.current)||void 0===n||n.setFieldsValue({subnet_id:void 0,floating_ip_address:void 0})}}))}))}get name(){return t("Allocate IP")}static get modalSize(){var{pathname:e}=window.location;return(0,k.qosEndpoint)()||(0,P.isAdminPage)(e)?"large":"small"}getModalSize(){return(0,k.qosEndpoint)()||this.isAdminPage?"large":"small"}get qosEndpoint(){return(0,k.qosEndpoint)()}init(){this.store=new S.FloatingIpStore,this.networkStore=new x.NetworkStore,this.projectStore=w.default,this.state=F(F({},this.state||{}),{},{selectedNetwork:null,selectedSubnet:null,networks:[],subnets:[],qosPolicy:null,count:2,quota:{},quotaLoading:!0,projectId:this.currentProjectId,maxCount:2,enableSubnetSelection:!1}),this.getExternalNetworks(),this.isAdminPage&&this.fetchProjectList(),this.getQuota()}fetchProjectList(){var e=this;return(0,g.default)((function*(){yield e.projectStore.fetchProjectsWithDomain(),e.updateDefaultValue()}))()}getExternalNetworks(){var e=this;return(0,g.default)((function*(){var t=yield e.networkStore.pureFetchList({"router:external":!0});e.setState({networks:t})}))()}get messageHasItemName(){return!1}get projects(){return(0,D.toJS)(this.projectStore.list.data)||[]}static get disableSubmit(){var{neutronQuota:{floatingip:{left:e=0}={}}}=w.default;return 0===e}static get showQuota(){return!0}get showQuota(){return!0}getQuota(){var e=this;return(0,g.default)((function*(){var{projectId:t,count:a}=e.state;e.setState({quotaLoading:!0});var r=yield e.projectStore.fetchProjectNeutronQuota(t),{floatingip:n={}}=r||{},{left:l=0}=n,i=-1===l?1/0:l;e.setState({quota:n,quotaLoading:!1,maxCount:i});var o=a;-1!==l&&l<a?o=l:l>0&&0===a&&(o=1),o!==a&&(e.updateFormValue("count",o),e.setState({count:o}))}))()}get quotaInfo(){var{quota:e={},quotaLoading:a,batchAllocate:r=!1,count:n}=this.state;if(a)return[];var{left:l=0}=e,i=0;return 0!==l&&(i=r?n:1),[F(F({},e),{},{add:i,name:"floatingip",title:t("Floating IP")})]}get defaultValue(){var e={count:2};return this.isAdminPage&&(e.project_id={selectedRowKeys:[this.currentProjectId]}),e}checkCanSpecifyFloatingIpAddress(){return(0,T.checkPolicyRule)("create_floatingip")&&(0,T.checkPolicyRule)("create_floatingip:floating_ip_address")}get formItems(){var e,{networks:a,selectedNetwork:r,subnets:n,selectedSubnet:l,batchAllocate:i=!1,maxCount:o,enableSubnetSelection:s=!1}=this.state,u=(0,h.default)(a).call(a,(e=>({label:e.name,value:e.id})));return[{name:"floating_network_id",label:t("Network"),type:"select",options:u,onChange:this.handleNetworkChange,required:!0,autoSelectFirst:!0},F({name:"project_id",label:t("Project"),type:"select-table",hidden:!this.isAdminPage,required:this.isAdminPage,isLoading:this.projectStore.list.isLoading,data:this.projects,onChange:this.onProjectChange},I.projectTableOptions),{name:"enable_subnet_selection",label:t("Owned Subnet"),type:"check",content:t("Specify subnet manually"),onChange:this.handleSubnetToggle,display:!!r&&n.length>0},{name:"subnet_id",label:t("Owned Subnet"),type:"select",options:n,isWrappedValue:!0,onChange:e=>this.handleSubnetChange(e),extra:l&&y.default.createElement(y.default.Fragment,null,y.default.createElement("span",null,t("Allocation Pools")),(0,h.default)(e=l.allocation_pools).call(e,((e,t)=>y.default.createElement("div",{key:"pool.start.".concat(t)},e.start,"--",e.end)))),hidden:!r||!s,autoSelectFirst:!1,required:!1},{name:"batch_allocate",label:t("Batch Allocate"),type:"check",onChange:e=>{this.setState({batchAllocate:e})}},{name:"count",label:t("Count"),type:"input-int",min:1,max:o>0||o===1/0?o:void 0,hidden:!i,required:!0,onChange:this.onCountChange},{name:"floating_ip_address",label:t("Floating IP Address"),hidden:!l||i,display:this.checkCanSpecifyFloatingIpAddress(),type:"ip-input",version:l&&(l.ip_version||4),extra:t("Only available when a subnet is selected")}]}}a.Allocate=E,(0,v.default)(E,"id","allocate"),(0,v.default)(E,"title",t("Allocate IP")),(0,v.default)(E,"policy","create_floatingip"),(0,v.default)(E,"allowed",(()=>m.default.resolve(!0)));a.default=(0,b.inject)("rootStore")((0,b.observer)(E))},90727:(e,a,r)=>{"use strict";var n=r(633950),l=r(548924);n(a,"__esModule",{value:!0}),a.volumeTypes=a.getInstanceSnapshotDataDisk=a.getDiskInfo=a.getAllDataDisks=void 0;var i=l(r(75613)),o=l(r(149409)),s=l(r(303787)),u=l(r(89195)),d=l(r(68982)),c=l(r(532462)),f=l(r(748123)),p=l(r(812941)),h=r(127567),m=()=>{var e=p.default.list.data||[],t=(0,i.default)(e).call(e,(e=>{var t;return!(0,o.default)(t=e.name).call(t,"__")}))?(0,s.default)(e).call(e,(e=>{var t;return!(0,o.default)(t=e.name).call(t,"__")})):e;return(0,u.default)(t).call(t,(e=>({label:e.name,value:e.id,originData:(0,h.toJS)(e)})))};a.volumeTypes=m;var g=e=>{var a,{snapshotDetail:{size:r=0}={},volumeDetail:{volume_type:n}={},selfBdmData:l={}}=e||{},{delete_on_termination:i}=l,o=i?1:0,s=i?t("Deleted with the instance"):t("Not deleted with the instance"),u=(0,d.default)(a=m()).call(a,(e=>e.label===n));return{type:null==u?void 0:u.value,typeOption:u,size:r,deleteType:o,deleteTypeLabel:s}};a.getDiskInfo=g;var v=e=>{var{volumeDetail:t,snapshotDetail:a,bdmFormatData:r={}}=e||{};return g({volumeDetail:t,snapshotDetail:a,selfBdmData:r})};a.getInstanceSnapshotDataDisk=v;a.getAllDataDisks=e=>{var{dataDisk:t=[],instanceSnapshotDataVolumes:a=[]}=e,r=(0,f.default)(t);return null==a||(0,c.default)(a).call(a,(e=>{var t=v(e)||{};r.unshift({value:t})})),r}},94030:(e,a,r)=>{"use strict";var n=r(633950),l=r(548924);n(a,"__esModule",{value:!0}),a.default=a.ChangeType=void 0;var i=l(r(89195)),o=l(r(303787)),s=l(r(819989)),u=l(r(424836)),d=l(r(877879)),c=r(87067),f=r(860615),p=l(r(342616)),h=l(r(812941)),m=r(505997);class g extends f.ModalAction{constructor(){super(...arguments),(0,d.default)(this,"onSubmit",(e=>{var{id:t}=this.item,{new_type:a}=e,r={new_type:a,migration_policy:"on-demand"};return this.store.retype(t,r)}))}get name(){return t("Change type")}get tips(){return t("If the capacity of the disk is large, the type modify operation may take several hours. Please be cautious.")}init(){this.store=p.default,this.volumeTypeStore=h.default,this.getVolumeTypes()}getVolumeTypes(){this.volumeTypeStore.fetchList()}get isAsyncAction(){return!0}get volumeTypes(){var e,{volume_type:t}=this.item,{data:a=[]}=this.volumeTypeStore.list;return(0,i.default)(e=(0,o.default)(a).call(a,(e=>e.name!==t))).call(e,(e=>({label:e.name,value:e.id})))}get defaultValue(){var e,t,{name:a,id:r,volume_type:n,size:l}=this.item;return{volume:(0,s.default)(e=(0,s.default)(t="".concat(a||r,"(")).call(t,n," | ")).call(e,l,"GiB)"),volume_type:(this.volumeTypes[0]||{}).value}}get formItems(){return[{name:"volume",label:t("Volume"),type:"label",iconType:"volume"},{name:"new_type",label:t("Volume Type"),type:"select",required:!0,options:this.volumeTypes}]}}a.ChangeType=g,(0,d.default)(g,"id","change-type"),(0,d.default)(g,"title",t("Change Type")),(0,d.default)(g,"policy","volume:retype"),(0,d.default)(g,"allowed",(e=>u.default.resolve((0,m.isAvailableOrInUse)(e)&&!(0,m.isOsDisk)(e))));a.default=(0,c.inject)("rootStore")((0,c.observer)(g))},119585:(e,a,r)=>{"use strict";var n=r(818565),l=r(213696),i=r(303787),o=r(810732),s=r(532462),u=r(110819),d=r(722338),c=r(633950),f=r(548924);c(a,"__esModule",{value:!0}),a.default=void 0;var p=f(r(29672)),h=f(r(342279)),m=f(r(68982)),g=f(r(89195)),v=f(r(303787)),y=f(r(360147)),b=f(r(819989));r(749121);var _=f(r(123007)),S=f(r(303884)),x=f(r(667508));r(573969);var w=f(r(38959));r(249986);var C=f(r(328328)),k=f(r(831838)),I=f(r(949975));r(588260);var P=f(r(586482)),D=f(r(877879)),T=f(r(468224)),A=f(r(371573)),R=f(r(823872)),F=r(189961),E=f(r(38256)),N=r(83575),M=(r(877800),r(384472),f(r(942240))),j=f(r(82224)),B=f(r(31170)),L=r(127567),V=f(r(360165)),O=f(r(13425)),z=r(153434),q=r(113479),K=r(640293),G=f(r(737070));function U(e,t){var a=n(e);if(l){var r=l(e);t&&(r=i(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function Q(e){for(var t=1;t<arguments.length;t++){var a,r,n=null!=arguments[t]?arguments[t]:{};t%2?s(a=U(Object(n),!0)).call(a,(function(t){(0,D.default)(e,t,n[t])})):u?d(e,u(n)):s(r=U(Object(n))).call(r,(function(t){c(e,t,o(n,t))}))}return e}class H extends R.default.Component{constructor(e){var a,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),a=this,(0,D.default)(this,"onCollapsedCallback",(()=>{})),(0,D.default)(this,"handleChangeTab",(e=>{this.handleFetch({tab:e},!0)})),(0,D.default)(this,"handleFetch",((e,t)=>{this.routing.query(e,t)})),(0,D.default)(this,"handleDetailInfo",(()=>{var{collapsed:e}=this.state;this.setState({collapsed:!e},(()=>{this.onCollapsedCallback(!e)}))})),(0,D.default)(this,"getDesc",((e,t)=>{var a,{dataIndex:r,render:n,valueRender:l,valueMap:i,unit:o}=t,s=(0,T.default)(e,r);if(n)return n(s,e);if(l){var u=N.renderFilterMap[l];return u&&u(s)}return i?(0,K.getValueMapRender)(t)(s):o?(0,K.getUnitRender)(t)(s):(0,p.default)(a=[void 0,null,""]).call(a,s)?"-":s})),(0,D.default)(this,"fetchData",((e,t)=>{if(this.store.fetchDetail){var a=Q(Q(Q({},this.params),e||{}),{},{all_projects:this.isAdminPage,silent:t}),r=this.updateFetchParams(a);this.store.fetchDetail(r).catch(this.catch)}})),(0,D.default)(this,"getRouteProps",(()=>({}))),(0,D.default)(this,"fetchDataWithPolicy",((e,a)=>{if((0,V.default)({policy:this.policy,aliasPolicy:this.aliasPolicy,actionName:this.name}))this.fetchData(a,e);else{var r={message:t("You don't have access to get {name}.",{name:this.name.toLowerCase()}),status:401};B.default.errorWithDetail(r,t("Unable to get {name} detail.",{name:this.name.toLowerCase()}))}})),(0,D.default)(this,"refreshDetailByTab",(function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];a.fetchDataWithPolicy(e)})),(0,D.default)(this,"refreshDetailByAction",(e=>{this.fetchDataWithPolicy(e)})),(0,D.default)(this,"handleRefresh",(()=>{this.fetchDataWithPolicy(!1)})),(0,D.default)(this,"catch",(e=>{var{data:a,status:r}=(e||{}).response||e||{};if(401===r){var n=t("The session has expired, please log in again.");B.default.errorWithDetail(null,n)}else if(404===r)this.setState({notFound:!0}),B.default.warn(t("{name} {id} could not be found.",{name:this.name.toLowerCase(),id:this.id}));else{var l={message:a,status:r};B.default.errorWithDetail(l,t("Get {name} detail error.",{name:this.name.toLowerCase()}))}})),(0,D.default)(this,"goBack",(()=>{this.routing.push(this.listUrl)})),(0,D.default)(this,"updateFetchParams",(e=>e)),(0,D.default)(this,"onFinishAction",((e,t,a)=>{if(e&&a)this.goBack();else{var r,n=!(0,p.default)(r=this.forceLoadingTabs).call(r,this.tab.key);this.refreshDetailByAction(n)}this.setState({inAction:!1})})),(0,D.default)(this,"onClickAction",(()=>{this.setState({inAction:!0})})),(0,D.default)(this,"onCancelAction",(()=>{this.setState({inAction:!1})})),this.options=r,this.state={notFound:!1,collapsed:!1},this.init()}componentDidMount(){this.fetchDataWithPolicy()}componentDidUpdate(e){var{id:t}=e.match.params;this.id!==t&&this.handleRefresh(!0)}get params(){return this.props.match.params||{}}get id(){return this.props.match.params.id}get policy(){return""}get aliasPolicy(){return""}get name(){return""}get routing(){return this.props.rootStore.routing}get path(){var{location:{pathname:e=""}={}}=this.props;return e||""}get isAdminPage(){var{pathname:e}=this.props.location;return(0,N.isAdminPage)(e)}getRouteName(e){return this.isAdminPage?"".concat(e,"Admin"):e}getRoutePath(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.getRouteName(e);return(0,q.getPath)({key:r,params:t,query:a})}getLinkRender(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=this.getRouteName(e);return(0,q.getLinkRender)({key:n,params:a,query:r,value:t})}get tabs(){return[]}get tab(){var e,t;if(0===this.tabs.length)return null;var a=(0,F.parse)((0,h.default)(e=this.routing.location.search).call(e,1)),{tab:r}=a;return(0,m.default)(t=this.tabs).call(t,(e=>e.key===r))||this.tabs[0]}get actionConfigs(){return z.emptyActionConfig}get rowActions(){return[]}get detailTabs(){return[{title:"tab1",key:"tab1",component:null},{title:"tab2",key:"tab2",component:null}]}get titleLabel(){return"ID:"}get titleValue(){return this.params.id}get detailTitle(){var{collapsed:e}=this.state,{Paragraph:a}=P.default,r=e?R.default.createElement(I.default,null):R.default.createElement(k.default,null);return R.default.createElement("div",null,R.default.createElement("span",{className:G.default["title-label"]},this.titleLabel),R.default.createElement("span",{className:G.default["header-title"]},R.default.createElement(a,{style:{display:"inherit"},copyable:!0},this.titleValue)),R.default.createElement(C.default,{type:"vertical",className:G.default["header-divider"]}),R.default.createElement(w.default,{onClick:this.goBack,type:"link"},t("Back")),R.default.createElement(w.default,{type:"link",icon:R.default.createElement(x.default,null),onClick:this.handleRefresh}),R.default.createElement(w.default,{onClick:this.handleDetailInfo,icon:r,type:"link",className:G.default["header-button"]}))}get className(){return""}get listUrl(){return""}get detailData(){return(0,L.toJS)(this.store.detail)||{}}get isLoading(){return this.store.isLoading}get detailInfos(){return[]}get forceLoadingTabs(){return[]}getActionData(){return this.detailData}init(){this.store={detail:{},isLoading:!0}}renderDetailInfos(){var e,t,{Paragraph:a}=P.default,{collapsed:r}=this.state;if((0,A.default)(this.detailData))return R.default.createElement(j.default,{title:this.detailTitle,descriptions:[],loading:this.isLoading});var n=r?[]:(0,g.default)(e=(0,v.default)(t=this.detailInfos).call(t,(e=>!e.hidden))).call(e,(e=>{var t,r,n,{title:l,dataIndex:i,copyable:o}=e;this.isLoading||!this.detailData||(0,A.default)(this.detailData)?t="-":"-"!==(t=this.getDesc(this.detailData,e))&&(o||0===(0,y.default)(r=i.toLowerCase()).call(r,"id")||(0,y.default)(n=i.toLowerCase()).call(n,"_id")>=0)&&(t=R.default.createElement(a,{style:{margin:0},copyable:o},t));return{label:l,content:t}}));return R.default.createElement(j.default,{title:this.detailTitle,descriptions:n,loading:this.isLoading})}renderTabComponent(e){var t,{component:a,key:r,render:n}=e,{inAction:l}=this.state;return n||(a?R.default.createElement(e.component,(0,S.default)({},this.props,{detail:this.detailData,detailName:(0,b.default)(t="".concat(this.name,"-")).call(t,this.id),refreshDetail:this.refreshDetailByTab,inAction:l})):R.default.createElement("span",null,r))}renderTab(e,t){return e!==t.key?R.default.createElement(_.default.TabPane,{tab:t.title,key:t.key}):R.default.createElement(_.default.TabPane,{tab:t.title,key:t.key},this.renderTabComponent(t))}renderTabs(){var e;if((0,A.default)(this.detailData)||this.isLoading)return null;if(!this.tab)return null;var t=(0,g.default)(e=this.tabs).call(e,(e=>this.renderTab(this.tab.key,e)));return R.default.createElement("div",{className:(0,E.default)(G.default["tab-wrapper"],this.className)},R.default.createElement(_.default,{activeKey:this.tab.key,onChange:this.handleChangeTab},t))}renderActions(){var e=this.getActionData();return(0,A.default)(e)||this.store.isLoading?null:R.default.createElement(O.default,{actions:this.actionConfigs.rowActions||this.actions,onFinishAction:this.onFinishAction,item:this.getActionData(),containerProps:{isAdminPage:this.isAdminPage},isAdminPage:this.isAdminPage,onClickAction:this.onClickAction,onCancelAction:this.onCancelAction})}render(){return this.state.notFound?R.default.createElement(M.default,{title:this.name,link:this.listUrl,goList:!0}):R.default.createElement("div",{className:(0,E.default)(G.default.main,this.className,"detail-main")},R.default.createElement("div",{className:G.default["action-wrapper"]},this.renderActions()),R.default.createElement("div",{className:G.default.header},this.renderDetailInfos()),R.default.createElement("div",{className:G.default.tabs},this.renderTabs()))}}a.default=H},120840:(e,t,a)=>{"use strict";var r=a(633950),n=a(548924);r(t,"__esModule",{value:!0}),t.default=t.SettingStore=void 0;var l,i=n(a(303787)),o=n(a(810732)),s=n(a(601839)),u=n(a(533301)),d=a(127567),c=n(a(892621)),f=n(a(381891)),p=new(t.SettingStore=(l=class extends f.default{get client(){return c.default.skyline.setting}listDidFetch(e){return(0,s.default)((function*(){return(0,i.default)(e).call(e,(e=>!e.hidden))}))()}update(e){return this.submitting(this.client.update(null,e))}},(0,u.default)(l.prototype,"update",[d.action],(0,o.default)(l.prototype,"update"),l.prototype),l));t.default=p},121888:(e,t,a)=>{"use strict";var r=a(633950),n=a(548924);r(t,"__esModule",{value:!0}),t.default=t.BaseLayout=void 0;var l=a(823872),i=a(87067),o=n(a(765512));class s extends l.Component{constructor(e){super(e),this.routes=e.route.routes}render(){var{isAdminPage:e,sliderCollapsed:t}=this.props,a={isAdminPage:e,sliderCollapsed:t};return(0,o.default)(this.routes,a)}}t.BaseLayout=s;t.default=(0,i.inject)("rootStore")((0,i.observer)(s))},124403:(e,a,r)=>{"use strict";var n=r(633950),l=r(548924);n(a,"__esModule",{value:!0}),a.default=a.StepCreate=void 0;var i=l(r(424836)),o=l(r(877879)),s=r(87067),u=l(r(273352)),d=r(505997);class c extends u.default{static path(e){return"/compute/instance/create?volume=".concat(e.id)}static allowed(e){return i.default.resolve((0,d.canCreateInstance)(e))}}a.StepCreate=c,(0,o.default)(c,"id","instance-create"),(0,o.default)(c,"title",t("Create Instance")),(0,o.default)(c,"policy","os_compute_api:servers:create:attach_volume");a.default=(0,s.inject)("rootStore")((0,s.observer)(c))},140850:(e,t,a)=>{"use strict";var r=a(633950),n=a(548924);r(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(28916)),i=n(a(467193)),o=n(a(914128)),s=n(a(572455)),u=n(a(496469)),d=n(a(915147)),c=n(a(516651)),f=n(a(49929)),p=n(a(872798)),h={rowActions:{firstAction:o.default,moreActions:[{action:s.default},{action:c.default},{action:f.default},{action:u.default},{action:d.default},{action:p.default},{},{action:i.default}]},batchActions:[i.default],primaryActions:[l.default]},m={rowActions:{firstAction:u.default,moreActions:[{action:d.default}]},batchActions:[],primaryActions:[]},g={rowActions:{firstAction:i.default,moreActions:[]},batchActions:[i.default],primaryActions:[]};t.default={actionConfigs:h,actionConfigsInDetail:m,noActions:{rowActions:{firstAction:null,moreActions:[]},batchActions:[],primaryActions:[]},adminActions:g}},141815:(e,t,a)=>{var r=a(867471);"string"==typeof r&&(r=[[e.id,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(453027)(r,n);r.locals&&(e.exports=r.locals)},143753:(e,a,r)=>{"use strict";var n=r(633950),l=r(548924);n(a,"__esModule",{value:!0}),a.default=void 0;var i=l(r(424836)),o=l(r(877879)),s=r(860615),u=l(r(342616));class d extends s.ConfirmAction{constructor(){super(...arguments),(0,o.default)(this,"policy","volume:delete_transfer"),(0,o.default)(this,"allowedCheckFunc",(e=>i.default.resolve("awaiting-transfer"===e.status))),(0,o.default)(this,"confirmContext",(e=>{var{name:a}=e;return t("Are you sure to cancel transfer volume { name }? ",{name:a})})),(0,o.default)(this,"onSubmit",(e=>{var{id:t}=e;return u.default.cancelTransfer({id:t})}))}get id(){return"cancel-transfer"}get title(){return t("Cancel Transfer")}get name(){return t("Cancel Transfer")}get buttonText(){return t("Cancel Transfer")}get actionName(){return t("Cancel Transfer")}}a.default=d},155674:(e,a,r)=>{"use strict";var n=r(471742),l=r(633950),i=r(810732),o=r(548924);l(a,"__esModule",{value:!0}),a.default=a.FlavorSelectTable=void 0;var s=o(r(68982)),u=o(r(303787)),d=o(r(360147)),c=o(r(608093)),f=o(r(89195));r(121581);var p=o(r(514059));r(39044);var h=o(r(564690)),m=o(r(601839)),g=o(r(877879)),v=function(e,t){if("function"==typeof n)var a=new n,r=new n;return function(e,t){if(!t&&e&&e.__esModule)return e;var n,o,s={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return s;if(n=t?r:a){if(n.has(e))return n.get(e);n.set(e,s)}for(var u in e)"default"!==u&&{}.hasOwnProperty.call(e,u)&&((o=(n=l)&&i(e,u))&&(o.get||o.set)?n(s,u,o):s[u]=e[u]);return s}(e,t)}(r(823872)),y=r(87067),b=r(127567),_=o(r(697127)),S=(r(877800),o(r(120840))),x=o(r(64391)),w=r(578452),C=o(r(356379));class k extends v.Component{constructor(e){super(e),(0,g.default)(this,"onArchChange",(e=>{this.setState({arch:e.target.value})})),(0,g.default)(this,"onCategoryChange",(e=>{this.setState({category:e.target.value})})),(0,g.default)(this,"onChange",(e=>{var{onChange:t}=this.props;t&&t(e)})),this.state={arch:null,category:null},this.init()}get labelStyle(){return{marginRight:16}}getSettings(){var e=this;return(0,m.default)((function*(){yield e.settingStore.fetchList(),e.initDefaultValue()}))()}getFlavors(){var e=this;return(0,m.default)((function*(){var{allProjects:t=!1}=e.props;yield e.flavorStore.fetchList({all_projects:t}),e.initDefaultValue()}))()}get architectures(){var e,t={architecture:"custom"},a={architecture:"all"},{isIronic:r=!1,filterIronic:n=!0}=this.props,l=(0,s.default)(e=this.settingStore.list.data||[]).call(e,(e=>"flavor_families"===e.key));if(!l)return[a,t];var i=[];try{var o;i=(0,u.default)(o=l.value||[]).call(o,(e=>{var{architecture:t}=e;return!!t&&(!n||(r?(0,w.isBareMetal)(t):!(0,w.isBareMetal)(t)))}))}catch(e){}return[a,...i,t]}get categories(){var e,{arch:t}=this.state;if(!t)return[];var a=(0,s.default)(e=this.architectures).call(e,(e=>e.architecture===t));return a&&a.categories||[]}get flavors(){var e,t,a,r,n,{flavor:l,isIronic:i=!1,filterIronic:o=!0,excludeFlavors:s=[],size:c,memory:f,bootFromVolume:p}=this.props,{arch:h,category:m}=this.state;return h?(0,u.default)(e=(0,u.default)(t=(0,u.default)(a=(0,u.default)(r=(0,u.default)(n=this.flavorStore.list.data||[]).call(n,(e=>!(s.length>0)||(0,d.default)(s).call(s,e.id)<0))).call(r,(e=>!l||e.name!==l))).call(a,(e=>!o||(i?(0,w.isBareMetalFlavor)(e):!(0,w.isBareMetalFlavor)(e))))).call(t,(e=>"all"===h||("custom"===h?e.architecture===h:e.architecture===h&&e.category===m)))).call(e,(e=>!(Math.ceil(e.ram/1024)<f)&&(!(!p&&c>0)||e.disk>=c))):[]}getBaseColumns(){var{category:e,arch:a}=this.state,r=this.flavorStore.list.data||[],n=[...(0,w.getBaseColumns)(null,r)];return n[0].title=t("Name"),(0,c.default)(n).call(n,1,1),(0,w.categoryHasIOPS)(e)||(n=(0,u.default)(n).call(n,(e=>"quota:disk_total_iops_sec"!==e.dataIndex))),(0,w.categoryHasEphemeral)(e)||(n=(0,u.default)(n).call(n,(e=>"OS-FLV-EXT-DATA:ephemeral"!==e.dataIndex))),"all"===a&&(n=[...n,{title:t("Architecture"),dataIndex:"id",render:(e,t)=>(0,w.getFlavorArchInfo)(t)}]),n}getGpuColumns(){var{category:e}=this.state;return"compute_optimized_type"===e?(0,u.default)(w.gpuColumns).call(w.gpuColumns,(e=>{var t;return(0,d.default)(t=e.dataIndex).call(t,"gpu")<0})):(0,u.default)(w.gpuColumns).call(w.gpuColumns,(e=>{var t;return(0,d.default)(t=e.dataIndex).call(t,"gpu")>=0}))}get columns(){var{arch:e}=this.state,t=this.getBaseColumns();if((0,w.isBareMetal)(e))return[...(0,u.default)(t).call(t,((e,t)=>t<3))];if("heterogeneous_computing"!==e)return t;var a=this.getGpuColumns();return[...t,...a]}initDefaultValue(){var{value:{selectedRowKeys:e=[]}={}}=this.props;if(e.length>0){var t,a=(0,s.default)(t=(0,b.toJS)(this.flavorStore.list.data)||[]).call(t,(t=>t.id===e[0]));if(a){var{architecture:r,category:n}=a;this.setState({arch:r,category:n})}}else{var l=this.architectures[0].architecture,i=null;this.architectures[0].categories&&(i=this.architectures[0].categories[0].name),this.setState({arch:l,category:i})}}init(){this.settingStore=S.default,this.flavorStore=x.default,this.getSettings(),this.getFlavors()}renderArchButtons(){var e,{arch:t}=this.state,a=(0,f.default)(e=this.architectures).call(e,(e=>{var{architecture:t}=e,a=w.flavorArchitectures[t]||t;return v.default.createElement(h.default.Button,{value:t,key:t},a)}));return v.default.createElement(h.default.Group,{id:"flavor-select-arch",onChange:this.onArchChange,value:t,buttonStyle:"solid"},a)}renderCategoryButtons(){var e,{category:t}=this.state,a=(0,f.default)(e=this.categories).call(e,(e=>{var{name:t}=e,a=w.flavorCategoryList[t]||t;return v.default.createElement(h.default.Button,{value:t,key:t},a)}));return v.default.createElement(h.default.Group,{id:"flavor-select-category",onChange:this.onCategoryChange,value:t,buttonStyle:"solid"},a)}renderArchSelect(){return v.default.createElement("div",{className:C.default["flavor-tab"]},v.default.createElement("span",{className:C.default["flavor-label"]},t("Architecture")),this.renderArchButtons())}renderCategorySelect(){var{arch:e}=this.state;return"custom"===e||"all"===e?null:v.default.createElement("div",{className:C.default["flavor-tab"]},v.default.createElement("span",{className:C.default["flavor-label"]},t("Category")),this.renderCategoryButtons())}renderTableHeader(){return v.default.createElement("div",null,this.renderArchSelect(),this.renderCategorySelect())}render(){var{value:e,disabledFunc:a}=this.props,r=this.settingStore.list.isLoading&&this.flavorStore.list.isLoading,n=this.flavors,l={columns:this.columns,data:n,tableHeader:this.renderTableHeader(),isLoading:r,filterParams:(0,w.getFlavorSearchFilters)(),value:e,onChange:this.onChange,disabledFunc:a};return v.default.createElement("div",null,v.default.createElement(_.default,l),!r&&(this.flavorStore.list.data||[]).length>0&&n.length<=0&&v.default.createElement(p.default,{message:t("No Flavor satisfies Image's Disk and Memory requirements. Please select another image."),type:"error",showIcon:!0,style:{marginTop:16}}))}}a.FlavorSelectTable=k;a.default=(0,y.inject)("rootStore")((0,y.observer)(k))},156695:(e,a,r)=>{"use strict";var n=r(633950),l=r(548924);n(a,"__esModule",{value:!0}),a.default=a.Migrate=void 0;var i=l(r(819989)),o=l(r(424836)),s=l(r(877879)),u=r(87067),d=r(860615),c=l(r(342616)),f=r(505997),p=l(r(595780)),h=r(47945);class m extends d.ModalAction{constructor(){super(...arguments),(0,s.default)(this,"disableFunc",(e=>{var{host:t}=this.item;return e.name===t})),(0,s.default)(this,"onSubmit",(e=>{var{pool:t}=e,{item:{id:a}}=this,{selectedRowKeys:r=[]}=t||{};return c.default.migrate(a,{host:r[0]})}))}static get modalSize(){return"large"}getModalSize(){return"large"}get name(){return t("Migrate volume")}init(){this.poolStore=p.default,this.getPools()}get defaultValue(){var e,t,{name:a,id:r,volume_type:n,size:l,host:o}=this.item;return{volume:(0,i.default)(e=(0,i.default)(t="".concat(a||r,"(")).call(t,n," | ")).call(e,l,"GiB)"),host:o}}getPools(){this.poolStore.fetchList()}get pools(){return this.poolStore.list.data||[]}get formItems(){return[{name:"volume",label:t("Volume"),type:"label",iconType:"volume"},{name:"host",label:t("Current Storage Backend"),type:"label",iconType:"instance"},{name:"pool",label:t("Target Storage Backend"),type:"select-table",required:!0,data:this.pools,isLoading:this.poolStore.list.isLoading,disabledFunc:this.disableFunc,rowKey:"name",columns:h.poolColumns}]}}a.Migrate=m,(0,s.default)(m,"id","migrate-volume"),(0,s.default)(m,"title",t("Migrate Volume")),(0,s.default)(m,"policy","volume_extension:volume_admin_actions:migrate_volume"),(0,s.default)(m,"allowed",(e=>o.default.resolve((0,f.isAvailableOrInUse)(e))));a.default=(0,u.inject)("rootStore")((0,u.observer)(m))},175548:(e,t,a)=>{"use strict";var r=a(633950),n=a(548924);r(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(360147)),i=n(a(89195)),o=n(a(303787));a(735038);var s=n(a(929636)),u=n(a(542487));a(577990);var d=n(a(277756));a(851011);var c=n(a(328153));a(710953);var f=n(a(430519));a(21184);var p=n(a(35934));a(588260);var h=n(a(586482)),m=n(a(896363)),g=n(a(468224)),v=n(a(756612)),y=n(a(823872)),b=(a(877800),a(384472),n(a(61296))),_=n(a(38256)),S=a(83575),x=a(640293),w=n(a(133787)),C=n(a(402655)),{Paragraph:k}=h.default,I=(e,t)=>{var{content:a,dataIndex:r,render:n,valueRender:i,copyable:o,valueMap:s,unit:u}=t;if((0,v.default)(t,"content"))return o?y.default.createElement(k,{copyable:o},a):a;var d=(0,g.default)(e,r);if(n)d=n(d,e);else if(i){var c=S.renderFilterMap[i];d=c&&c(d)}else s?d=(0,x.getValueMapRender)(t)(d):u&&(d=(0,x.getUnitRender)(t)(d));return(0,m.default)(d)||(d=d||"-"),((e,t,a,r)=>{var n,i,o=(0,g.default)(a,t);return(0,l.default)(n=t.toLowerCase()).call(n,"status")>=0||(0,l.default)(i=t.toLowerCase()).call(i,"state")>=0?y.default.createElement(w.default,{status:o,text:e}):"-"!==e&&(/_?id/g.test(t.toLowerCase())&&!1!==r||r)?y.default.createElement(k,{copyable:r},e):e||"-"})(d,r,e,o)},P=(e,t,a,r,n)=>{var l;return(0,i.default)(l=(0,o.default)(e).call(e,(e=>!e.hidden))).call(l,((e,l)=>{var i=(0,v.default)(e,"labelCol")?e.labelCol:r,o=(0,v.default)(e,"contentCol")?e.contentCol:n;return y.default.createElement(d.default,{loading:a,key:"detail-row-".concat(l)},y.default.createElement(c.default,{className:(0,_.default)(C.default["card-item"],"sl-card-item")},y.default.createElement(f.default,{span:i},(e=>{var{label:t,tooltip:a=""}=e;return a?y.default.createElement(p.default,{title:a},y.default.createElement("span",null,t)):t})(e)),y.default.createElement(f.default,{span:o},I(t,e))))}))},D=e=>{var t,{title:a,titleHelp:r,loading:n,options:l,data:i,labelCol:o,contentCol:f,className:p,button:h}=e;return r&&(t=y.default.createElement(s.default,{arrowPointAtCenter:"true",placement:"rightTop",content:r,getPopupContainer:e=>e.parentNode},y.default.createElement(u.default,{className:C.default["title-help"]}))),y.default.createElement("div",{className:(0,_.default)(C.default.card,p)},y.default.createElement("div",{className:C.default["card-content"]},y.default.createElement(d.default,{loading:n},y.default.createElement(c.default,{className:(0,_.default)(C.default["card-item"],"sl-card-item")},y.default.createElement("h3",null," ",a," "),t,h)),P(l,i,n,o,f)))},T=b.default.shape({label:b.default.oneOfType([b.default.string,b.default.node]),content:b.default.any,tooltip:b.default.oneOfType([b.default.string,b.default.node]),dataIndex:b.default.string,valueRender:b.default.string,labelCol:b.default.number,contentCol:b.default.number});D.defaultProps={labelCol:8,contentCol:16,options:[],title:"",titleHelp:"",loading:!1,data:{}},D.propTypes={title:b.default.oneOfType([b.default.string,b.default.node]),titleHelp:b.default.any,options:b.default.arrayOf(T),loading:b.default.bool,data:b.default.object,labelCol:b.default.number,contentCol:b.default.number};t.default=D},178819:(e,a,r)=>{"use strict";var n=r(633950),l=r(548924);n(a,"__esModule",{value:!0}),a.hypervisorFilters=a.hypervisorColumns=void 0;var i=l(r(819989));r(21184);var o=l(r(35934)),s=l(r(823872)),u=l(r(363936));r(877800),a.hypervisorColumns=[{title:t("Hostname"),dataIndex:"service_host"},{title:t("Type"),dataIndex:"hypervisor_type"},{title:t("VCPU (Core)"),dataIndex:"vcpus_used_percent",render:(e,a)=>{var r;return"ironic"===a.hypervisor_type?s.default.createElement(o.default,{title:t("vCPUs and ram are not used for bare metal scheduling")},s.default.createElement("span",null,"-")):s.default.createElement(u.default,{value:e,label:(0,i.default)(r="".concat(a.vcpus_used," / ")).call(r,a.vcpus)})},width:180,stringify:(e,a)=>{var r,n,l,o;return"ironic"===a.hypervisor_type?"-":(0,i.default)(r=(0,i.default)(n=(0,i.default)(l=(0,i.default)(o="".concat(e,"% (")).call(o,t("Used"),": ")).call(l,a.vcpus_used," / ")).call(n,t("Total"),": ")).call(r,a.vcpus,")")}},{title:t("Configured Memory (GiB)"),dataIndex:"memory_mb_percent",render:(e,a)=>{var r;return"ironic"===a.hypervisor_type?s.default.createElement(o.default,{title:t("vCPUs and ram are not used for bare metal scheduling")},s.default.createElement("span",null,"-")):s.default.createElement(u.default,{value:e,label:(0,i.default)(r="".concat(a.memory_mb_used_gb," / ")).call(r,a.memory_mb_gb)})},width:180,stringify:(e,a)=>{var r,n,l,o;return"ironic"===a.hypervisor_type?"-":(0,i.default)(r=(0,i.default)(n=(0,i.default)(l=(0,i.default)(o="".concat(e,"% (")).call(o,t("Used"),": ")).call(l,a.memory_mb_used_gb," / ")).call(n,t("Total"),": ")).call(r,a.memory_mb_gb,")")}},{title:t("Instances"),dataIndex:"running_vms"}],a.hypervisorFilters=[{label:t("Hostname"),name:"service_host"},{label:t("Type"),name:"hypervisor_type"}]},194694:(e,a,r)=>{"use strict";var n=r(633950),l=r(548924);n(a,"__esModule",{value:!0}),a.default=void 0;var i=l(r(877879)),o=l(r(414407)),s=r(860615),u=l(r(722625));class d extends s.ConfirmAction{constructor(){super(...arguments),(0,i.default)(this,"policy","update_floatingip"),(0,i.default)(this,"allowedCheckFunc",(e=>!(0,o.default)(e.fixed_ip_address)&&"DOWN"!==e.status)),(0,i.default)(this,"getItemName",(e=>e.floating_ip_address)),(0,i.default)(this,"onSubmit",(e=>u.default.disassociateFip(e)))}get id(){return"disassociate"}get title(){return t("Disassociate")}get buttonText(){return t("Disassociate")}get actionName(){return t("Disassociate")}}a.default=d},196768:(e,t,a)=>{(t=e.exports=a(840049)(!1)).push([e.id,"/* init */\n/* specific color */\n/*  border */\n/*  input */\n/*  background */\n/* button */\n/*  shadow */\n/*  font */\n/*  animation */\n/*  size */\n/*  sider */\n.index__layout-header-menu-search-border--3ZuNP {\n  border: none;\n}\n.index__vertical-center--y4FXI {\n  position: absolute;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n          transform: translateY(-50%);\n}\n/* login */\n.index__main--TubAm {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  padding: 0 16px;\n}\n.index__main--TubAm .index__left-side--pbUVD {\n  width: 380px;\n  padding-right: 16px;\n}\n.index__main--TubAm .index__right-side--3v5zG {\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n}\n",""]),t.locals={primaryColor:"#a33e3e",normalColor:"rgba(34, 117, 74, 0.78)",successColor:"#57e39b",warnColor:"#fedf40",warnDarkColor:"#fa8c16",warnLightColor:"#f6b23d",errorColor:"#eb354d",dangerColor:"#c4233e",moneyColor:"#f50",infoColor:"rgba(0, 104, 255, 0.65)",headerHeight:"50px",productsColumnWidth:"220px","layout-header-menu-search-border":"index__layout-header-menu-search-border--3ZuNP","vertical-center":"index__vertical-center--y4FXI",main:"index__main--TubAm","left-side":"index__left-side--pbUVD","right-side":"index__right-side--3v5zG"}},198775:(e,t,a)=>{"use strict";var r=a(818565),n=a(213696),l=a(303787),i=a(810732),o=a(532462),s=a(110819),u=a(722338),d=a(633950),c=a(548924);d(t,"__esModule",{value:!0}),t.default=t.ServerGroupInstanceStore=void 0;var f=c(a(424836)),p=c(a(89195)),h=c(a(532462)),m=c(a(877879)),g=c(a(601839)),v=c(a(549849)),y=a(83575),b=c(a(381891)),_=["all_projects","members","isServerGroup"];function S(e,t){var a=r(e);if(n){var o=n(e);t&&(o=l(o).call(o,(function(t){return i(e,t).enumerable}))),a.push.apply(a,o)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a,r,n=null!=arguments[t]?arguments[t]:{};t%2?o(a=S(Object(n),!0)).call(a,(function(t){(0,m.default)(e,t,n[t])})):s?u(e,s(n)):o(r=S(Object(n))).call(r,(function(t){d(e,t,i(n,t))}))}return e}class w extends b.default{get listResponseKey(){return"servers"}get paramsFunc(){return e=>{var{all_projects:t,members:a,isServerGroup:r}=e;return(0,v.default)(e,_)}}get groupArraySize(){return 1}requestList(e,t){var a=this;return(0,g.default)((function*(){var{members:r,isServerGroup:n,all_projects:l}=t;if(r&&n&&0===r.length)return[];var i=(0,y.groupArray)(r,a.groupArraySize),o=yield f.default.all((0,p.default)(i).call(i,(t=>{var r=x(x({},e),{},{uuid:t,all_projects:l});return a.skylineClient.extension.servers(r)}))),s=[];return(0,h.default)(o).call(o,(e=>{s.push(...e[a.listResponseKey])})),s}))()}listDidFetch(e){return(0,g.default)((function*(){return 0===e.length?e:(0,p.default)(e).call(e,(e=>x(x({},e),{},{tags:(e.origin_data||{}).tags||[]})))}))()}}t.ServerGroupInstanceStore=w;var C=new w;t.default=C},202999:(e,a,r)=>{"use strict";var n=r(471742),l=r(633950),i=r(810732),o=r(548924);l(a,"__esModule",{value:!0}),a.default=void 0,r(541135);var s=o(r(465093)),u=o(r(877879)),d=function(e,t){if("function"==typeof n)var a=new n,r=new n;return function(e,t){if(!t&&e&&e.__esModule)return e;var n,o,s={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return s;if(n=t?r:a){if(n.has(e))return n.get(e);n.set(e,s)}for(var u in e)"default"!==u&&{}.hasOwnProperty.call(e,u)&&((o=(n=l)&&i(e,u))&&(o.get||o.set)?n(s,u,o):s[u]=e[u]);return s}(e,t)}(r(823872)),c=o(r(690132)),f=o(r(61296));r(877800);class p extends d.Component{constructor(){super(...arguments),(0,u.default)(this,"renderTable",(()=>{var{data:e,columns:t,hasPagination:a}=this.props,r={columns:t,dataSource:e};return a||(r.pagination=!1),d.default.createElement(s.default,r)}))}static propTypes(){return{title:f.default.string.isRequired,buttonType:f.default.string,isDanger:f.default.bool,data:f.default.array,columns:f.default.array,modalSize:f.default.string,className:f.default.func,buttonText:f.default.string,style:f.default.string,hasPagination:f.default.bool}}render(){var{buttonType:e,isDanger:t,title:a,buttonText:r,modalSize:n,style:l}=this.props,i={buttonType:e,isDanger:t,title:a,buttonText:r,modalSize:n,style:l,render:this.renderTable};return d.default.createElement(c.default,i)}}a.default=p,(0,u.default)(p,"defaultProps",{buttonType:"link",isDanger:!1,data:[],columns:[],modalSize:"middle",className:"",buttonText:t("View Detail"),title:t("Detail"),hasPagination:!0})},208383:(e,t,a)=>{"use strict";var r=a(818565),n=a(213696),l=a(303787),i=a(810732),o=a(532462),s=a(110819),u=a(722338),d=a(633950),c=a(548924);d(t,"__esModule",{value:!0}),t.default=t.InstanceSnapshotStore=void 0;var f=c(a(303787)),p=c(a(424836)),h=c(a(532462)),m=c(a(68982)),g=c(a(89195)),v=c(a(601839)),y=c(a(549849)),b=c(a(877879)),_=c(a(748123)),S=c(a(892621)),x=a(593651),w=c(a(381891)),C=["id","current","owner"];function k(e,t){var a=r(e);if(n){var o=n(e);t&&(o=l(o).call(o,(function(t){return i(e,t).enumerable}))),a.push.apply(a,o)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a,r,n=null!=arguments[t]?arguments[t]:{};t%2?o(a=k(Object(n),!0)).call(a,(function(t){(0,b.default)(e,t,n[t])})):s?u(e,s(n)):o(r=k(Object(n))).call(r,(function(t){d(e,t,i(n,t))}))}return e}class P extends w.default{constructor(){super(...arguments),(0,b.default)(this,"updateParamsSortPage",((e,t,a)=>{t&&a&&(e.sort_key=t,e.sort_dir="descend"===a?"desc":"asc")})),(0,b.default)(this,"updateParamsSort",this.updateParamsSortPage)}get client(){return S.default.glance.images}get listFilterByProject(){return!0}get fetchListByLimit(){return!0}get paramsFunc(){return this.paramsFuncPage}get paramsFuncPage(){return(e,t)=>{var{id:a,current:r,owner:n}=e,l=I({},(0,y.default)(e,C));return n?l.owner=n:t||(l.owner=this.currentProjectId),l}}get mapperBeforeFetchProject(){return e=>I(I({},e),{},{project_name:e.owner_project_name||e.project_name,project_id:e.owner||e.project_id})}listDidFetch(e,t,a){return(0,v.default)((function*(){if(0===e.length)return e;var r=(0,f.default)(e).call(e,x.isSnapshot),{id:n}=a;if(!n)return r;var l={all_tenants:t},i=yield p.default.all([S.default.cinder.snapshots.list(l),S.default.nova.servers.volumeAttachments.list(n,{})]),o=i[0].snapshots,s=i[1].volumeAttachments,u=[];return(0,h.default)(r).call(r,(e=>{var{block_device_mapping:t="[]",instance_id:a}=e;if(a===n)u.push(e);else{var r,l=(0,m.default)(r=JSON.parse(t)).call(r,(e=>0===e.boot_index));if(l){e.snapshotId=l.snapshot_id;var i=(0,m.default)(o).call(o,(e=>e.id===l.snapshot_id));if(i){var d=i.volume_id;(0,m.default)(s).call(s,(e=>e.volumeId===d))&&u.push(e)}}else{var{instance_uuid:c}=e;n===c&&u.push(e)}}})),u}))()}detailDidFetch(e){return(0,v.default)((function*(){var t;e.originData=I({},e);var{block_device_mapping:a="[]"}=e,r=(0,m.default)(t=JSON.parse(a)).call(t,(e=>0===e.boot_index)),n=null,l="";if(r){var{snapshot_id:i}=r;e.snapshotId=i;var o=(yield S.default.cinder.snapshots.show(i)).snapshot;e.snapshotDetail=o;var{volume_id:s}=o,u=(yield S.default.cinder.volumes.show(s)).volume;e.volumeDetail=u,n=u.attachments.length>0?u.attachments[0].server_id:""}else{var{instance_uuid:d}=e;n=d}var c={};try{if(n){c=yield S.default.nova.servers.show(n);var{server:{name:f}={}}=c;l=f}}catch(e){}return e.instance={server_id:n,server_name:l},e.instanceDetail=c.server||{},e}))()}fetchInstanceSnapshotVolumeData(e){var t=this;return(0,v.default)((function*(){var{id:a}=e,r=yield t.client.show(a),n=yield t.detailDidFetch(r),{block_device_mapping:l="[]"}=n,i=JSON.parse(l)||[];if(null==i||!i.length)return n;var o=null==i?void 0:(0,f.default)(i).call(i,(e=>0!==e.boot_index)),s=(0,g.default)(o).call(o,function(){var e=(0,v.default)((function*(e){var t=(0,_.default)(e),{snapshot_id:a}=e,r=yield S.default.cinder.snapshots.show(a),n=(null==r?void 0:r.snapshot)||{};return t.snapshotDetail=n,t.bdmFormatData=e,t}));return function(t){return e.apply(this,arguments)}}()),u=yield p.default.all(s),d=(0,g.default)(u).call(u,function(){var e=(0,v.default)((function*(e){var{volume_id:t}=e.snapshotDetail,a=yield S.default.cinder.volumes.show(t),r=(null==a?void 0:a.volume)||{};return e.volumeDetail=r,e}));return function(t){return e.apply(this,arguments)}}()),c=yield p.default.all(d);return I(I({},n),{},{instanceSnapshotDataVolumes:c})}))()}}t.InstanceSnapshotStore=P;var D=new P;t.default=D},227180:(e,a,r)=>{"use strict";var n=r(633950),l=r(548924);n(a,"__esModule",{value:!0}),a.default=void 0;var i=l(r(937267)),o=l(r(829290)),s=l(r(509667)),u=l(r(38122)),d=l(r(439149)),c=l(r(246987)),f=l(r(644526)),p=l(r(759844)),h=l(r(94030)),m=l(r(945805)),g=l(r(893976)),v=l(r(723063)),y=l(r(156695)),b=l(r(983867)),_=l(r(842369)),S=l(r(389287)),x=l(r(143753)),w=l(r(124403)),C=l(r(50750)),k={title:t("Data Protection"),actions:[f.default,g.default,b.default,m.default,u.default]},I={title:t("Instance Related"),actions:[C.default,w.default,d.default,c.default]},P={title:t("Capacity & Type"),actions:[p.default,h.default]},D={rowActions:{firstAction:o.default,moreActions:[k,I,P,{action:s.default},{action:S.default},{action:x.default}]},batchActions:[s.default],primaryActions:[i.default,_.default]},T={rowActions:{firstAction:o.default,moreActions:[k,I,P,{action:s.default},{action:S.default},{action:x.default}]},batchActions:[],primaryActions:[]},A={rowActions:{firstAction:s.default,moreActions:[{action:v.default},{action:y.default}]},batchActions:[s.default],primaryActions:[]},R={rowActions:{firstAction:v.default,moreActions:[{action:y.default}]},batchActions:[],primaryActions:[]};a.default={actionConfigs:D,adminConfig:A,instanceDetailConfig:T,instanceDetailAdminConfig:R}},230707:(e,t,a)=>{(t=e.exports=a(840049)(!1)).push([e.id,"/* stylelint-disable at-rule-empty-line-before,at-rule-name-space-after,at-rule-no-unknown */\n/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n/* init */\n/* specific color */\n/*  border */\n/*  input */\n/*  background */\n/* button */\n/*  shadow */\n/*  font */\n/*  animation */\n/*  size */\n/*  sider */\n.style__layout-header-menu-search-border--12rdf {\n  border: none;\n}\n.style__vertical-center--3UMwq {\n  position: absolute;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n          transform: translateY(-50%);\n}\n/* login */\n.style__container--3Y09L {\n  height: 100%;\n  padding: 16px;\n  overflow: auto;\n}\n.style__container--3Y09L .style__main-icon--1ECQa {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n}\n.style__container--3Y09L .style__action-button--2uJsF {\n  color: #252525;\n  font-size: 18px;\n  line-height: 88px;\n  background: #fff;\n  border-radius: 2px;\n  -webkit-box-shadow: 0 2px 20px 0 rgba(0, 0, 0, 0.09);\n          box-shadow: 0 2px 20px 0 rgba(0, 0, 0, 0.09);\n  opacity: 0.9;\n}\n.style__container--3Y09L .style__action-icon--3cQV7 {\n  display: block;\n  width: 50px;\n  height: 50px;\n  margin-left: 60px;\n}\n.style__container--3Y09L .ant-card {\n  -webkit-box-shadow: 0 2px 20px 0 rgba(0, 0, 0, 0.09);\n          box-shadow: 0 2px 20px 0 rgba(0, 0, 0, 0.09);\n}\n.style__container--3Y09L .ant-card-head {\n  font-size: 16px;\n}\n.style__container--3Y09L .ant-col-6 {\n  display: block;\n  -webkit-box-flex: 0;\n      -ms-flex: 0 0 20%;\n          flex: 0 0 20%;\n  max-width: 25%;\n}\n.style__container--3Y09L .style__left--2FbNm {\n  height: 100%;\n}\n.style__container--3Y09L .style__left--2FbNm .style__top--3UBpB .style__title--18DKB {\n  display: table-cell;\n  vertical-align: bottom;\n}\n.style__container--3Y09L .style__left--2FbNm .style__top--3UBpB .style__title--18DKB .style__text--2ZnVb {\n  color: #252525;\n  font-size: 21px;\n}\n.style__container--3Y09L .style__left--2FbNm .style__top--3UBpB .style__title--18DKB .style__action--1T3zl {\n  margin-left: 40px;\n  color: #000;\n  font-size: 16px;\n}\n.style__container--3Y09L .style__right--18Zal {\n  height: 100%;\n}\n.style__container--3Y09L .style__right--18Zal .style__project--2WhsJ {\n  position: relative;\n}\n.style__container--3Y09L .style__right--18Zal .style__project--2WhsJ .style__meta--VzBqf {\n  margin-bottom: 16px;\n  padding-bottom: 16px;\n  border-bottom: 1px dashed #e8e8e8;\n}\n.style__container--3Y09L .style__right--18Zal .style__project--2WhsJ .ant-descriptions-item-label {\n  width: 130px;\n}\n.style__outer--GK3KD {\n  position: relative;\n  width: 100%;\n  height: 10rem;\n  overflow: hidden;\n  font-size: 12px;\n}\n.style__outer--GK3KD .style__inner--19_DW {\n  position: absolute;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  overflow-x: hidden;\n  overflow-y: scroll;\n}\n.style__outer--GK3KD .style__inner--19_DW::-webkit-scrollbar {\n  display: none;\n}\n.style__bottom--1cuhB {\n  border-radius: 2px;\n}\n.style__bottom--1cuhB .ant-card {\n  -webkit-box-shadow: unset;\n          box-shadow: unset;\n}\n.style__bottom--1cuhB .ant-card-body {\n  padding: 0 !important;\n}\n.style__bottom--1cuhB .style__title--18DKB .style__text--2ZnVb {\n  color: #252525;\n  font-size: 16px;\n}\n.style__bottom--1cuhB .style__title--18DKB .style__badge--1KS_6 {\n  margin-left: 22px;\n}\n.style__bottom--1cuhB .style__title--18DKB .style__badge--1KS_6 .ant-badge-status-dot {\n  width: 10px;\n  height: 10px;\n}\n.style__bottom--1cuhB .style__title--18DKB .style__badge--1KS_6 .ant-badge-status-text {\n  font-size: 14px;\n}\n.style__bottom--1cuhB .style__action--1T3zl {\n  float: right;\n  margin-top: 6px;\n  color: #a33e3e;\n  font-size: 12px;\n  cursor: pointer;\n}\n.style__bottom--1cuhB .style__content--1BVOG .style__card--3BNS7 {\n  padding: 8px;\n}\n.style__bottom--1cuhB .style__content--1BVOG .style__card--3BNS7 .ant-card-head {\n  border-bottom: none;\n}\n.style__bottom--1cuhB .style__content--1BVOG .style__card--3BNS7 .ant-card-head .ant-card-head-title {\n  padding-bottom: 0;\n  color: #565656;\n  font-weight: 500;\n  font-size: 16px;\n}\n.style__bottom--1cuhB .style__content--1BVOG .style__card--3BNS7 .ant-card-body {\n  padding: 12px !important;\n  -webkit-box-shadow: unset !important;\n          box-shadow: unset !important;\n}\n.style__bottom--1cuhB .style__content--1BVOG .style__card--3BNS7 .style__progress-title--1khEP {\n  overflow: hidden;\n  font-size: 14px;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n",""]),t.locals={primaryColor:"#a33e3e",normalColor:"rgba(34, 117, 74, 0.78)",successColor:"#57e39b",warnColor:"#fedf40",warnDarkColor:"#fa8c16",warnLightColor:"#f6b23d",errorColor:"#eb354d",dangerColor:"#c4233e",moneyColor:"#f50",infoColor:"rgba(0, 104, 255, 0.65)",headerHeight:"50px",productsColumnWidth:"220px","layout-header-menu-search-border":"style__layout-header-menu-search-border--12rdf","vertical-center":"style__vertical-center--3UMwq",container:"style__container--3Y09L","main-icon":"style__main-icon--1ECQa","action-button":"style__action-button--2uJsF","action-icon":"style__action-icon--3cQV7",left:"style__left--2FbNm",top:"style__top--3UBpB",title:"style__title--18DKB",text:"style__text--2ZnVb",action:"style__action--1T3zl",right:"style__right--18Zal",project:"style__project--2WhsJ",meta:"style__meta--VzBqf",outer:"style__outer--GK3KD",inner:"style__inner--19_DW",bottom:"style__bottom--1cuhB",badge:"style__badge--1KS_6",content:"style__content--1BVOG",card:"style__card--3BNS7","progress-title":"style__progress-title--1khEP"}},246987:(e,a,r)=>{"use strict";var n=r(633950),l=r(548924);n(a,"__esModule",{value:!0}),a.default=a.Detach=void 0;var i=l(r(89195)),o=l(r(303787)),s=l(r(29672)),u=l(r(424836)),d=l(r(819989)),c=l(r(113635)),f=l(r(601839)),p=l(r(877879)),h=r(87067),m=r(860615),g=l(r(899196)),v=r(198775),y=r(505997),b=r(492325);class _ extends m.ModalAction{constructor(){super(...arguments),(0,p.default)(this,"disabledInstance",(e=>!(0,b.allowAttachVolumeInstance)(e))),(0,p.default)(this,"onSubmit",(e=>{var{instance:t}=e,{id:a}=this.item,{selectedRowKeys:r}=t,n=r[0];return this.store.detachVolume({id:n,volumes:[a]})}))}get name(){return t("Detach")}init(){this.store=g.default,this.instanceStore=new v.ServerGroupInstanceStore,this.getInstances(),this.state.autoSelectInstance=null}static get modalSize(){return"large"}getModalSize(){return"large"}get instances(){var e,t=this.instanceStore.list.data||[],a=(0,i.default)(e=this.item.attachments||[]).call(e,(e=>e.server_id));return a&&0!==a.length?(0,o.default)(t).call(t,(e=>(0,s.default)(a).call(a,e.id))):[]}getInstances(){var e=this;return(0,f.default)((function*(){var t,a=(0,i.default)(t=e.item.attachments||[]).call(t,(e=>e.server_id));if(yield e.instanceStore.fetchList({members:a}),e.instances&&1===e.instances.length){var[{id:r}]=e.instances,n={selectedRowKeys:[r]};e.setState({autoSelectInstance:n},(()=>{var t=()=>{var t;return null===(t=e.formRef)||void 0===t||null===(t=t.current)||void 0===t?void 0:t.setFieldsValue({instance:n})};t()||u.default.resolve().then(t)}))}}))()}get defaultValue(){var e,t,{name:a,size:r,volume_type:n}=this.item;return{volume:(0,d.default)(e=(0,d.default)(t="".concat(a,"(")).call(t,n," | ")).call(e,r,"GiB)")}}get formItems(){var{autoSelectInstance:e}=this.state;return[{name:"volume",label:t("Volume"),type:"label",iconType:"volume"},{name:"instance",label:t("Instance"),type:"select-table",required:!0,data:this.instances,initValue:e||{},filterParams:[{label:t("Name"),name:"name"}],columns:b.instanceColumnsBackend,isLoading:this.instanceStore.list.isLoading,disabledFunc:this.disabledInstance}]}}a.Detach=_,(0,p.default)(_,"id","detach"),(0,p.default)(_,"title",t("Detach")),(0,p.default)(_,"isDanger",!0),(0,p.default)(_,"policy","os_compute_api:os-volumes-attachments:delete"),(0,p.default)(_,"allowed",(e=>u.default.resolve((0,y.isInUse)(e)&&!(0,y.isOsDisk)(e)&&(0,c.default)(e.attachments)&&e.attachments.length)));a.default=(0,h.inject)("rootStore")((0,h.observer)(_))},252786:(e,a,r)=>{"use strict";var n=r(818565),l=r(213696),i=r(303787),o=r(810732),s=r(532462),u=r(110819),d=r(722338),c=r(633950),f=r(548924);c(a,"__esModule",{value:!0}),a.default=a.BaseStep=void 0;var p=f(r(424836)),h=f(r(89195)),m=f(r(303787)),g=f(r(68982)),v=f(r(75613)),y=f(r(548222)),b=f(r(148083)),_=f(r(303884));r(851011);var S=f(r(328153));r(710953);var x=f(r(430519)),w=f(r(601839)),C=f(r(877879)),k=f(r(823872)),I=r(87067),P=r(127567),D=(r(877800),r(505997)),T=f(r(899196)),A=f(r(341832)),R=f(r(208383)),F=f(r(812941)),E=f(r(320253)),N=r(342616),M=r(593651),j=f(r(978711)),B=f(r(921314)),L=r(578452),V=r(90727),O=f(r(155674));function z(e,t){var a=n(e);if(l){var r=l(e);t&&(r=i(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function q(e){for(var t=1;t<arguments.length;t++){var a,r,n=null!=arguments[t]?arguments[t]:{};t%2?s(a=z(Object(n),!0)).call(a,(function(t){(0,C.default)(e,t,n[t])})):u?d(e,u(n)):s(r=z(Object(n))).call(r,(function(t){c(e,t,o(n,t))}))}return e}class K extends j.default{constructor(){var e;super(...arguments),e=this,(0,C.default)(this,"allowed",(()=>p.default.resolve())),(0,C.default)(this,"onImageTabChange",(e=>{this.setState({imageTab:e})})),(0,C.default)(this,"checkSystemDisk",((e,a)=>{var{size:r=10,type:n}=a||{},l=this.getSystemDiskMinSize();return n?r?r<l?p.default.reject(new Error(t("Please set a size no less than {minSize} GiB!",{minSize:l}))):p.default.resolve():p.default.reject(new Error(t("Please set the system disk size!"))):p.default.reject("")})),(0,C.default)(this,"onFlavorChange",(e=>{this.updateContext({flavor:e})})),(0,C.default)(this,"onChangeBootFromVolume",(e=>{var t={bootFromVolume:e};e||(t.dataDisk=[],this.updateFormValue("dataDisk",[])),this.updateContext(t)})),(0,C.default)(this,"onInstanceSnapshotChange",function(){var t=(0,w.default)((function*(t){var{min_disk:a,size:r,virtual_size:n,id:l}=t.selectedRows[0]||{};if(!l)return e.updateContext({instanceSnapshotDisk:null,instanceSnapshotDataVolumes:[]}),void e.setState({instanceSnapshotDisk:null,instanceSnapshotMinSize:0,instanceSnapshotDataVolumes:[]});e.setState({instanceSnapshotMinSize:e.getMaxOfImageOrSnapshot(a,r,n)}),e.fetchSnapshotVolumeDataAsync(l,a,r,n)}));return function(e){return t.apply(this,arguments)}}()),(0,C.default)(this,"fetchSnapshotVolumeDataAsync",function(){var t=(0,w.default)((function*(t,a,r,n){try{var l=yield e.instanceSnapshotStore.fetchInstanceSnapshotVolumeData({id:t}),{block_device_mapping:i="",volumeDetail:o,snapshotDetail:s,instanceSnapshotDataVolumes:u=[]}=l;if(!o)return e.updateFormValue("bootFromVolume",!0),e.updateContext({instanceSnapshotDisk:null,instanceSnapshotDataVolumes:[],bootFromVolume:!0}),void e.setState({instanceSnapshotDisk:null,instanceSnapshotDataVolumes:[],bootFromVolume:!0});var d=(JSON.parse(i)||[])[0]||{},c=(0,V.getDiskInfo)({volumeDetail:o,snapshotDetail:s,selfBdmData:d});e.updateFormValue("instanceSnapshotDisk",c),e.updateContext({instanceSnapshotDisk:c,instanceSnapshotDataVolumes:u}),e.setState({instanceSnapshotDisk:c,instanceSnapshotMinSize:e.getMaxOfImageOrSnapshot(a,r,n),instanceSnapshotDataVolumes:u})}catch(e){}}));return function(e,a,r,n){return t.apply(this,arguments)}}()),(0,C.default)(this,"onBootableVolumeChange",(e=>{this.updateContext({bootableVolume:e})})),(0,C.default)(this,"onSystemDiskChange",(e=>{this.updateContext({systemDisk:e})})),(0,C.default)(this,"onDataDiskChange",(e=>{this.updateContext({dataDisk:e})})),(0,C.default)(this,"getInstanceSnapshotDisk",(()=>{var{instanceSnapshotDisk:e}=this.state,{instanceSnapshotDisk:t}=this.props.context;return e||t})),(0,C.default)(this,"getSnapshotDataDisks",(()=>{var{instanceSnapshotDataVolumes:e}=this.state,{instanceSnapshotDataVolumes:t}=this.props.context;return e||t||[]})),(0,C.default)(this,"renderInstanceSnapshotDisk",(e=>{if(null===e)return null;var{deleteTypeLabel:a,typeOption:r={},size:n}=e||{};if(!n)return null;var l={marginRight:10,maxWidth:"20%"};return k.default.createElement(S.default,{gutter:24},k.default.createElement(x.default,{span:8},k.default.createElement("span",{style:l},t("Type")),r.label),k.default.createElement(x.default,{span:8},k.default.createElement("span",{style:l},t("Size")),n,k.default.createElement("span",{style:l},"GiB")),k.default.createElement(x.default,{span:8},a))})),(0,C.default)(this,"renderSnapshotDisk",(()=>{var e=this.getInstanceSnapshotDisk();return this.renderInstanceSnapshotDisk(e)})),(0,C.default)(this,"renderSnapshotDataDisk",(()=>{var e=this.getSnapshotDataDisks();return k.default.createElement(k.default.Fragment,null,null==e?void 0:(0,h.default)(e).call(e,(e=>{var t=(0,V.getInstanceSnapshotDataDisk)(e),a=(null==e?void 0:e.id)||(null==e?void 0:e.snapshot_id);return k.default.createElement("div",{style:{marginBottom:10},key:"data-disk-".concat(a)},this.renderInstanceSnapshotDisk(t))})))}))}init(){this.serverStore=T.default,this.imageStore=A.default,this.volumeStore=new N.VolumeStore,this.volumeTypeStore=F.default,this.instanceSnapshotStore=R.default,this.getAvailZones(),this.getImages(),this.getVolumeTypes(),this.getVolumes(),this.getInstanceSnapshots(),this.initSourceChange()}get title(){return"BaseStep"}get name(){return"BaseStep"}get isStep(){return!0}get defaultValue(){var{volume:e,snapshot:t}=this.locationParams,a=this.imageSourceType;e?a=this.volumeSourceType:t&&(a=this.snapshotSourceType);var r={systemDisk:this.getDefaultSystemDisk(),source:a,project:this.currentProjectName,dataDisk:[]};return"image"===a.value&&(r.bootFromVolume=!0),r}get availableZones(){var e,t;return(0,h.default)(e=(0,m.default)(t=E.default.list.data||[]).call(t,(e=>e.zoneState.available))).call(e,(e=>({value:e.zoneName,label:e.zoneName})))}get images(){var{imageTab:e}=this.state,{image:t}=this.locationParams,a=t?[(0,P.toJS)(this.imageStore.detail)]:this.imageStore.list.data||[],r=(0,m.default)(a).call(a,(t=>!!(0,M.canImageCreateInstance)(t)&&(e?(0,M.getImageOS)(t)===e:t)));return(0,h.default)(r).call(r,(e=>q(q({},e),{},{key:e.id})))}get snapshots(){var{snapshot:e}=this.locationParams;if(!e){var{list:{data:t}}=this.instanceSnapshotStore;return t||[]}return[(0,P.toJS)(this.instanceSnapshotStore.detail)]}get enableCinder(){return this.props.rootStore.checkEndpoint("cinder")}get volumeTypes(){return(0,V.volumeTypes)()}get volumes(){var e,t,a,{volume:r}=this.locationParams;return r?(0,m.default)(a=[(0,P.toJS)(this.volumeStore.detail)]).call(a,(e=>(0,D.canCreateInstance)(e))):(0,h.default)(e=(0,m.default)(t=this.volumeStore.list.data||[]).call(t,(e=>(0,D.canCreateInstance)(e)))).call(e,(e=>q(q({},e),{},{key:e.id})))}get defaultVolumeType(){return{size:10,deleteType:1}}getDefaultSystemDisk(){return{size:1,deleteType:1}}get sourceTypes(){var{image:e,snapshot:a,volume:r}=this.locationParams,n=[{label:t("Image"),value:"image",disabled:r||a},{label:t("Instance Snapshot"),value:"instanceSnapshot",disabled:e||r}];return this.enableCinder&&n.push({label:t("Bootable Volume"),value:"bootableVolume",disabled:e||a}),n}get imageSourceType(){var e;return(0,g.default)(e=this.sourceTypes).call(e,(e=>"image"===e.value))}get snapshotSourceType(){var e;return(0,g.default)(e=this.sourceTypes).call(e,(e=>"instanceSnapshot"===e.value))}get volumeSourceType(){var e;return this.enableCinder?(0,g.default)(e=this.sourceTypes).call(e,(e=>"bootableVolume"===e.value)):{}}getAvailZones(){var e=this;return(0,w.default)((function*(){yield E.default.fetchListWithoutDetail(),e.availableZones.length&&e.updateFormValue("availableZone",e.availableZones[0])}))()}getImages(){var e=this;return(0,w.default)((function*(){var{volume:t,image:a,snapshot:r}=e.locationParams;t||r||(a?yield e.imageStore.fetchDetail({id:a}):yield e.imageStore.fetchList({all_projects:e.hasAdminRole}))}))()}getVolumeTypes(){var e=this;return(0,w.default)((function*(){e.enableCinder&&(yield e.volumeTypeStore.fetchList())}))()}getVolumes(){var e=this;return(0,w.default)((function*(){var{image:t,snapshot:a,volume:r}=e.locationParams;t||a||e.enableCinder&&(r?(yield e.volumeStore.fetchDetail({id:r}),e.updateContext({source:e.volumeSourceType})):yield e.volumeStore.fetchList({sortKey:"bootable",sortOrder:"ascend"}))}))()}getInstanceSnapshots(){var e=this;return(0,w.default)((function*(){var{image:t,snapshot:a,volume:r}=e.locationParams;t||r||(a?yield e.instanceSnapshotStore.fetchDetail({id:a}):e.instanceSnapshotStore.fetchList())}))()}get systemTabs(){var e,t=this.imageStore.list.data||[],a=(0,h.default)(e=(0,m.default)(t).call(t,(e=>"active"===e.status))).call(e,(e=>q(q({},e),{},{key:e.id}))),r=(0,M.getImageSystemTabs)()||[];return(0,m.default)(r).call(r,(e=>(0,v.default)(a).call(a,(t=>(0,M.getImageOS)(t)===e.value))))}get nameForStateUpdate(){return["source","image","instanceSnapshot","bootableVolume","flavor","bootFromVolume"]}getMaxOfImageOrSnapshot(e,t,a){var r=Math.ceil(t/1024/1024/1024),n=Math.ceil(a/1024/1024/1024);return Math.max(e,r,n)}getMinMemoryForFlavor(){var e=0;if(this.sourceTypeIsImage){var{min_ram:t=0}=this.state.image||{},a=Math.ceil(t/1024);e=Math.max(e,a)}if(this.sourceTypeIsSnapshot){var{min_ram:r=0}=this.state.instanceSnapshot||{},n=Math.ceil(r/1024);e=Math.max(e,n)}return e}getMinDiskSizeForFlavor(){var e=0;if(this.sourceTypeIsImage){var{min_disk:t=0,size:a=0,virtual_size:r=0}=this.state.image||{},n=this.getMaxOfImageOrSnapshot(t,a,r);e=Math.max(e,n)}if(this.sourceTypeIsSnapshot){var{instanceSnapshotMinSize:l=0}=this.state;e=Math.max(e,l,1)}return e}getSystemDiskMinSize(){var e,{systemDisk:t}=this.props.context,a=null==t||null===(e=t.typeOption)||void 0===e||null===(e=e.originData)||void 0===e?void 0:e.extra_specs,r=null==a?void 0:a["provisioning:min_vol_size"],n=1;if(r){var l=(0,y.default)(r,10);(0,b.default)(l)||(n=Math.max(n,l))}if(this.sourceTypeIsImage){var{min_disk:i=0,size:o=0,virtual_size:s=0}=this.state.image||{},u=this.getMaxOfImageOrSnapshot(i,o,s);n=Math.max(n,u)}if(this.sourceTypeIsSnapshot){var{instanceSnapshotMinSize:d=0}=this.state;n=Math.max(n,d,1)}return n}get sourceTypeIsImage(){var{source:e}=this.state;return e===this.imageSourceType.value}get sourceTypeIsSnapshot(){var{source:e}=this.state;return e===this.snapshotSourceType.value}get sourceTypeIsVolume(){var{source:e}=this.state;return e===this.volumeSourceType.value}getImageExtraWords(){var{flavor:{category:e}={}}=this.state;return(0,L.isGpuCategory)(e)?t("For GPU type, you need to install GPU drivers in the instance operating system."):""}initSourceChange(){var{snapshot:e,volume:t}=this.locationParams;e?this.onSourceChange(this.snapshotSourceType):t?this.onSourceChange(this.volumeSourceType):this.onSourceChange(this.imageSourceType)}onSourceChange(e){this.updateContext({source:e})}get imageColumns(){return(0,M.getImageColumns)(this)}get instanceSnapshotColumns(){return[{title:t("Name"),dataIndex:"name"},{title:t("Disk Format"),dataIndex:"disk_format",valueMap:M.imageFormats},{title:t("Min System Disk"),dataIndex:"min_disk",unit:"GiB"},{title:t("Min Memory"),dataIndex:"min_ram",render:e=>"".concat(e/1024,"GiB")},{title:t("Status"),dataIndex:"status",valueMap:M.imageStatus},{title:t("Created At"),dataIndex:"created_at",isHideable:!0,valueRender:"sinceTime"}]}get volumeColumns(){return[{title:t("Name"),dataIndex:"name"},{title:t("Size"),dataIndex:"size",unit:"GiB",width:80},{title:t("Status"),dataIndex:"status",valueMap:D.volumeStatus,width:80},{title:t("Type"),dataIndex:"volume_type"},{title:t("Created At"),dataIndex:"created_at",valueRender:"sinceTime"}]}get supportNoBootFromVolume(){return!0}get showBootFromVolumeFormItem(){return!!this.supportNoBootFromVolume&&(!!this.enableCinder&&(!!this.sourceTypeIsImage||this.showSystemDisk))}get bootFromVolumeOptions(){return[{value:!0,label:t("Yes - Create a new system disk")},{value:!1,label:t("No - Do not create a new system disk")}]}get showSystemDisk(){var e=this.getInstanceSnapshotDisk();return this.enableCinder&&(this.sourceTypeIsImage||this.sourceTypeIsSnapshot&&null===e)}get showSystemDiskByBootFromVolume(){if(!this.showSystemDisk)return!1;if(!this.supportNoBootFromVolume)return!0;var{bootFromVolume:e=!0}=this.state;return!!e}get hideInstanceSnapshotSystemDisk(){return this.showSystemDisk||this.sourceTypeIsVolume}get hideInstanceSnapshotDataDisk(){return!!this.hideInstanceSnapshotSystemDisk||0===this.getSnapshotDataDisks().length}get hideDataDisk(){if(!this.supportNoBootFromVolume)return!1;if(this.sourceTypeIsVolume)return!1;var{bootFromVolume:e=!0}=this.state;return!e}getFlavorComponent(e){return k.default.createElement(O.default,(0,_.default)({onChange:this.onFlavorChange},e))}get formItems(){var{image:e}=this.locationParams,a=e?this.imageStore.isLoading:this.imageStore.list.isLoading,r=this.systemTabs;return r&&0!==r.length?[{name:"project",label:t("Project"),type:"label"},{name:"availableZone",label:t("Available Zone"),type:"select",placeholder:t("Please select"),isWrappedValue:!0,required:!0,options:this.availableZones,tip:t("Availability zone refers to a physical area where power and network are independent of each other in the same area. In the same region, the availability zone and the availability zone can communicate with each other in the intranet, and the available zones can achieve fault isolation.")},{type:"divider"},{name:"source",label:t("Start Source"),type:"radio",options:this.sourceTypes,required:!0,isWrappedValue:!0,tip:t("The start source is a template used to create an instance. You can choose an image or a bootable volume."),onChange:e=>{this.onSourceChange(e)}},{name:"image",label:t("Operating System"),type:"select-table",data:this.images,isLoading:a,required:this.sourceTypeIsImage,isMulti:!1,display:this.sourceTypeIsImage,extra:this.getImageExtraWords(),filterParams:[{label:t("Name"),name:"name"}],columns:this.imageColumns,tabs:r,defaultTabValue:this.locationParams.os_distro||r[0].value,selectedLabel:t("Image"),onTabChange:this.onImageTabChange},{name:"instanceSnapshot",label:t("Instance Snapshot"),type:"select-table",data:this.snapshots,required:this.sourceTypeIsSnapshot,isMulti:!1,hidden:!this.sourceTypeIsSnapshot,display:this.sourceTypeIsSnapshot,onChange:this.onInstanceSnapshotChange,filterParams:[{label:t("Name"),name:"name"}],columns:this.instanceSnapshotColumns},{name:"bootableVolume",label:t("Bootable Volume"),type:"select-table",data:this.volumes,isLoading:this.volumeStore.list.isLoading,required:this.sourceTypeIsVolume,isMulti:!1,display:this.sourceTypeIsVolume&&this.enableCinder,onChange:this.onBootableVolumeChange,filterParams:[{label:t("Name"),name:"name"}],columns:this.volumeColumns},{type:"divider"},{name:"bootFromVolume",label:t("Boot From Volume"),type:"radio",required:this.showBootFromVolumeFormItem,hidden:!this.showBootFromVolumeFormItem,onChange:this.onChangeBootFromVolume,wrapperCol:{xs:{span:16},sm:{span:14}},options:this.bootFromVolumeOptions},{name:"systemDisk",label:t("System Disk"),type:"instance-volume",options:this.volumeTypes,required:this.showSystemDiskByBootFromVolume,hidden:!this.showSystemDiskByBootFromVolume,validator:this.checkSystemDisk,minSize:this.getSystemDiskMinSize(),extra:t("Disk size is limited by the min disk of flavor, image, etc."),onChange:this.onSystemDiskChange,dependencies:["flavor","image","instanceSnapshot","bootFromVolume"]},{name:"deleteVolumeInstance",label:t("Delete Volume on Instance Delete"),type:"check",hidden:!this.sourceTypeIsVolume},{name:"instanceSnapshotDisk",label:t("System Disk"),hidden:this.hideInstanceSnapshotSystemDisk,component:this.renderSnapshotDisk()},{name:"instanceSnapshotDataDisk",label:t("Required Data Disk"),hidden:this.hideInstanceSnapshotDataDisk,component:this.renderSnapshotDataDisk()},{name:"dataDisk",label:t("Data Disk"),type:"add-select",options:this.volumeTypes,defaultItemValue:this.defaultVolumeType,hidden:this.hideDataDisk,itemComponent:B.default,minCount:0,addTextTips:t("Data Disks"),addText:t("Add Data Disks"),extra:t("Too many disks mounted on the instance will affect the read and write performance. It is recommended not to exceed 16 disks."),onChange:this.onDataDiskChange,display:this.enableCinder},{type:"divider"},{name:"flavor",label:t("Specification"),type:"select-table",component:this.getFlavorComponent({size:this.getMinDiskSizeForFlavor(),memory:this.getMinMemoryForFlavor(),bootFromVolume:this.state.bootFromVolume}),required:!0,wrapperCol:{xs:{span:24},sm:{span:18}}}]:[]}}a.BaseStep=K;a.default=(0,I.inject)("rootStore")((0,I.observer)(K))},273352:(e,a,r)=>{"use strict";var n=r(818565),l=r(213696),i=r(303787),o=r(810732),s=r(532462),u=r(110819),d=r(722338),c=r(633950),f=r(548924);c(a,"__esModule",{value:!0}),a.default=a.StepCreate=void 0,r(81199);var p=f(r(318885)),h=f(r(303884));r(184464);var m=f(r(600590));r(698368);var g=f(r(806174)),v=f(r(549849)),y=f(r(424836)),b=f(r(29672)),_=f(r(994687)),S=f(r(89195)),x=f(r(648188)),w=f(r(819989)),C=f(r(532462)),k=f(r(818565)),I=f(r(360147)),P=f(r(601839)),D=f(r(877879)),T=f(r(785219)),A=f(r(164877)),R=f(r(371573)),F=f(r(823872)),E=r(87067),N=r(127567),M=(r(877800),r(860615)),j=f(r(899196)),B=f(r(452740)),L=f(r(38256)),V=r(492325),O=r(90727),z=r(83575),q=f(r(31170)),K=f(r(16039)),G=f(r(951478)),U=f(r(508929)),Q=f(r(252786)),H=f(r(39513)),W=["add"];function J(e,t){var a=n(e);if(l){var r=l(e);t&&(r=i(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function Y(e){for(var t=1;t<arguments.length;t++){var a,r,n=null!=arguments[t]?arguments[t]:{};t%2?s(a=J(Object(n),!0)).call(a,(function(t){(0,D.default)(e,t,n[t])})):u?d(e,u(n)):s(r=J(Object(n))).call(r,(function(t){c(e,t,o(n,t))}))}return e}class Z extends M.StepAction{constructor(){super(...arguments),(0,D.default)(this,"onCountChange",(e=>{var{data:t}=this.state;this.setState({data:Y(Y({},t),{},{count:e})})})),(0,D.default)(this,"onSubmit",(e=>e?this.store.create(e):(this.errorMsg&&q.default.error(this.errorMsg),y.default.reject()))),(0,D.default)(this,"onOk",(()=>{var{data:e}=this.state;this.values=e;var a=this.getSubmitData(e);a?this.onSubmit(a).then((()=>{this.routing.push(this.listUrl),q.default.success(this.successText)}),(e=>{if(e&&!(0,R.default)(e)){var{response:{data:a}={}}=e||{},{forbidden:{message:r=""}={}}=a||{};r&&(0,T.default)(r)&&(0,b.default)(r).call(r,"Quota exceeded")?q.default.error(t("Quota exceeded")):q.default.errorWithDetail(a,this.errorText)}})):q.default.errorWithDetail(null,this.errorText)}))}init(){this.store=j.default,this.projectStore=B.default,this.state.quotaLoading=!0,this.getQuota(),this.status="success",this.errorMsg=""}static allowed(e,t){var{isAdminPage:a=!1}=t;return y.default.resolve(!a)}getQuota(){var e=this;return(0,P.default)((function*(){e.setState({quotaLoading:!0}),yield y.default.all([e.projectStore.fetchProjectNovaQuota(),e.enableCinder?e.projectStore.fetchProjectCinderQuota():null]),e.setState({quotaLoading:!1}),e.onCountChange(1)}))()}get disableNext(){return!!this.errorMsg}get disableSubmit(){return!!this.errorMsg}get instanceQuota(){var{instances:{left:e=0}={}}=(0,N.toJS)(this.projectStore.novaQuota)||{};return-1===e?1/0:e}get name(){return t("Create instance")}get enableCinder(){return this.props.rootStore.checkEndpoint("cinder")}get listUrl(){var{image:e,volume:t,servergroup:a}=this.locationParams;return e?this.getRoutePath("image"):t?this.getRoutePath("volume"):a?this.getRoutePath("serverGroupDetail",{id:a}):this.getRoutePath("instance")}get hasConfirmStep(){return!1}get steps(){return[{title:t("Base Config"),component:Q.default},{title:t("Network Config"),component:U.default},{title:t("System Config"),component:G.default},{title:t("Confirm Config"),component:K.default}]}get instanceName(){var e,t,{name:a,count:r=1}=(0,_.default)(this)||{};return 1===r?this.unescape(a):this.unescape((0,S.default)(e=(0,x.default)(t=new Array(r)).call(t,r)).call(e,((e,t)=>{var r;return(0,w.default)(r="".concat(a,"-")).call(r,t+1)})).join(", "))}get successText(){return t("The creation instruction was issued successfully, instance: {name}. \n You can wait for a few seconds to follow the changes of the list data or manually refresh the data to get the final display result.",{action:this.name.toLowerCase(),name:this.instanceName})}get showQuota(){return!0}get quotaInfo(){var{quotaLoading:e}=this.state;if(e)return[];var{instances:a={},cores:r={},ram:n={}}=(0,N.toJS)(this.projectStore.novaQuota)||{},{data:l={}}=this.state,{count:i=1}=l,o=this.checkQuotaInput(),s=Y(Y({},a),{},{add:o?0:i,name:"instance",title:t("Instance")}),{newCPU:u,newRam:d}=this.getFlavorInput(),c=Y(Y({},r),{},{add:o?0:u,name:"cpu",title:t("CPU"),type:"line"}),f=Y(Y({},n),{},{add:o?0:d,name:"ram",title:t("Memory (GiB)"),type:"line"}),p=this.getVolumeQuota(),{totalNewCount:h,totalNewSize:m}=this.getVolumeInputMap(),g=Y(Y({},p.volumes),{},{add:o?0:h,name:"volume",title:t("Volume"),type:"line"}),y=Y(Y({},p.gigabytes),{},{add:o?0:m,name:"volumeSize",title:t("Volume Capacity (GiB)"),type:"line"}),b=this.getServerGroupQuota(),_=[s,c,f,g,y];if(b){var{add:S}=b,x=Y(Y({},(0,v.default)(b,W)),{},{add:o?0:S});_.push(x)}return _}get errorText(){var{status:e}=this.state;return"error"===e?t("Unable to create instance: insufficient quota to create resources."):this.ipBatchError?t("Unable to create instance: batch creation is not supported when specifying IP."):t("The creation instruction has been issued, please refresh to see the actual situation in the list.")}getVolumeQuota(){var e,t=(0,N.toJS)(this.projectStore.cinderQuota)||{},a={};return(0,C.default)(e=(0,k.default)(t)).call(e,(e=>{((0,b.default)(e).call(e,"volumes")||(0,b.default)(e).call(e,"gigabytes"))&&(a[e]=t[e])})),a}getQuotaMessage(e,a,r){var{left:n=0}=a||{};return-1===n?"":e>n?t("Insufficient {name} quota to create resources (left { quota }, input { input }).",{name:r,quota:n,input:e}):""}getVolumeInputMap(){var{data:e}=this.state,{systemDisk:t={},dataDisk:a=[],count:r=1,source:{value:n}={},instanceSnapshotDisk:l={},instanceSnapshotDataVolumes:i=[],bootFromVolume:o=!0}=e,s={},u={},d=0,c=0,f="instanceSnapshot"===n;if(f&&l){var{size:p,typeOption:{label:h}={}}=l;h&&o&&(s[h]=s[h]?s[h]+1:1,u[h]=u[h]?u[h]+p:p,d+=1*r,c+=p*r)}else if(t.type&&o){var{size:m}=t,{label:g}=t.typeOption||{};s[g]=s[g]?s[g]+1:1,u[g]=u[g]?u[g]+m:m,d+=1*r,c+=m*r}if(a||f&&(null==i?void 0:i.length)>0){var v=(0,O.getAllDataDisks)({dataDisk:a,instanceSnapshotDataVolumes:i});(0,C.default)(v).call(v,(e=>{var t=e.value||{};if(t.type){var{size:a,typeOption:n}=t,{label:l}=n||{};s[l]=s[l]?s[l]+1*r:1*r,u[l]=u[l]?u[l]+a*r:a*r,d+=1*r,c+=a*r}}))}return{totalNewCount:d,totalNewSize:c,newCountMap:s,newSizeMap:u}}checkVolumeQuota(){var e,a;if(!this.enableCinder)return"";var r="",{totalNewCount:n,totalNewSize:l,newCountMap:i,newSizeMap:o}=this.getVolumeInputMap(),s=this.getVolumeQuota(),u=this.getQuotaMessage(n,s.volumes,t("volume"));if(u)return u;var d=this.getQuotaMessage(l,s.gigabytes,t("volume capacity"));return d||((0,C.default)(e=(0,k.default)(i)).call(e,(e=>{var a=this.getQuotaMessage(i[e],s["volumes_".concat(e)],t("volume type {type}",{type:e}));a&&(r=a)})),r||((0,C.default)(a=(0,k.default)(o)).call(a,(e=>{var a=this.getQuotaMessage(o[e],s["gigabytes_".concat(e)],t("volume type {type} capacity",{type:e}));a&&(r=a)})),r))}getFlavorInput(){var{data:e}=this.state,{flavor:t={},count:a=1}=e,{selectedRows:r=[]}=t,{vcpus:n=0,ram:l=0}=r[0]||{};return{newCPU:n*a,newRam:(0,z.getGiBValue)(l)*a}}checkFlavorQuota(){var{newCPU:e,newRam:a}=this.getFlavorInput(),{cores:r={},ram:n={}}=this.projectStore.novaQuota,{left:l=0}=r||{},{left:i=0}=n||{};return-1!==l&&l<e?this.getQuotaMessage(e,r,t("CPU")):-1!==i&&i<a?this.getQuotaMessage(a,n,t("Memory")):""}getServerGroupQuota(){var{data:e}=this.state,{serverGroupRow:a,count:r=1}=e;if(!a)return null;var{server_group_members:{limit:n=0}={}}=this.projectStore.novaQuota,{members:l=[]}=a||{},i=l.length;return{add:r,used:i,limit:n,left:-1===n?-1:n-i,title:t("Server Group Member"),name:"serverGroupMember",type:"line"}}checkSeverGroupQuota(){var e=this.getServerGroupQuota();if(!e)return"";var{add:a,left:r}=e||{};return-1!==r&&r<a?this.getQuotaMessage(a,e,t("Server Group Member")):""}get badgeStyle(){return{marginTop:8,marginBottom:8,marginLeft:10,maxWidth:600}}checkInstanceQuota(){var{quotaLoading:e}=this.state;if(e)return"";var{instances:a={}}=this.projectStore.novaQuota||{};return 0===this.instanceQuota?this.getQuotaMessage(1,a,t("Instance")):""}checkQuotaInput(){var e=this.checkInstanceQuota(),t=this.checkFlavorQuota(),a=this.checkVolumeQuota(),r=this.checkSeverGroupQuota(),n=e||t||a||r;return n?(this.status="error",this.errorMsg!==n&&g.default.error(n),this.errorMsg=n,n):(this.status="success",this.errorMsg="","")}renderBadge(){var e=this.checkQuotaInput();return"success"===this.status?null:F.default.createElement("div",{style:this.badgeStyle},F.default.createElement(m.default,{status:"error",text:e}))}renderExtra(){return null}getCountInputConfig(){var{data:e}=this.state,{source:{value:t}={}}=e;return{min:1,max:"bootableVolume"===t?1:(0,A.default)(this.instanceQuota)?this.instanceQuota:100,precision:0,onChange:this.onCountChange,formatter:e=>"$ ".concat(e).replace(/\D/g,"")}}renderCountInput(){var{data:e}=this.state,{count:a=1}=e||{},r=this.getCountInputConfig();return F.default.createElement("div",{className:H.default["number-input"]},F.default.createElement("span",null,t("Count")),F.default.createElement(p.default,(0,h.default)({},r,{value:a,className:(0,L.default)(H.default.input,"instance-count")})))}renderFooterLeft(){return F.default.createElement("div",{style:{display:"flex"}},F.default.createElement("div",{style:{display:"flex",alignItems:"center"}},this.renderCountInput(),this.renderExtra()),this.renderBadge())}getVolumeAndImageData(e){if("error"===this.status)return null;var{bootableVolume:t,dataDisk:a,image:r,instanceSnapshot:n,instanceSnapshotDisk:l,source:i,systemDisk:o,bootFromVolume:s=!0,deleteVolumeInstance:u}=e,{value:d}=i,c="bootableVolume"===d?null:"image"===d?r.selectedRowKeys[0]:n.selectedRowKeys[0];if(!this.enableCinder)return{imageRef:c};var f={};if("bootableVolume"!==d){if(s){var{deleteType:p,type:h,size:m}=o||{};f={boot_index:0,uuid:c,source_type:"image",volume_size:m,destination_type:"volume",volume_type:h,delete_on_termination:1===p},"instanceSnapshot"===d&&l&&(delete f.volume_size,delete f.volume_type,delete f.delete_on_termination)}}else f={boot_index:0,uuid:t.selectedRowKeys[0],source_type:"volume",destination_type:"volume",delete_on_termination:u};var g=a?(0,S.default)(a).call(a,(e=>{var{size:t,type:a,deleteType:r}=e.value||{};return{source_type:"blank",volume_size:t,destination_type:"volume",volume_type:a,delete_on_termination:1===r}})):[];return"image"===d&&"iso"===r.selectedRows[0].disk_format&&g[0]&&s&&(g[0].boot_index=0,g[0].device_type="disk",f.boot_index=1,f.device_type="cdrom"),{volumes:(0,R.default)(f)?[...g]:[f,...g],imageRef:c}}getNetworkData(e){var{networks:t=[],ports:a={}}=e,r=!1,n=[];(0,C.default)(t).call(t,(e=>{var t={uuid:e.value.network};1===e.value.ipType&&e.value.ip&&(t.fixed_ip=e.value.ip,r=!0),n.push(t)}));var{selectedRowKeys:l=[]}=a||{};return(0,C.default)(l).call(l,(e=>{var t={port:e};n.push(t)})),{data:n,hasIp:r}}getSubmitData(e){if("error"===this.status)return null;var{volumes:t,imageRef:a}=this.getVolumeAndImageData(e),{data:r,hasIp:n}=this.getNetworkData(e),{availableZone:l,keypair:i,loginType:o,password:s,physicalNode:u,physicalNodeType:d,securityGroup:c,flavor:f,userData:p="",serverGroup:h,name:m,count:g=1,bootFromVolume:v=!0}=e;if(n&&g>1)return this.ipBatchError=!0,null;var{selectedRows:y=[]}=c||{},b={security_groups:(0,S.default)(y).call(y,(e=>({name:e.id}))),name:m,flavorRef:f.selectedRowKeys[0],availability_zone:l.value,networks:r};if(this.enableCinder&&(b.block_device_mapping_v2=t),!a||t&&v||(b.imageRef=a),"keypair"===o.value?b.key_name=i.selectedRowKeys[0]:b.adminPass=s,g>1&&(b.min_count=g,b.max_count=g,b.return_reservation_id=!0),"smart"!==d.value&&(b.hypervisor_hostname=u.selectedRows[0].hypervisor_hostname),b.adminPass||p){var{username:_}=e;b.user_data=btoa((0,V.getUserData)(b.adminPass,p,_||"root"))}var x={server:b};return h&&h.selectedRowKeys.length>0&&(x["OS-SCH-HNT:scheduler_hints"]={group:h.selectedRowKeys[0]}),x}}a.StepCreate=Z,(0,D.default)(Z,"id","instance-create"),(0,D.default)(Z,"title",t("Create Instance")),(0,D.default)(Z,"path",((e,t)=>{var a,{detail:r,match:n}=t||{};return!r||(0,R.default)(r)?"/compute/instance/create":(0,I.default)(a=n.path).call(a,"/compute/server")>=0?"/compute/instance/create?servergroup=".concat(r.id):void 0})),(0,D.default)(Z,"policy",["os_compute_api:servers:create","os_compute_api:os-availability-zone:list"]);a.default=(0,E.inject)("rootStore")((0,E.observer)(Z))},274826:(e,t,a)=>{"use strict";var r=a(471742),n=a(633950),l=a(810732),i=a(548924);n(t,"__esModule",{value:!0}),t.default=void 0;var o=i(a(342279)),s=i(a(68982)),u=i(a(89195));a(749121);var d=i(a(123007)),c=i(a(303884)),f=i(a(877879)),p=function(e,t){if("function"==typeof r)var a=new r,i=new r;return function(e,t){if(!t&&e&&e.__esModule)return e;var r,o,s={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return s;if(r=t?i:a){if(r.has(e))return r.get(e);r.set(e,s)}for(var u in e)"default"!==u&&{}.hasOwnProperty.call(e,u)&&((o=(r=n)&&l(e,u))&&(o.get||o.set)?r(s,u,o):s[u]=e[u]);return s}(e,t)}(a(823872)),h=a(189961),m=i(a(38256)),g=(a(877800),a(83575)),v=a(113479),y=i(a(942240)),b=i(a(703871));class _ extends p.Component{constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),(0,f.default)(this,"handleFetch",((e,t)=>{this.routing.query(e,t)})),(0,f.default)(this,"handleChangeTab",(e=>{this.handleFetch({tab:e},!0)})),this.options=t,this.state={},this.init()}get routing(){return this.props.rootStore.routing}get location(){return this.props.location||{}}get isAdminPage(){var{pathname:e}=this.location;return(0,g.isAdminPage)(e)}get hasAdminRole(){return this.props.rootStore.hasAdminRole}get endpoint(){return""}get checkEndpoint(){return!1}get name(){return""}get endpointError(){return this.checkEndpoint&&!this.endpoint}getRouteName(e){return this.isAdminPage?"".concat(e,"Admin"):e}getRoutePath(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.getRouteName(e);return(0,v.getPath)({key:r,params:t,query:a})}getLinkRender(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=this.getRouteName(e);return(0,v.getLinkRender)({key:n,params:a,query:r,value:t})}get tabs(){return[{title:"tab1",key:"tab1",component:null},{title:"tab2",key:"tab2",component:null}]}getTab(){var e,t=(0,h.parse)((0,o.default)(e=this.routing.location.search).call(e,1)),{tab:a}=t;return a}get tab(){var e;if(0===this.tabs.length)return null;var t=this.getTab();return(0,s.default)(e=this.tabs).call(e,(e=>e.key===t))||this.tabs[0]}init(){}renderTabComponent(e){var{component:t,key:a}=e;return t?p.default.createElement(e.component,(0,c.default)({},this.props,{tab:this.tab.key})):p.default.createElement("span",{key:a},a)}renderTab(e,t){return e!==t.key?p.default.createElement(d.default.TabPane,{tab:t.title,key:t.key}):p.default.createElement(d.default.TabPane,{tab:t.title,key:t.key},this.renderTabComponent(t))}renderTabs(){var e;if(!this.tab)return null;if(this.endpointError){var t=this.getRoutePath("overview");return p.default.createElement(y.default,{title:this.name,link:t,endpointError:!0})}var a=(0,u.default)(e=this.tabs).call(e,(e=>this.renderTab(this.tab.key,e)));return p.default.createElement("div",{className:(0,m.default)(b.default.wrapper,this.className)},p.default.createElement(d.default,{activeKey:this.tab.key,onChange:this.handleChangeTab},a))}render(){return this.renderTabs()}}t.default=_},292666:(e,a,r)=>{"use strict";var n=r(818565),l=r(213696),i=r(303787),o=r(810732),s=r(532462),u=r(110819),d=r(722338),c=r(633950),f=r(548924);c(a,"__esModule",{value:!0}),a.yamlTip=a.validateYaml=a.stackStatus=a.rollbackTip=a.paramTip=a.getYaml=a.getTemplate=a.getParamsFromContent=a.getFormItems=a.getFormItemType=a.getFormDefaultValues=void 0;var p=f(r(424836)),h=f(r(532462)),m=f(r(818565)),g=f(r(877879)),v=f(r(835961)),y=f(r(371573)),b=f(r(756612)),_=f(r(707270)),S=r(153434);function x(e,t){var a=n(e);if(l){var r=l(e);t&&(r=i(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}a.stackStatus={INIT_IN_PROGRESS:t("Init In Progress"),INIT_COMPLETE:t("Init Complete"),INIT_FAILED:t("Init Failed"),CREATE_IN_PROGRESS:t("Create In Progress"),CREATE_COMPLETE:t("Create Complete"),CREATE_FAILED:t("Create Failed"),DELETE_IN_PROGRESS:t("Delete In Progress"),DELETE_COMPLETE:t("Delete Complete"),DELETE_FAILED:t("Delete Failed"),UPDATE_IN_PROGRESS:t("Update In Progress"),UPDATE_COMPLETE:t("Update Complete"),UPDATE_FAILED:t("Update Failed"),ROLLBACK_IN_PROGRESS:t("Rollback In Progress"),ROLLBACK_COMPLETE:t("Rollback Complete"),ROLLBACK_FAILED:t("Rollback Failed"),SUSPEND_IN_PROGRESS:t("Suspend In Progress"),SUSPEND_COMPLETE:t("Suspend Complete"),SUSPEND_FAILED:t("Suspend Failed"),RESUME_IN_PROGRESS:t("Resume In Progress"),RESUME_COMPLETE:t("Resume Complete"),RESUME_FAILED:t("Resume Failed"),ADOPT_IN_PROGRESS:t("Adopt In Progress"),ADOPT_COMPLETE:t("Adopt Complete"),ADOPT_FAILED:t("Adopt Failed"),SNAPSHOT_IN_PROGRESS:t("Snapshot In Progress"),SNAPSHOT_COMPLETE:t("Snapshot Complete"),SNAPSHOT_FAILED:t("Snapshot Failed"),CHECK_IN_PROGRESS:t("Check In Progress"),CHECK_COMPLETE:t("Check Complete"),CHECK_FAILED:t("Check Failed")};a.validateYaml=(e,a)=>{try{_.default.load(a)}catch(e){return p.default.reject(t("A template is a YAML file that contains configuration information, please enter the correct format."))}return p.default.resolve()};a.getYaml=e=>{try{return _.default.load(e,{schema:_.default.JSON_SCHEMA})}catch(e){return null}};a.yamlTip=t("A template is a YAML file that contains configuration information."),a.paramTip=t("When your Yaml file is a fixed template, variable variables can be stored in an environment variable file to implement template deployment. The parameters in the environment variable file need to match the parameters defined in the template file."),a.rollbackTip=t('If "Enable" fails to roll back, the resource will be deleted after the creation fails; if "Disable" fails to roll back, the resource will be retained after the creation fails.'),a.getTemplate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{content:t}=e;return t};var w=e=>{switch(e){case"number":return{type:"input-number"};case"json":return{type:"input-json"};case"boolean":return{type:"radio",options:S.yesNoOptions};default:return{type:"input"}}};a.getFormItemType=w;var C=e=>{try{var t=_.default.load(e);return(0,v.default)(t)&&t.parameters||{}}catch(e){return{}}};a.getParamsFromContent=C;a.getFormItems=e=>{var t=[];try{var a,r=C(e);if((0,y.default)(r))return t;(0,h.default)(a=(0,m.default)(r)).call(a,(e=>{var a=r[e],{type:n="string",description:l="",label:i,hidden:f}=a,p=function(e){for(var t=1;t<arguments.length;t++){var a,r,n=null!=arguments[t]?arguments[t]:{};t%2?s(a=x(Object(n),!0)).call(a,(function(t){(0,g.default)(e,t,n[t])})):u?d(e,u(n)):s(r=x(Object(n))).call(r,(function(t){c(e,t,o(n,t))}))}return e}({name:e,label:i||e,extra:l,required:!0,hidden:f},w(n));t.push(p)}))}catch(e){}return t};a.getFormDefaultValues=e=>{var t={};try{var a,r=_.default.load(e);if(!(0,v.default)(r))return t;var n=r.parameters||{};(0,h.default)(a=(0,m.default)(n)).call(a,(e=>{var a=n[e];(0,b.default)(a,"default")?t[e]=a.default:"boolean"===a.type&&(t[e]=!1)}))}catch(e){}return t}},299224:(e,t,a)=>{"use strict";var r=a(818565),n=a(213696),l=a(303787),i=a(810732),o=a(532462),s=a(110819),u=a(722338),d=a(633950),c=a(548924);d(t,"__esModule",{value:!0}),t.default=t.MetadataStore=void 0;var f,p,h,m=c(a(424836)),g=c(a(89195)),v=c(a(532462)),y=c(a(810732)),b=c(a(601839)),_=c(a(337187)),S=c(a(877879)),x=c(a(533301)),w=(c(a(155041)),a(127567)),C=c(a(892621)),k=c(a(381891));function I(e,t){var a=r(e);if(n){var o=n(e);t&&(o=l(o).call(o,(function(t){return i(e,t).enumerable}))),a.push.apply(a,o)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a,r,n=null!=arguments[t]?arguments[t]:{};t%2?o(a=I(Object(n),!0)).call(a,(function(t){(0,S.default)(e,t,n[t])})):s?u(e,s(n)):o(r=I(Object(n))).call(r,(function(t){d(e,t,i(n,t))}))}return e}var D=new(t.MetadataStore=(f=class extends k.default{constructor(){super(...arguments),(0,_.default)(this,"resourceTypes",p,this),(0,_.default)(this,"resourceTypeLoading",h,this)}get client(){return C.default.glance.namespaces}get resourceTypeClient(){return C.default.glance.resourceTypes}get needGetProject(){return!1}listDidFetch(e,t,a){var r=this;return(0,b.default)((function*(){var{manage:t,resource_types:n}=a;if(!t)return e;var l=yield m.default.all((0,g.default)(e).call(e,(e=>{var{namespace:t}=e;return r.client.show(t,{resource_type:n})})));(0,v.default)(e).call(e,((e,t)=>{e.detail=l[t]}));var i=[];return(0,v.default)(e).call(e,(e=>{var t;e.detail.objects?(0,v.default)(t=e.detail.objects).call(t,(t=>{i.push(P(P({},e),{},{detail:t,isObject:!0,objName:t.name,objDescription:t.description}))})):i.push(e)})),i}))()}get mapper(){return e=>{var{visibility:t,namespace:a,display_name:r,resource_type_associations:n=[]}=e;return(0,v.default)(n).call(n,(e=>{e.prefix=e.prefix||""})),P(P({},e),{},{public:"public"===t,id:a,name:r,resource_type_associations:n})}}fetchDetail(e){var t=this;return(0,b.default)((function*(){var{id:a}=e;t.isLoading=!0;var r=yield t.client.show(a);return t.detail=r,t.isLoading=!1,r}))()}edit(e,t){var{id:a}=e;return this.submitting(this.client.update(a,t))}create(e){return this.submitting(this.client.create(e))}fetchResourceTypes(e){var t=this;return(0,b.default)((function*(){t.resourceTypeLoading=!0;var a=yield t.resourceTypeClient.list(),{resource_type_associations:r=[]}=e||{},{resource_types:n=[]}=a,l={};(0,v.default)(r).call(r,(e=>{l[e.name]=e.prefix||""})),(0,v.default)(n).call(n,(e=>{e.id=e.name,l[e.name]&&(e.prefix=l[e.name])})),t.resourceTypes=n,t.resourceTypeLoading=!1}))()}manageResourceTypes(e,t,a){var r=this;return(0,b.default)((function*(){return r.isSubmitting=!0,yield m.default.all((0,g.default)(t).call(t,(t=>r.client.resourceTypes.delete(e,t.name)))),r.submitting(m.default.all((0,g.default)(a).call(a,(t=>{var a={name:t.name,prefix:t.prefix};return r.client.resourceTypes.create(e,a)}))))}))()}},p=(0,x.default)(f.prototype,"resourceTypes",[w.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=(0,x.default)(f.prototype,"resourceTypeLoading",[w.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,x.default)(f.prototype,"fetchDetail",[w.action],(0,y.default)(f.prototype,"fetchDetail"),f.prototype),(0,x.default)(f.prototype,"edit",[w.action],(0,y.default)(f.prototype,"edit"),f.prototype),(0,x.default)(f.prototype,"create",[w.action],(0,y.default)(f.prototype,"create"),f.prototype),(0,x.default)(f.prototype,"fetchResourceTypes",[w.action],(0,y.default)(f.prototype,"fetchResourceTypes"),f.prototype),(0,x.default)(f.prototype,"manageResourceTypes",[w.action],(0,y.default)(f.prototype,"manageResourceTypes"),f.prototype),f));t.default=D},300657:(e,t,a)=>{"use strict";var r=a(471742),n=a(633950),l=a(810732),i=a(548924);n(t,"__esModule",{value:!0}),t.default=void 0;var o=i(a(29672)),s=i(a(532462)),u=i(a(818565)),d=i(a(677861)),c=i(a(303884)),f=i(a(877879)),p=i(a(785219)),h=function(e,t){if("function"==typeof r)var a=new r,i=new r;return function(e,t){if(!t&&e&&e.__esModule)return e;var r,o,s={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return s;if(r=t?i:a){if(r.has(e))return r.get(e);r.set(e,s)}for(var u in e)"default"!==u&&{}.hasOwnProperty.call(e,u)&&((o=(r=n)&&l(e,u))&&(o.get||o.set)?r(s,u,o):s[u]=e[u]);return s}(e,t)}(a(823872)),m=i(a(61296)),g=i(a(38256)),v=a(345232),y=i(a(513468)),b=i(a(314663));var _=e=>{if(!(0,p.default)(e))return e;if((0,o.default)(e).call(e,"<html>")){var t=/<\/h1>[\r\n]([\s\S]*)<\/body>/.exec(e);if(t)return t[1].replace(/<br \/>/g,"")}try{return JSON.parse(e)}catch(t){return e}},S=(e,t)=>{var a;return(0,p.default)(e)?_(e):((0,s.default)(a=(0,u.default)(e)).call(a,(t=>{(0,p.default)(e[t])&&(e[t]=_(e[t]))})),"json"===t?(0,d.default)(e,null,2):"yaml"===t?(0,v.getValue)(e):e)};class x extends h.PureComponent{constructor(e){super(e),(0,f.default)(this,"handleChange",(e=>{var{onChange:t}=this.props;t(e)})),this.state={value:S(e.value,e.mode),originValue:e.value}}static getDerivedStateFromProps(e,t){var{value:a,mode:r}=e;return a!==t.originValue?{value:S(a,r),originValue:a}:null}render(){var{className:e,mode:t,options:a}=this.props;return h.default.createElement(b.default,(0,c.default)({},a,{className:(0,g.default)(y.default.editor,e),value:this.state.value,mode:t,onChange:this.handleChange}))}}(0,f.default)(x,"propTypes",{value:m.default.oneOfType([m.default.string,m.default.object,m.default.array]),mode:m.default.string,options:m.default.object,onChange:m.default.func}),(0,f.default)(x,"defaultProps",{value:{},mode:"yaml",options:{},onChange(){}});t.default=x},308934:(e,t,a)=>{"use strict";var r=a(818565),n=a(213696),l=a(303787),i=a(810732),o=a(532462),s=a(110819),u=a(722338),d=a(633950),c=a(548924);d(t,"__esModule",{value:!0}),t.default=t.ListenerStore=void 0;var f=c(a(89195)),p=c(a(208044)),h=c(a(601839)),m=c(a(877879)),g=c(a(892621)),v=c(a(381891));function y(e,t){var a=r(e);if(n){var o=n(e);t&&(o=l(o).call(o,(function(t){return i(e,t).enumerable}))),a.push.apply(a,o)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a,r,n=null!=arguments[t]?arguments[t]:{};t%2?o(a=y(Object(n),!0)).call(a,(function(t){(0,m.default)(e,t,n[t])})):s?u(e,s(n)):o(r=y(Object(n))).call(r,(function(t){d(e,t,i(n,t))}))}return e}class _ extends v.default{get client(){return g.default.octavia.listeners}get poolClient(){return g.default.octavia.pools}get healthMonitorClient(){return g.default.octavia.healthMonitors}get lbClient(){return g.default.octavia.loadbalancers}get listFilterByProject(){return!0}get mapperBeforeFetchProject(){return e=>{var t;return b(b({},e),{},{lbIds:(0,f.default)(t=e.loadbalancers).call(t,(e=>e.id))})}}detailDidFetch(e){var t=this;return(0,h.default)((function*(){var a,{default_pool_id:r,default_tls_container_ref:n,client_ca_tls_container_ref:l,sni_container_refs:i}=e,[,o]=(n||"").split("/containers/"),[,s]=(l||"").split("/secrets/"),u=(0,f.default)(a=i||[]).call(a,(e=>{var[,t]=e.split("/containers/");return t}));(0,p.default)(e,{serverCertificateId:o,caCertificateId:s,sniCertificateId:u});var{loadbalancers:d=[]}=e,{loadbalancer:c}=yield t.lbClient.show(d[0].id);if(e.loadBalancer=c,!r)return e;try{var{pool:h}=yield t.poolClient.show(r);e.default_pool=h;var{healthmonitor_id:m}=h;if(m){var{healthmonitor:g}=yield t.healthMonitorClient.show(m);e.healthMonitor=g}return e}catch(t){return e}}))()}}t.ListenerStore=_;var S=new _;t.default=S},314663:(e,t,a)=>{"use strict";var r=a(633950),n=a(548924);r(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(303884)),i=n(a(823872)),o=n(a(195018)),s=n(a(4684));a(772779),a(660276),a(447629);var u=a(849289);s.default.config.setModuleUrl("ace/mode/json_worker",u);class d extends i.default.Component{render(){return i.default.createElement(o.default,(0,l.default)({theme:"github",width:"auto",height:"100%",tabSize:2,debounceChangePeriod:200,editorProps:{$blockScrolling:!0},showPrintMargin:!1,wrapEnabled:!0},this.props))}}t.default=d},318032:(e,t,a)=>{(t=e.exports=a(840049)(!1)).push([e.id,".index__progress--1I8an {\n  width: 100px;\n  margin-right: 10px;\n}\n",""]),t.locals={progress:"index__progress--1I8an"}},319982:(e,t,a)=>{"use strict";var r=a(633950),n=a(548924);r(t,"__esModule",{value:!0}),t.detailConfigs=t.actionConfigs=void 0;var l=n(a(700776)),i=n(a(952885));t.actionConfigs={rowActions:{firstAction:i.default},batchActions:[i.default],primaryActions:[l.default]},t.detailConfigs={rowActions:{firstAction:i.default},batchActions:[i.default],primaryActions:[]}},320253:(e,t,a)=>{"use strict";var r=a(818565),n=a(213696),l=a(303787),i=a(810732),o=a(532462),s=a(110819),u=a(722338),d=a(633950),c=a(548924);d(t,"__esModule",{value:!0}),t.default=t.AvailabilityZoneStore=void 0;var f,p=c(a(532462)),h=c(a(818565)),m=c(a(89195)),g=c(a(810732)),v=c(a(877879)),y=c(a(601839)),b=c(a(533301)),_=c(a(414407)),S=c(a(371573)),x=a(127567),w=c(a(892621)),C=c(a(381891));function k(e,t){var a=r(e);if(n){var o=n(e);t&&(o=l(o).call(o,(function(t){return i(e,t).enumerable}))),a.push.apply(a,o)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a,r,n=null!=arguments[t]?arguments[t]:{};t%2?o(a=k(Object(n),!0)).call(a,(function(t){(0,v.default)(e,t,n[t])})):s?u(e,s(n)):o(r=k(Object(n))).call(r,(function(t){d(e,t,i(n,t))}))}return e}var P=new(t.AvailabilityZoneStore=(f=class extends C.default{get client(){return w.default.nova.zone}get listResponseKey(){return this.responseKey}get listWithDetail(){return!0}get mapper(){return e=>{var{available:t}=e.zoneState;return e.available=t,e}}listDidFetch(e){return(0,y.default)((function*(){var t=[];return(0,p.default)(e).call(e,(e=>{var{hosts:a}=e;if((0,_.default)(a))t.push(e);else{var r,n={};(0,p.default)(r=(0,h.default)(a)).call(r,(e=>{var t=a[e];t["nova-compute"]&&(n[e]=t)})),(0,S.default)(n)||t.push(I(I({},e),{},{host:n}))}})),t}))()}fetchListWithoutDetail(){var e=this;return(0,y.default)((function*(){var t=(yield e.client.list())[e.listResponseKey];e.list.data=(0,m.default)(t).call(t,e.mapper)}))()}},(0,b.default)(f.prototype,"fetchListWithoutDetail",[x.action],(0,g.default)(f.prototype,"fetchListWithoutDetail"),f.prototype),f));t.default=P},328001:(e,t,a)=>{(t=e.exports=a(840049)(!1)).push([e.id,"/* init */\n/* specific color */\n/*  border */\n/*  input */\n/*  background */\n/* button */\n/*  shadow */\n/*  font */\n/*  animation */\n/*  size */\n/*  sider */\n.index__layout-header-menu-search-border--1bj4J {\n  border: none;\n}\n.index__vertical-center--3j0Ym {\n  position: absolute;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n          transform: translateY(-50%);\n}\n/* login */\n.index__input--2eKC2 {\n  margin-right: 32px;\n  margin-left: 16px;\n}\n.index__number-input--3TVxi {\n  min-width: 165px;\n}\n",""]),t.locals={primaryColor:"#a33e3e",normalColor:"rgba(34, 117, 74, 0.78)",successColor:"#57e39b",warnColor:"#fedf40",warnDarkColor:"#fa8c16",warnLightColor:"#f6b23d",errorColor:"#eb354d",dangerColor:"#c4233e",moneyColor:"#f50",infoColor:"rgba(0, 104, 255, 0.65)",headerHeight:"50px",productsColumnWidth:"220px","layout-header-menu-search-border":"index__layout-header-menu-search-border--1bj4J","vertical-center":"index__vertical-center--3j0Ym",input:"index__input--2eKC2","number-input":"index__number-input--3TVxi"}},328858:(e,t,a)=>{"use strict";var r=a(471742),n=a(633950),l=a(810732),i=a(548924);n(t,"__esModule",{value:!0}),t.default=void 0;var o=i(a(89195)),s=i(a(303884)),u=i(a(601839)),d=i(a(877879)),c=i(a(336936)),f=function(e,t){if("function"==typeof r)var a=new r,i=new r;return function(e,t){if(!t&&e&&e.__esModule)return e;var r,o,s={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return s;if(r=t?i:a){if(r.has(e))return r.get(e);r.set(e,s)}for(var u in e)"default"!==u&&{}.hasOwnProperty.call(e,u)&&((o=(r=n)&&l(e,u))&&(o.get||o.set)?r(s,u,o):s[u]=e[u]);return s}(e,t)}(a(823872)),p=i(a(61296)),h=a(83575),m=i(a(131751)),g=a(102907);class v extends f.Component{static propTypes(){return{visibleButtonNumber:p.default.number,primaryActions:p.default.array,onFinishAction:p.default.func,onCancelAction:p.default.func,routing:p.default.object.isRequired,containerProps:p.default.object,onClickAction:p.default.func,primaryActionsExtra:p.default.any}}constructor(e){super(e),(0,d.default)(this,"onClickAction",(()=>{var{onClickAction:e}=this.props;e&&e()})),this.state={primaryAllowedResults:[]},this.actionList=this.getActionList(e)}componentDidMount(){this.getActionsAllowed()}componentDidUpdate(e){(0,c.default)(e,this.props)||this.getActionsAllowed()}getActionsAllowed(){var e=this;return(0,u.default)((function*(){var{containerProps:t,primaryActionsExtra:a,isAdminPage:r}=e.props,{detail:n=null}=t,l=yield(0,g.getAllowedResults)({actions:e.actionList,data:n,containerProps:t,key:null,extra:a,isAdminPage:r});e.setState({primaryAllowedResults:l})}))()}getActionList(e){var{primaryActions:t,containerProps:a}=e;return(0,o.default)(t).call(t,(e=>(0,g.getAction)(e,null,a)))}render(){var e,{primaryAllowedResults:t}=this.state,{onFinishAction:a,routing:r,containerProps:n,onCancelAction:l,onClickAction:i}=this.props,u=(0,o.default)(e=this.actionList).call(e,((e,o)=>{var u="primary-".concat((0,h.generateId)()),{id:d,title:c,buttonType:p,actionType:g,buttonText:v,isDanger:y}=e,b={id:d,title:c,name:v||c,buttonType:p,isDanger:y,actionType:g,action:e};return f.default.createElement(m.default,(0,s.default)({},b,{key:u,isAllowed:t[o],onFinishAction:a,routing:r,containerProps:n,onClickAction:i,onCancelAction:l}))}));return f.default.createElement(f.default.Fragment,null,u)}}t.default=v,(0,d.default)(v,"defaultProps",{visibleButtonNumber:3,primaryActions:[],onFinishAction:null,onCancelAction:null,containerProps:{},primaryActionsExtra:null})},343958:(e,t,a)=>{(t=e.exports=a(840049)(!1)).push([e.id,"/* init */\n/* specific color */\n/*  border */\n/*  input */\n/*  background */\n/* button */\n/*  shadow */\n/*  font */\n/*  animation */\n/*  size */\n/*  sider */\n.index__layout-header-menu-search-border--2AgFs {\n  border: none;\n}\n.index__vertical-center--12J54 {\n  position: absolute;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n          transform: translateY(-50%);\n}\n/* login */\n.index__main--1q8mG {\n  position: relative;\n  height: 100%;\n  overflow: auto;\n}\n.index__sider--3LZqm {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 354px;\n  min-width: 354px;\n}\n@media screen and (max-width: 1280px) {\n  .index__sider--3LZqm {\n    width: 300px;\n    min-width: 300px;\n  }\n}\n.index__content--1OSKS {\n  padding-left: 374px;\n}\n@media screen and (max-width: 1280px) {\n  .index__content--1OSKS {\n    padding-left: 320px;\n  }\n}\n.index__nav--2zbId {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  height: 48px;\n  margin: 0 0 12px;\n  padding: 0 14px;\n  background-color: #124191;\n  border-radius: 2px;\n}\n.index__navItem--uT8lm {\n  min-width: 96px;\n  height: 32px;\n  margin: 0 6px;\n  padding: 0 14px;\n  color: #fff;\n  font-weight: 500;\n  line-height: 32px;\n  text-align: center;\n  border: 1px solid transparent;\n  -webkit-transition: all 0.3s;\n  transition: all 0.3s;\n}\n.index__navItem--uT8lm:first-child {\n  margin: 0 6px 0 0;\n}\n.index__navItem--uT8lm.index__active--oKb1h {\n  background-color: #1890ff;\n  border-color: #1890ff;\n  border-radius: 2px;\n  -webkit-box-shadow: none;\n          box-shadow: none;\n}\n.index__navItem--uT8lm.index__active--oKb1h:hover {\n  color: #fff;\n}\n.index__loading--3cfaa {\n  padding: 30px 0;\n  text-align: center;\n}\n.index__header--2mGuj {\n  padding-right: 16px;\n  padding-bottom: 30px;\n  padding-left: 16px;\n  background-color: #fff;\n}\n.index__header--2mGuj .ant-descriptions-title {\n  margin-bottom: 0;\n}\n.index__header-title--3X2Ku {\n  font-style: italic;\n}\n.index__title-label--3TrNR {\n  margin-right: 8px;\n  font-style: italic;\n}\n.index__header-button--2VTui {\n  float: right;\n}\n.index__header-divider--3b6-4 {\n  width: 2px;\n  margin: 0 14px 0 24px;\n  background-color: rgba(0, 0, 0, 0.45);\n}\n.index__tabs--VwWK2 {\n  margin-top: -42px;\n}\n.index__tabs--VwWK2 .ant-tabs-bar {\n  padding-right: 16px;\n  padding-left: 16px;\n}\n.index__tabs--VwWK2 .ant-tabs-nav-wrap {\n  padding-left: 30px;\n}\n.index__tab-wrapper--2DZuY {\n  width: 100%;\n}\n.index__tab-wrapper--2DZuY .list-container {\n  margin-top: 0;\n}\n.index__action-wrapper--pIcIO {\n  position: absolute;\n  right: 80px;\n}\n.index__action-wrapper--pIcIO .ant-btn-link {\n  padding: 5.6px 15px !important;\n  border-color: #a33e3e;\n}\n.index__action-wrapper--pIcIO .ant-divider-vertical {\n  border-left: none;\n}\n.index__action-wrapper--pIcIO .ant-btn-dangerous {\n  color: #c4233e;\n  background: transparent;\n  border-color: #c4233e;\n}\n.index__action-wrapper--pIcIO .ant-btn-link[disabled],\n.index__action-wrapper--pIcIO .ant-btn-link[disabled]:hover,\n.index__action-wrapper--pIcIO .ant-btn-link[disabled]:focus,\n.index__action-wrapper--pIcIO .ant-btn-link[disabled]:active {\n  border-color: rgba(0, 0, 0, 0.25);\n}\n.index__action-wrapper--pIcIO .ant-btn-dangerous.ant-btn-link:active {\n  color: #c4233e;\n  background: transparent;\n  border-color: #c4233e;\n}\n.index__action-wrapper--pIcIO .ant-btn-dangerous:hover,\n.index__action-wrapper--pIcIO .ant-btn-dangerous:focus {\n  color: #f76070;\n  background: #fff;\n  border-color: #f76070;\n}\n",""]),t.locals={primaryColor:"#a33e3e",normalColor:"rgba(34, 117, 74, 0.78)",successColor:"#57e39b",warnColor:"#fedf40",warnDarkColor:"#fa8c16",warnLightColor:"#f6b23d",errorColor:"#eb354d",dangerColor:"#c4233e",moneyColor:"#f50",infoColor:"rgba(0, 104, 255, 0.65)",headerHeight:"50px",productsColumnWidth:"220px","layout-header-menu-search-border":"index__layout-header-menu-search-border--2AgFs","vertical-center":"index__vertical-center--12J54",main:"index__main--1q8mG",sider:"index__sider--3LZqm",content:"index__content--1OSKS",nav:"index__nav--2zbId",navItem:"index__navItem--uT8lm",active:"index__active--oKb1h",loading:"index__loading--3cfaa",header:"index__header--2mGuj","header-title":"index__header-title--3X2Ku","title-label":"index__title-label--3TrNR","header-button":"index__header-button--2VTui","header-divider":"index__header-divider--3b6-4",tabs:"index__tabs--VwWK2","tab-wrapper":"index__tab-wrapper--2DZuY","action-wrapper":"index__action-wrapper--pIcIO"}},345232:(e,t,a)=>{"use strict";var r=a(633950),n=a(548924);r(t,"__esModule",{value:!0}),t.getValue=void 0;var l=n(a(677861)),i=n(a(835961)),o=n(a(707270));t.getValue=e=>{if((0,i.default)(e))try{return o.default.dump(e,{noRefs:!0})}catch(t){return(0,l.default)(e,null,2)}return String(e)}},351013:(e,a,r)=>{"use strict";var n=r(633950),l=r(548924);n(a,"__esModule",{value:!0}),a.default=a.Storage=void 0;var i=l(r(549849)),o=l(r(877879)),s=r(87067),u=l(r(654017)),d=l(r(595780)),c=r(47945),f=["all_projects"];class p extends u.default{constructor(){super(...arguments),(0,o.default)(this,"getColumns",(()=>c.poolColumns)),(0,o.default)(this,"updateFetchParams",(e=>{var{all_projects:t}=e;return(0,i.default)(e,f)}))}init(){this.store=d.default}get policy(){return"scheduler_extension:scheduler_stats:get_pools"}get name(){return t("storage backend")}get rowKey(){return"name"}get searchFilters(){return[{label:t("Name"),name:"name"},{label:t("Protocol"),name:"storage_protocol"},{label:t("Backend Name"),name:"volume_backend_name"}]}}a.Storage=p;a.default=(0,s.inject)("rootStore")((0,s.observer)(p))},351898:(e,a,r)=>{"use strict";r(633950)(a,"__esModule",{value:!0}),a.statusMap=void 0;a.statusMap={500:t("Internal Server Error (code: 500) "),501:t("Not Implemented (code: 501) "),502:t("Bad Gateway (code: 502) "),503:t("Service Unavailable (code: 503) "),504:t("Gateway Time-out (code: 504) "),505:t("HTTP Version not supported (code: 505) ")}},356379:(e,t,a)=>{var r=a(422291);"string"==typeof r&&(r=[[e.id,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(453027)(r,n);r.locals&&(e.exports=r.locals)},363936:(e,t,a)=>{"use strict";var r=a(471742),n=a(633950),l=a(810732),i=a(548924);n(t,"__esModule",{value:!0}),t.default=void 0;var o=i(a(29672));a(21184);var s=i(a(35934));a(615134);var u=i(a(707204)),d=i(a(877879)),c=function(e,t){if("function"==typeof r)var a=new r,i=new r;return function(e,t){if(!t&&e&&e.__esModule)return e;var r,o,s={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return s;if(r=t?i:a){if(r.has(e))return r.get(e);r.set(e,s)}for(var u in e)"default"!==u&&{}.hasOwnProperty.call(e,u)&&((o=(r=n)&&l(e,u))&&(o.get||o.set)?r(s,u,o):s[u]=e[u]);return s}(e,t)}(a(823872)),f=(a(877800),i(a(61296)));class p extends c.Component{constructor(){super(...arguments),(0,d.default)(this,"getColor",(()=>{var{value:e,warnValue:t,dangerValue:a,infoColor:r,warnColor:n,dangerColor:l}=this.props;return e<t?r:e<a?n:l}))}render(){var e,{value:t,label:a}=this.props,r={percent:t,size:"small",strokeColor:this.getColor()};a&&(r.showInfo=!1);var n=(0,o.default)(e=[void 0,null,""]).call(e,t)?"-":"".concat(t,"%");return c.default.createElement(s.default,{title:n,placement:"top"},c.default.createElement(u.default,r),a)}}t.default=p,(0,d.default)(p,"propTypes",{warnValue:f.default.number,dangerValue:f.default.number,infoColor:f.default.string,warnColor:f.default.string,dangerColor:f.default.string,value:f.default.number,label:f.default.string}),(0,d.default)(p,"defaultProps",{warnValue:70,dangerValue:90,infoColor:globalCSS.normalColor,warnColor:globalCSS.warnDarkColor,dangerColor:globalCSS.dangerColor,label:""})},378063:(e,a,r)=>{"use strict";var n=r(633950),l=r(548924);n(a,"__esModule",{value:!0}),a.projectTableOptions=a.projectFilter=a.projectColumns=void 0;var i=l(r(823872)),o=r(153434),s=r(640293),u=a.projectFilter=[{label:t("Project Name"),name:"name"},{label:t("Project ID"),name:"id"},{label:t("Domain Name"),name:"domainName"},{label:t("Domain ID"),name:"domain_id"},{label:t("Enabled"),name:"enabled",options:o.yesNoOptions}],d=a.projectColumns=[{title:t("Project ID/Name"),dataIndex:"name",render:(e,t)=>{var a=(0,s.getIdRender)(t.id,!0,!1);return i.default.createElement(i.default.Fragment,null,i.default.createElement("div",null,a),i.default.createElement("div",null,e))}},{title:t("Domain ID/Name"),dataIndex:"domainName",render:(e,t)=>{var a=(0,s.getIdRender)(t.domain_id,!0,!1);return i.default.createElement(i.default.Fragment,null,i.default.createElement("div",null,a),i.default.createElement("div",null,e))}},{title:t("Enabled"),dataIndex:"enabled",valueRender:"yesNo"},{title:t("description"),dataIndex:"description",isHideable:!0}];a.projectTableOptions={filterParams:u,columns:d}},387182:(e,t,a)=>{"use strict";var r=a(633950),n=a(548924);r(t,"__esModule",{value:!0}),t.default=void 0;var l=a(153434),i=n(a(85445)),o=n(a(871948)),s=n(a(647373)),u=n(a(194694)),d=n(a(787172)),c=n(a(24665)),f={firstAction:d.default,moreActions:[{action:o.default},{action:u.default},{action:c.default},{action:s.default}]},p={rowActions:f,batchActions:[s.default],primaryActions:[i.default]},h={rowActions:{firstAction:s.default},batchActions:[s.default],primaryActions:[i.default]},m={rowActions:{firstAction:u.default}},g=l.emptyActionConfig,v={rowActions:f},y={rowActions:{firstAction:s.default}};t.default={actionConfigs:p,adminConfigs:h,instanceDetailConfigs:m,instanceDetailAdminConfigs:g,qosDetailConfigs:v,qosDetailAdminConfigs:y}},389287:(e,a,r)=>{"use strict";var n=r(633950),l=r(548924);n(a,"__esModule",{value:!0}),a.default=a.CreateTransfer=void 0;var i=l(r(819989)),o=l(r(424836)),s=l(r(877879)),u=r(87067),d=r(860615),c=l(r(342616)),f=r(505997);class p extends d.ModalAction{constructor(){super(...arguments),(0,s.default)(this,"downloadTxt",((e,t)=>{var a=document.createElement("a");a.href="data:text/plain;charset=utf-8,".concat(t),a.download=e,document.body.appendChild(a),a.click(),document.body.removeChild(a)})),(0,s.default)(this,"onSubmit",(e=>{var{name:t}=e,{id:a}=this.item;return this.store.createTransfer({name:t,volume_id:a}).then((e=>{if(e&&e.transfer){var t,a,{id:r,name:n,auth_key:l}=e.transfer;this.downloadTxt("Volume Transfer ".concat(r,".txt"),(0,i.default)(t=(0,i.default)(a="Transfer Name: ".concat(n,"\nTransfer ID: ")).call(a,r,"\nAuth Key: ")).call(t,l))}}))}))}get name(){return t("Create Transfer")}get defaultValue(){return{name:""}}get tips(){return t("Ownership of a volume can be transferred from one project to another. The transfer process of the volume needs to perform the transfer operation in the original owner's project, and complete the \"accept\" operation in the receiver's project.")}get formItems(){return[{name:"name",label:t("Transfer Name"),type:"input-name",required:!0,placeholder:t("Please input name")}]}init(){this.store=c.default}}a.CreateTransfer=p,(0,s.default)(p,"id","create-transfer"),(0,s.default)(p,"title",t("Create Transfer")),(0,s.default)(p,"policy","volume:create_transfer"),(0,s.default)(p,"allowed",(e=>o.default.resolve((0,f.isAvailable)(e)&&!e.encrypted)));a.default=(0,u.inject)("rootStore")((0,u.observer)(p))},400663:(e,t,a)=>{(t=e.exports=a(840049)(!1)).push([e.id,"/* init */\n/* specific color */\n/*  border */\n/*  input */\n/*  background */\n/* button */\n/*  shadow */\n/*  font */\n/*  animation */\n/*  size */\n/*  sider */\n.index__layout-header-menu-search-border--1YTPJ {\n  border: none;\n}\n.index__vertical-center--2qBCN {\n  position: absolute;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n          transform: translateY(-50%);\n}\n/* login */\n.index__table--33j8W {\n  overflow: hidden;\n  background-color: #fff;\n  border-radius: 2px;\n  -webkit-box-shadow: 0 4px 8px 0 rgba(36, 46, 66, 0.06);\n          box-shadow: 0 4px 8px 0 rgba(36, 46, 66, 0.06);\n}\n.index__table--33j8W .ant-table-container {\n  -webkit-box-shadow: 0 0 10px 0 rgba(0, 0, 0, 0.05);\n          box-shadow: 0 0 10px 0 rgba(0, 0, 0, 0.05);\n}\n.index__table--33j8W .ant-table-pagination.ant-pagination {\n  margin: 0;\n  padding: 8px 16px;\n}\n.index__button--3bdor {\n  min-width: 96px;\n  margin-left: 10px;\n}\n.index__select-title--1m-fB {\n  padding: 2px;\n}\n.index__cancel-select--1WxJX {\n  color: #fff;\n}\n.index__create--2BjrH {\n  min-width: 96px;\n  margin-left: 12px;\n}\n.index__action--2MndJ {\n  padding: 0 4px;\n  color: #329dce;\n  font-weight: 600;\n  cursor: pointer;\n}\n.index__column-menu--3pO2n {\n  width: 160px;\n  overflow: hidden;\n  border-radius: 2px;\n  -webkit-box-shadow: 0 4px 12px 0 rgba(0, 0, 0, 0.2);\n          box-shadow: 0 4px 12px 0 rgba(0, 0, 0, 0.2);\n}\n.index__column-menu--3pO2n .ant-menu-vertical > .ant-menu-item {\n  height: 30px;\n  line-height: 30px;\n}\n.index__custom-button--3b70- {\n  margin-left: 0;\n}\n.index__table-header--3WB0r {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n}\n.index__table-header-btns--2QPSM,\n.index__table-header-action-btns--3KJBJ {\n  position: relative;\n  display: inline-block;\n  margin-bottom: calc(16px - 4px);\n}\n.index__table-header-btns--2QPSM button,\n.index__table-header-action-btns--3KJBJ button {\n  margin-right: 10px;\n  margin-bottom: 4px;\n}\n.index__table-header-btns--2QPSM .ant-btn[disabled],\n.index__table-header-action-btns--3KJBJ .ant-btn[disabled] {\n  -webkit-box-shadow: 0 2px 0 rgba(0, 0, 0, 0.045);\n          box-shadow: 0 2px 0 rgba(0, 0, 0, 0.045);\n}\n.index__table-header-btns--2QPSM .ant-btn-default,\n.index__table-header-action-btns--3KJBJ .ant-btn-default {\n  color: #1d2129;\n  background-color: #fff;\n  border-color: #fff;\n}\n.index__table-header-btns--2QPSM .ant-btn-default:hover,\n.index__table-header-action-btns--3KJBJ .ant-btn-default:hover {\n  color: #a33e3e;\n  border-color: #a33e3e;\n}\n.index__table-header-btns--2QPSM .ant-btn-dangerous,\n.index__table-header-action-btns--3KJBJ .ant-btn-dangerous {\n  color: #eb354d;\n}\n.index__table-header-btns--2QPSM .ant-btn-dangerous:hover,\n.index__table-header-action-btns--3KJBJ .ant-btn-dangerous:hover {\n  color: #eb354d;\n  border-color: #eb354d;\n}\n.index__table-header-btns--2QPSM .ant-btn[disabled],\n.index__table-header-action-btns--3KJBJ .ant-btn[disabled],\n.index__table-header-btns--2QPSM .ant-btn[disabled]:hover,\n.index__table-header-action-btns--3KJBJ .ant-btn[disabled]:hover,\n.index__table-header-btns--2QPSM .ant-btn[disabled]:focus,\n.index__table-header-action-btns--3KJBJ .ant-btn[disabled]:focus,\n.index__table-header-btns--2QPSM .ant-btn[disabled]:active,\n.index__table-header-action-btns--3KJBJ .ant-btn[disabled]:active {\n  color: #c9cdd4 !important;\n  background: #fff !important;\n  border-color: #fff !important;\n}\n.index__search-row--7P1c7 {\n  min-width: 350px;\n}\n.index__search-input--1izmf {\n  width: 288px;\n  height: 32px;\n}\n.index__table-header-right--1SICV {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n}\n.index__table-header-btns--2QPSM {\n  margin-right: 0;\n  margin-left: 10px;\n}\n.index__table-header-btns--2QPSM button:last-child {\n  margin-right: 0;\n}\n",""]),t.locals={primaryColor:"#a33e3e",normalColor:"rgba(34, 117, 74, 0.78)",successColor:"#57e39b",warnColor:"#fedf40",warnDarkColor:"#fa8c16",warnLightColor:"#f6b23d",errorColor:"#eb354d",dangerColor:"#c4233e",moneyColor:"#f50",infoColor:"rgba(0, 104, 255, 0.65)",headerHeight:"50px",productsColumnWidth:"220px","layout-header-menu-search-border":"index__layout-header-menu-search-border--1YTPJ","vertical-center":"index__vertical-center--2qBCN",table:"index__table--33j8W",button:"index__button--3bdor","select-title":"index__select-title--1m-fB","cancel-select":"index__cancel-select--1WxJX",create:"index__create--2BjrH",action:"index__action--2MndJ","column-menu":"index__column-menu--3pO2n","custom-button":"index__custom-button--3b70-","table-header":"index__table-header--3WB0r","table-header-btns":"index__table-header-btns--2QPSM","table-header-action-btns":"index__table-header-action-btns--3KJBJ","search-row":"index__search-row--7P1c7","search-input":"index__search-input--1izmf","table-header-right":"index__table-header-right--1SICV"}},402655:(e,t,a)=>{var r=a(69543);"string"==typeof r&&(r=[[e.id,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(453027)(r,n);r.locals&&(e.exports=r.locals)},415065:(e,a,r)=>{"use strict";var n=r(633950),l=r(548924);n(a,"__esModule",{value:!0}),a.securityGroupFilter=a.securityGroupColumns=void 0;var i=l(r(823872)),o=l(r(896273));a.securityGroupColumns=[{title:t("Name"),dataIndex:"name"},{title:t("Description"),dataIndex:"description"},{title:t("Created At"),dataIndex:"created_at",valueRender:"sinceTime"},{title:t("Rules"),dataIndex:"rules",render:(e,t)=>i.default.createElement(o.default,{item:t})}],a.securityGroupFilter=[{label:t("Name"),name:"name"}]},422291:(e,t,a)=>{(t=e.exports=a(840049)(!1)).push([e.id,".index__flavor-label--GI_En {\n  display: inline-block;\n  min-width: 50px;\n  margin-right: 16px;\n}\n.index__flavor-tab--2Mc6u {\n  margin-bottom: 16px;\n}\n",""]),t.locals={"flavor-label":"index__flavor-label--GI_En","flavor-tab":"index__flavor-tab--2Mc6u"}},425505:(e,t,a)=>{"use strict";var r=a(818565),n=a(213696),l=a(303787),i=a(810732),o=a(532462),s=a(110819),u=a(722338),d=a(633950),c=a(548924);d(t,"__esModule",{value:!0}),t.default=t.SnapshotVolumeStore=void 0;var f=c(a(424836)),p=c(a(89195)),h=c(a(532462)),m=c(a(877879)),g=c(a(601839)),v=c(a(381891)),y=a(83575),b=a(505997);function _(e,t){var a=r(e);if(n){var o=n(e);t&&(o=l(o).call(o,(function(t){return i(e,t).enumerable}))),a.push.apply(a,o)}return a}class S extends v.default{get mapper(){return e=>(0,b.updateVolume)(e)}get groupArraySize(){return 10}requestList(e,t){var a=this;return(0,g.default)((function*(){var{volumeIds:r=[]}=t,n=(0,y.groupArray)(r,a.groupArraySize),l=yield f.default.all((0,p.default)(n).call(n,(t=>{var r=function(e){for(var t=1;t<arguments.length;t++){var a,r,n=null!=arguments[t]?arguments[t]:{};t%2?o(a=_(Object(n),!0)).call(a,(function(t){(0,m.default)(e,t,n[t])})):s?u(e,s(n)):o(r=_(Object(n))).call(r,(function(t){d(e,t,i(n,t))}))}return e}({uuid:t},e);return a.skylineClient.extension.volumes(r)}))),c=[];return(0,h.default)(l).call(l,(e=>{c.push(...e.volumes)})),c}))()}}t.SnapshotVolumeStore=S;var x=new S;t.default=x},433629:(e,t,a)=>{(t=e.exports=a(840049)(!1)).push([e.id,".index__notify--2uuPy .ant-notification-notice-icon {\n  font-size: 18px;\n}\n.index__notify--2uuPy .ant-notification-notice-message {\n  font-size: 12px;\n  word-break: break-all;\n}\n.index__notify--2uuPy .ant-notification-notice-with-icon .ant-notification-notice-message {\n  margin-left: 32px;\n}\n.index__code-editor--D2lB7 {\n  height: 400px !important;\n  min-height: 400px !important;\n}\n",""]),t.locals={notify:"index__notify--2uuPy","code-editor":"index__code-editor--D2lB7"}},434216:(e,t,a)=>{"use strict";var r=a(818565),n=a(213696),l=a(303787),i=a(810732),o=a(532462),s=a(110819),u=a(722338),d=a(633950),c=a(548924);d(t,"__esModule",{value:!0}),t.default=t.BackupStore=void 0;var f,p,h=c(a(549849)),m=c(a(819989)),g=c(a(810732)),v=c(a(601839)),y=c(a(337187)),b=c(a(877879)),_=c(a(533301)),S=(c(a(155041)),a(127567)),x=c(a(892621)),w=c(a(381891)),C=a(342616),k=["current","all_projects"];function I(e,t){var a=r(e);if(n){var o=n(e);t&&(o=l(o).call(o,(function(t){return i(e,t).enumerable}))),a.push.apply(a,o)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a,r,n=null!=arguments[t]?arguments[t]:{};t%2?o(a=I(Object(n),!0)).call(a,(function(t){(0,b.default)(e,t,n[t])})):s?u(e,s(n)):o(r=I(Object(n))).call(r,(function(t){d(e,t,i(n,t))}))}return e}var D=new(t.BackupStore=(f=class extends w.default{constructor(){super(...arguments),(0,y.default)(this,"currentVolumeSize",p,this),(0,b.default)(this,"updateParamsSortPage",((e,t,a)=>{var r;t&&a&&(e.sort=(0,m.default)(r="".concat(t,":")).call(r,"descend"===a?"desc":"asc"))}))}get client(){return x.default.cinder.backups}get listWithDetail(){return!0}get mapperBeforeFetchProject(){return e=>P(P({},e),{},{project_id:e.project_id||e["os-backup-project-attr:project_id"]})}detailDidFetch(e){return(0,v.default)((function*(){var{volume_id:t}=e;try{var a=new C.VolumeStore,r=yield a.fetchDetail({id:t});e.volume=r,e.volume_name=r.name}catch(e){}return e}))()}get paramsFuncPage(){return e=>{var{current:t,all_projects:a}=e;return P({all_tenants:a},(0,h.default)(e,k))}}restore(e,t){var a={restore:t||{}};return this.submitting(this.client.restore(e,a))}setCurrentVolume(e){var{size:t=0}=e||{};this.currentVolumeSize=t||0}},p=(0,_.default)(f.prototype,"currentVolumeSize",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),(0,_.default)(f.prototype,"restore",[S.action],(0,g.default)(f.prototype,"restore"),f.prototype),(0,_.default)(f.prototype,"setCurrentVolume",[S.action],(0,g.default)(f.prototype,"setCurrentVolume"),f.prototype),f));t.default=D},439149:(e,a,r)=>{"use strict";var n=r(818565),l=r(213696),i=r(303787),o=r(810732),s=r(532462),u=r(110819),d=r(722338),c=r(633950),f=r(548924);c(a,"__esModule",{value:!0}),a.default=a.Attach=void 0;var p=f(r(68982)),h=f(r(424836)),m=f(r(89195)),g=f(r(819989)),v=f(r(877879)),y=r(87067),b=r(860615),_=r(899196),S=f(r(342616)),x=r(492325),w=r(505997);function C(e,t){var a=n(e);if(l){var r=l(e);t&&(r=i(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a,r,n=null!=arguments[t]?arguments[t]:{};t%2?s(a=C(Object(n),!0)).call(a,(function(t){(0,v.default)(e,t,n[t])})):u?d(e,u(n)):s(r=C(Object(n))).call(r,(function(t){c(e,t,o(n,t))}))}return e}class I extends b.ModalAction{constructor(){super(...arguments),(0,v.default)(this,"disabledInstance",(e=>!(0,x.allowAttachVolumeInstance)(e)||this.alreadyAttached(e))),(0,v.default)(this,"alreadyAttached",(e=>{var{attachments:t=[]}=this.item;return!!(0,p.default)(t).call(t,(t=>t.server_id===e.id))})),(0,v.default)(this,"onSubmit",(e=>{var{instance:t}=e,{id:a}=this.item,{selectedRowKeys:r}=t;return h.default.all((0,m.default)(r).call(r,(e=>this.vmStore.attachVolume({id:e,body:{volumeAttachment:{volumeId:a}}}))))}))}init(){this.store=S.default,this.vmStore=new _.ServerStore}get name(){return t("Attach")}get isAsyncAction(){return!0}static get modalSize(){return"large"}getModalSize(){return"large"}get defaultValue(){var e,t,{name:a,id:r,size:n,volume_type:l}=this.item;return{volume:(0,g.default)(e=(0,g.default)(t="".concat(a||r,"(")).call(t,l," | ")).call(e,n,"GiB)")}}get formItems(){return[{name:"volume",label:t("Volume"),type:"label",iconType:"volume"},k({name:"instance",label:t("Instance"),type:"select-table",required:!0,backendPageStore:this.vmStore,disabledFunc:this.disabledInstance,extraParams:{noReminder:!0},isMulti:!1},x.instanceSelectTablePropsBackend)]}}a.Attach=I,(0,v.default)(I,"id","attach"),(0,v.default)(I,"title",t("Attach")),(0,v.default)(I,"policy","os_compute_api:os-volumes-attachments:create"),(0,v.default)(I,"allowed",(e=>h.default.resolve((0,w.isAvailable)(e)||(0,w.isMultiAttach)(e))));a.default=(0,y.inject)("rootStore")((0,y.observer)(I))},447629:(e,t,a)=>{var r=a(585477);"string"==typeof r&&(r=[[e.id,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(453027)(r,n);r.locals&&(e.exports=r.locals)},449630:(e,a,r)=>{"use strict";var n=r(818565),l=r(213696),i=r(303787),o=r(810732),s=r(532462),u=r(110819),d=r(722338),c=r(633950),f=r(548924);c(a,"__esModule",{value:!0}),a.getCanReachSubnetIdsWithRouterId=A,a.getCanReachSubnetIdsWithRouterIdInComponent=function(e){return F.apply(this,arguments)},a.getLinkedRouterIdsByFip=function(e,t){return T.apply(this,arguments)},a.getRouterState=a.getRouterSelectTablePropsBackend=a.getRouterColumns=void 0,a.getRoutersWithIDAndExtInfo=P,a.routerStatus=a.routerState=a.routerSortProps=a.routerFilters=void 0;var p=f(r(601839)),h=f(r(877879)),m=f(r(89195)),g=f(r(303787)),v=f(r(823872)),y=f(r(208407)),b=r(522376),_=r(83575);function S(e,t){var a=n(e);if(l){var r=l(e);t&&(r=i(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a,r,n=null!=arguments[t]?arguments[t]:{};t%2?s(a=S(Object(n),!0)).call(a,(function(t){(0,h.default)(e,t,n[t])})):u?d(e,u(n)):s(r=S(Object(n))).call(r,(function(t){c(e,t,o(n,t))}))}return e}var w=a.routerStatus={ACTIVE:t("Active"),ERROR:t("Error")};a.routerState={UP:t("Up"),DOWN:t("Down")};a.getRouterState=e=>e?t("Up"):t("Down");var C=e=>[{title:t("ID/Name"),dataIndex:"name",routeName:e.getRouteName("routerDetail")},{title:t("Project ID/Name"),dataIndex:"project_name",isHideable:!0,hidden:!e.isAdminPage,sortKey:"project_id"},{title:t("Status"),dataIndex:"status",valueMap:w},{title:t("Open External Gateway"),dataIndex:"hasExternalGateway",valueRender:"yesNo",isHideable:!0,sorter:!1},{title:t("External Network ID/Name"),dataIndex:"externalNetworkName",isHideable:!0,sorter:!1,isLink:!0,idKey:"externalNetworkId",routeName:e.getRouteName("networkDetail")},{title:t("External Fixed IP"),dataIndex:"externalFixedIps",isHideable:!0,sorter:!1,render:e=>(0,m.default)(e).call(e,(e=>v.default.createElement("div",{key:e.ip_address},e.ip_address)))||"-",stringify:e=>(0,m.default)(e).call(e,(e=>e.ip_address)).join(",")||"-"},{title:t("Created At"),dataIndex:"created_at",valueRender:"sinceTime",isHideable:!0,sorter:!1}];a.getRouterColumns=C;var k=a.routerFilters=[{label:t("ID"),name:"id"},{label:t("Name"),name:"name"},{label:t("Status"),name:"status",options:(0,_.getOptions)(w)}],I=a.routerSortProps={isSortByBack:!0,defaultSortKey:"status",defaultSortOrder:"descend"};function P(e){return D.apply(this,arguments)}function D(){return(D=(0,p.default)((function*(e){var t={fields:["id","external_gateway_info"],project_id:e};return yield y.default.pureFetchList(t)}))).apply(this,arguments)}function T(){return(T=(0,p.default)((function*(e,t){var a,r=yield P(e);return(0,m.default)(a=(0,g.default)(r).call(r,(e=>e.external_gateway_info&&e.external_gateway_info.network_id===t.floating_network_id))).call(a,(e=>e.id))}))).apply(this,arguments)}function A(e,t){return R.apply(this,arguments)}function R(){return(R=(0,p.default)((function*(e,t){var a=yield P(e);t&&(a=(0,g.default)(a).call(a,t));var r=yield(0,b.getPortsWithFixedIPs)();return{canReachSubnetIdsWithRouterId:(0,b.getSubnetToRouter)(r,a),routerIdWithExternalNetworkInfo:a}}))).apply(this,arguments)}function F(){return(F=(0,p.default)((function*(e){var{canReachSubnetIdsWithRouterId:t,routerIdWithExternalNetworkInfo:a}=yield A(this.currentProjectId,e);return this.setState({canReachSubnetIdsWithRouterId:t,routerIdWithExternalNetworkInfo:a}),t}))).apply(this,arguments)}a.getRouterSelectTablePropsBackend=e=>x(x({},I),{},{columns:C(e),filterParams:k})},467193:(e,a,r)=>{"use strict";var n=r(633950),l=r(548924);n(a,"__esModule",{value:!0}),a.default=void 0;var i=l(r(877879)),o=r(860615),s=l(r(595605));class u extends o.ConfirmAction{constructor(){super(...arguments),(0,i.default)(this,"policy","delete_port"),(0,i.default)(this,"allowedCheckFunc",(e=>!e||this.isOwnerOrAdmin(e))),(0,i.default)(this,"onSubmit",(e=>s.default.delete(e)))}get id(){return"delete"}get title(){return t("Delete Virtual Adapter")}get isDanger(){return!0}get buttonText(){return t("Delete")}get actionName(){return t("delete virtual adapter")}isOwnerOrAdmin(){return!0}}a.default=u},472519:(e,t,a)=>{var r=a(788911);"string"==typeof r&&(r=[[e.id,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(453027)(r,n);r.locals&&(e.exports=r.locals)},487268:(e,t,a)=>{(t=e.exports=a(840049)(!1)).push([e.id,".index__input--1LaXS {\n  margin-right: 32px;\n  margin-left: 16px;\n}\n",""]),t.locals={input:"index__input--1LaXS"}},493717:(e,t,a)=>{var r=a(433629);"string"==typeof r&&(r=[[e.id,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(453027)(r,n);r.locals&&(e.exports=r.locals)},496469:(e,a,r)=>{"use strict";var n=r(633950),l=r(548924);n(a,"__esModule",{value:!0}),a.default=void 0;var i=l(r(601839)),o=l(r(877879)),s=r(860615),u=l(r(899196));class d extends s.ConfirmAction{constructor(){var e;super(...arguments),e=this,(0,o.default)(this,"policy","os_compute_api:os-attach-interfaces:delete"),(0,o.default)(this,"allowedCheckFunc",(e=>!!e.device_id&&"compute:nova"===e.device_owner)),(0,o.default)(this,"onSubmit",(0,i.default)((function*(){var{id:t,device_id:a}=e.item;return u.default.detachInterface({id:a,ports:[t]})})))}get id(){return"detach_instance"}get title(){return t("Detach Instance")}get buttonText(){return t("Detach")}get actionName(){return t("detach instance")}get isAsyncAction(){return!0}}a.default=d},506408:(e,t,a)=>{var r=a(529088);"string"==typeof r&&(r=[[e.id,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(453027)(r,n);r.locals&&(e.exports=r.locals)},508929:(e,a,r)=>{"use strict";var n=r(633950),l=r(548924);n(a,"__esModule",{value:!0}),a.default=a.NetworkStep=void 0;var i=l(r(424836)),o=l(r(68982)),s=l(r(89195)),u=l(r(532462)),d=l(r(360147)),c=l(r(75613)),f=l(r(601839)),p=l(r(877879)),h=l(r(620173)),m=l(r(371573)),g=l(r(823872)),v=r(87067),y=r(288274),b=r(915363),_=r(591106),S=r(595605),x=r(646197),w=l(r(978711)),C=l(r(325885)),k=r(712903),I=r(415065),P=r(846964),D=r(113479),{isIPv4:T,isIpv6:A}=x.ipValidate;class R extends w.default{constructor(){var e;super(...arguments),e=this,(0,p.default)(this,"allowed",(()=>i.default.resolve())),(0,p.default)(this,"getSubnetPromise",function(){var t=(0,f.default)((function*(t){if(!e.subnetMap[t]){var a=yield e.subnetStore.fetchList({network_id:t});e.subnetMap[t]=a}return e.subnetMap[t]}));return function(e){return t.apply(this,arguments)}}()),(0,p.default)(this,"checkNetworks",(e=>!(!(0,h.default)(e)||(0,m.default)(e)||(0,m.default)(e[0].value))&&(!(0,o.default)(e).call(e,(e=>!e.value||!e.value.network))&&!(0,o.default)(e).call(e,(e=>1===e.value.ipType&&!T(e.value.ip)&&!A(e.value.ip)))))),(0,p.default)(this,"disabledNetwork",(e=>!e.subnets||0===e.subnets.length)),(0,p.default)(this,"onNetworkChange",(e=>{var{selectedRows:t}=e;this.setState({networkSelectRows:t},(()=>{this.getSubnets()})),this.updateContext({networkSelectRows:t})})),(0,p.default)(this,"checkNetworkAndPort",(e=>{var{getFieldValue:a}=e;return{validator(){var e=a("networkSelect"),r=a("ports"),{selectedRowKeys:n=[]}=e||{},{selectedRowKeys:l=[]}=r||{};return 0===n.length&&0===l?i.default.reject(t("Please select")):i.default.resolve()}}})),(0,p.default)(this,"onPortChange",(e=>{var{selectedRows:t=[]}=e||{};this.setState({portSelectRows:t}),this.updateContext({portSelectRows:t})}))}init(){var e,t;this.networkStore=new y.NetworkStore,this.subnetStore=new b.SubnetStore,this.securityGroupStore=new _.SecurityGroupStore,this.portStore=new S.PortStore,this.subnetMap={},this.state.networkSelectRows=(null===(e=this.props.context)||void 0===e?void 0:e.networkSelectRows)||[],this.state.portSelectRows=(null===(t=this.props.context)||void 0===t?void 0:t.portSelectRows)||[]}get title(){return"NetworkStep"}get name(){return"NetworkStep"}get defaultValue(){return{networks:[]}}getSubnets(){var e=this;return(0,f.default)((function*(){var{networkSelectRows:t,networks:a=[]}=e.state,r=yield i.default.all((0,s.default)(t).call(t,(t=>e.getSubnetPromise(t.id)))),n=[];(0,u.default)(r).call(r,(e=>{n.push(...e)}));var l=[],c=(0,s.default)(t).call(t,((e,t)=>{var r=(0,o.default)(n).call(n,(t=>t.network_id===e.id)),i=(0,o.default)(a).call(a,((t,a)=>t.value.network===e.id&&(l.push(a),!0)));return i||{value:{network:e.id,subnet:r.id,networkOption:e,subnetOption:r,ipTypeOption:k.ipTypeOptions[0],ipType:0},index:t}})),f=(0,s.default)(t).call(t,(e=>e.id));(0,u.default)(a).call(a,((e,t)=>{(0,d.default)(l).call(l,t)<0&&(0,d.default)(f).call(f,e.value.network)>=0&&c.push(e)})),e.updateFormValue("networks",c),e.setState({subnets:n,initValue:c})}))()}get nameForStateUpdate(){return["networkSelect","networks","ports"]}get showSecurityGroups(){var{networkSelectRows:e=[],portSelectRows:t=[]}=this.state;return!(!e.length&&!t.length)&&((!e.length||!(0,c.default)(e).call(e,(e=>!e.port_security_enabled)))&&(!t.length||!(0,c.default)(t).call(t,(e=>!e.port_security_enabled))))}get formItems(){var{networkSelectRows:e=[],subnets:a,initValue:r=[],ports:n=[]}=this.state,l=e.length>0,o=0===n.length,s=0===e.length;return[{name:"networkSelect",label:t("Networks"),type:"network-select-table",disabledFunc:this.disabledNetwork,filterPublicNetworks:!0,onChange:this.onNetworkChange,showExternal:!0,isMulti:!0,required:o,otherRule:this.checkNetworkAndPort,dependencies:["ports"],header:g.default.createElement("div",null,t("Please reasonably plan the network and subnet to which the virtual network card belongs."),t(" You can go to the console to "),(0,D.getLinkRender)({key:"network",value:"".concat(t("create a new network/subnet")," > "),extra:{target:"_blank"}}))},{name:"networks",label:t("Virtual LAN"),type:"add-select",networks:e,hidden:!l,subnets:a,itemComponent:C.default,required:l,addTextTips:t("Virtual LANs"),addText:t("Add Virtual LAN"),minCount:e.length||0,optionsByIndex:!0,initValue:r,validator:(e,t)=>this.checkNetworks(t)?i.default.resolve():i.default.reject(""),wrapperCol:{span:19}},{name:"divider1",type:"divider"},{name:"ports",type:"select-table",label:t("Ports"),extraParams:{project_id:this.currentProjectId,status:"DOWN"},backendPageStore:this.portStore,isMulti:!0,header:t("Ports provide extra communication channels to your instances. You can select ports instead of networks or a mix of both (The port executes its own security group rules by default)."),filterParams:P.portFilters,columns:P.portColumns,dependencies:["networkSelect"],otherRule:this.checkNetworkAndPort,required:s,onChange:this.onPortChange},{name:"divider2",type:"divider"},{name:"securityGroup",label:t("Security Group"),type:"select-table",tip:t("Each instance belongs to at least one security group, which needs to be specified when it is created. Instances in the same security group can communicate with each other on the network, and instances in different security groups are disconnected from the internal network by default."),backendPageStore:this.securityGroupStore,extraParams:{project_id:this.currentProjectId},hidden:!this.showSecurityGroups,required:this.showSecurityGroups,isMulti:!0,header:g.default.createElement("div",{style:{marginBottom:8}},t("The security group is similar to the firewall function and is used to set up network access control. "),t(" You can go to the console to "),(0,D.getLinkRender)({key:"securityGroup",value:"".concat(t("create a new security group"),"> "),extra:{target:"_blank"}}),t("Note: The security group you use will act on all virtual adapters of the instance.")),filterParams:I.securityGroupFilter,columns:I.securityGroupColumns}]}}a.NetworkStep=R;a.default=(0,v.inject)("rootStore")((0,v.observer)(R))},509667:(e,a,r)=>{"use strict";var n=r(633950),l=r(548924);n(a,"__esModule",{value:!0}),a.default=void 0;var i=l(r(29672)),o=l(r(532462));r(21184);var s=l(r(35934)),u=l(r(15191));r(279840);var d=l(r(78590)),c=l(r(877879)),f=l(r(620173)),p=l(r(823872)),h=r(860615),m=l(r(342616));r(877800),r(384472);class g extends h.ConfirmAction{constructor(){super(...arguments),(0,c.default)(this,"policy","volume:delete"),(0,c.default)(this,"canDelete",(e=>{var{status:t,attachments:a=[]}=e,r=["available","error","error_extending"];return(0,i.default)(r).call(r,t)&&!(null!=a&&a.length)})),(0,c.default)(this,"allowedCheckFunc",(e=>this.canDelete(e))),(0,c.default)(this,"onSubmit",(e=>{var{id:t,isCascadeDeleted:a=!0}=e||this.item;return a?m.default.cascadeDelete({id:t}):m.default.delete({id:t})})),(0,c.default)(this,"initCascadeValue",(e=>{this.onChangeCascade(!0,e)})),(0,c.default)(this,"confirmContext",(e=>{var a=this.getName(e);return this.initCascadeValue(e),p.default.createElement("div",null,p.default.createElement("p",{style:{marginBottom:"16px"}},this.unescape(t("Are you sure to delete volume { name }? ",{name:a}))),p.default.createElement("div",null,this.renderCascadeDeletion(e),this.renderCascadeDeletionTip()))}))}get id(){return"delete"}get title(){return t("Delete Volume")}get name(){return t("Delete Volume")}get isDanger(){return!0}get buttonText(){return t("Delete")}get actionName(){return t("delete volume")}onChangeCascade(e,t){(0,f.default)(t)?(0,o.default)(t).call(t,(t=>{t.isCascadeDeleted=e})):t.isCascadeDeleted=e}renderCascadeDeletion(e){return p.default.createElement(d.default,{defaultChecked:!0,onChange:t=>{this.onChangeCascade(t.target.checked,e)}},t("Cascading deletion"))}get cascadeDeletionTip(){return t("Using cascading deletion, when the volume has snapshots, the associated snapshot will be automatically deleted first, and then the volume will be deleted, thereby improving the success rate of deleting the volume.")}renderCascadeDeletionTip(){return p.default.createElement(s.default,{title:this.cascadeDeletionTip},p.default.createElement(u.default,null))}}a.default=g},513468:(e,t,a)=>{var r=a(775988);"string"==typeof r&&(r=[[e.id,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(453027)(r,n);r.locals&&(e.exports=r.locals)},516651:(e,a,r)=>{"use strict";var n=r(633950),l=r(548924);n(a,"__esModule",{value:!0}),a.default=a.AssociateFip=void 0;var i=l(r(424836)),o=l(r(601839)),s=l(r(877879)),u=r(87067),d=l(r(722625)),c=r(860615),f=r(492325),p=r(846964),h=r(449630),m=r(522376);class g extends c.ModalAction{constructor(){super(...arguments),(0,s.default)(this,"handleFixedIPChange",(e=>m.handleFixedIPChange.call(this,e))),(0,s.default)(this,"onSubmit",(e=>{var{fixed_ip:t,fip:a}=e,r=t.selectedRows[0],n=a.selectedRowKeys[0];return d.default.associateFip({id:n,port_id:this.item.id,fixed_ip_address:r.fixed_ip_address})}))}init(){this.getInterfaces(),h.getCanReachSubnetIdsWithRouterIdInComponent.call(this),this.state={interfaces:[],fixed_ip:null,canAssociateFloatingIPs:[],canReachSubnetIdsWithRouterId:[],portLoading:!0}}getInterfaces(){var e=this;return(0,o.default)((function*(){var t=[e.item],a=yield(0,m.getInterfaceWithReason)(t);e.setState({interfaces:a,portLoading:!1})}))()}static get modalSize(){return"large"}getModalSize(){return"large"}get name(){return t("Associate Floating IP")}get ports(){var{interfaces:e,canReachSubnetIdsWithRouterId:t}=this.state;return p.getPortsAndReasons.call(this,e,t)}get defaultValue(){var{name:e}=this.item;return{virtualAdapter:e}}getFIPFormItemExtra(){return(0,m.getFIPFormItemExtra)()}disableFIPAssociate(e){return(0,m.disableFIPAssociate)(e)}get formItems(){var e=(0,m.getFixedIPFormItemForAssociate)(t("Fixed IP"),this),a=(0,m.getFIPFormItemForAssociate)(this);return[{name:"virtualAdapter",label:t("Virtual Adapter"),type:"label",iconType:"instance"},e,a]}}a.AssociateFip=g,(0,s.default)(g,"id","AssociateFip"),(0,s.default)(g,"title",t("Associate Floating IP")),(0,s.default)(g,"policy","update_floatingip"),(0,s.default)(g,"allowed",((e,t)=>{var{isAdminPage:a=!1}=t;return i.default.resolve(!a&&(0,f.isNotError)(e)&&e.associatedDetail&&e.associatedDetail.length<e.ipv4.length)}));a.default=(0,u.inject)("rootStore")((0,u.observer)(g))},522376:(e,a,r)=>{"use strict";var n=r(633950),l=r(548924);n(a,"__esModule",{value:!0}),a.getFIPFormItemForAssociate=a.getFIPFormItemExtra=a.floatingIpStatus=a.disableFIPAssociate=void 0,a.getFipsFromRouterId=T,a.getFixedIPFormItemForAssociate=void 0,a.getInterfaceWithReason=function(e){return C.apply(this,arguments)},a.getPortForwardingName=void 0,a.getPortsWithFixedIPs=function(){return w.apply(this,arguments)},a.getReasonForExternalNetworkPortOrAlreadyBindFip=P,a.getSubnetToRouter=function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=[];return(0,i.default)(e).call(e,(e=>{var n;(0,o.default)(t).call(t,(t=>!(a&&!t.external_gateway_info)&&t.id===e.device_id))&&(0,i.default)(n=e.fixed_ips).call(n,(t=>{r.push({subnet_id:t.subnet_id,router_id:e.device_id})}))})),r},a.handleFixedIPChange=function(e){return R.apply(this,arguments)},a.resourceType=a.portForwardingProtocols=void 0,a.saveAndBuildPromisesFromInterfaces=k,a.transitionStatuses=void 0;var i=l(r(532462)),o=l(r(68982)),s=l(r(819989)),u=l(r(424836)),d=l(r(75613)),c=l(r(29672)),f=l(r(89195)),p=l(r(303787)),h=l(r(32099)),m=l(r(601839)),g=l(r(371573)),v=l(r(194141)),y=l(r(288274)),b=r(646197),_=l(r(722625)),S=r(955924),{isIPv4:x}=b.ipValidate;a.floatingIpStatus={AVAILABLE:t("Available"),PENDING:t("Pending"),ACTIVE:t("Active"),ERROR:t("Error"),DOWN:t("Down")},a.resourceType={compute:t("Instance"),Octavia:t("Load Balancer"),"network:router_gateway":t("Router"),database:t("Database Instance"),null:"-"},a.transitionStatuses=["PENDING"];function w(){return(w=(0,m.default)((function*(){return yield v.default.pureFetchList({device_owner:["network:router_interface_distributed","network:router_interface","network:ha_router_replicated_interface"],fields:["fixed_ips","device_id","device_owner"]})}))).apply(this,arguments)}function C(){return(C=(0,m.default)((function*(e){var[t,a,r]=yield k(e);return yield P(t,a,r)}))).apply(this,arguments)}function k(e){return I.apply(this,arguments)}function I(){return(I=(0,m.default)((function*(e){var t=[],a=[],r=[];return(0,i.default)(e).call(e,(e=>{var n,l=e.port_id||e.id,o=e.mac_addr||e.mac_address||"",s=e.net_id||e.network_id;(0,i.default)(n=e.fixed_ips).call(n,(e=>{r.push({port_id:l,fixed_ip_address:e.ip_address,mac_address:o,subnet_id:e.subnet_id,network_id:s}),t.push(y.default.fetchDetail({id:s})),x(e.ip_address)?a.push(_.default.pureFetchList({fixed_ip_address:e.ip_address})):a.push(u.default.resolve([]))}))})),[r,t,a]}))).apply(this,arguments)}function P(e,t,a){return D.apply(this,arguments)}function D(){return(D=(0,m.default)((function*(e,t,a){var r=[...e],n=yield u.default.all(t);(0,i.default)(n).call(n,((e,t)=>{r[t].network_name=e.name}));var l=yield y.default.pureFetchList({"router:external":!0});(0,i.default)(r).call(r,(e=>{(0,d.default)(l).call(l,(t=>{var a;return(0,c.default)(a=t.subnets).call(a,e.subnet_id)}))?e["router:external"]=!0:e["router:external"]=!1}));var o=yield u.default.all(a);return(0,i.default)(o).call(o,((e,t)=>{r[t].floatingIP=e[0]&&e[0].port_id===r[t].port_id&&e[0].floating_ip_address||""})),r}))).apply(this,arguments)}function T(e){return A.apply(this,arguments)}function A(){return(A=(0,m.default)((function*(e){var t,{routerIdWithExternalNetworkInfo:a}=this.state,r=(0,o.default)(a).call(a,(t=>t.id===e.router_id));if(!r.external_gateway_info)return[];var n=r.external_gateway_info.network_id,l=yield _.default.pureFetchList({floating_network_id:n,status:"DOWN",project_id:this.currentProjectId}),i=yield y.default.fetchDetail({id:n});return(0,f.default)(t=(0,p.default)(l).call(l,(e=>!e.fixed_ip_address&&!e.port_details))).call(t,(e=>(e.network_name=i.name,e.name=e.floating_ip_address,e)))}))).apply(this,arguments)}function R(){return(R=(0,m.default)((function*(e){this.setState({fipLoading:!0});var{canReachSubnetIdsWithRouterId:t}=this.state;e.selectedRows.length||this.setState({fixed_ip:null,canAssociateFloatingIPs:[],fipLoading:!1});var a=e.selectedRows[0],r=[],n=(0,p.default)(t).call(t,(e=>e.subnet_id===a.subnet_id)),l=yield u.default.all((0,f.default)(n).call(n,(e=>T.call(this,e))));(0,i.default)(l).call(l,(e=>{r.push(...e)}));var o={};(0,i.default)(r).call(r,(e=>{o[e.id]=e}));var s=(0,h.default)(o);this.setState({fixed_ip:a,canAssociateFloatingIPs:s,fipLoading:!1})}))).apply(this,arguments)}a.getFixedIPFormItemForAssociate=(e,a)=>{var{portLoading:r}=a.state;return{name:"fixed_ip",label:e,type:"select-table",required:!0,data:a.ports,isLoading:r,isMulti:!1,filterParams:[{label:t("Ip Address"),name:"name"}],columns:[{title:t("Ip Address"),dataIndex:"name"},{title:t("Mac Address"),dataIndex:"mac_address"},{title:t("Network"),dataIndex:"network_name"},{title:t("Subnet ID"),dataIndex:"subnet_id"},{title:t("Reason"),dataIndex:"reason"}],disabledFunc:e=>!e.available,onChange:a.handleFixedIPChange}};a.getFIPFormItemExtra=()=>(0,S.enablePFW)()?t("The floating IP configured with port forwardings cannot be bound"):"";a.disableFIPAssociate=e=>!!(e.port_forwardings||[]).length;a.getFIPFormItemForAssociate=e=>{var{canAssociateFloatingIPs:a,fipLoading:r}=e.state;return{name:"fip",label:t("Floating Ip Address"),type:"select-table",required:!0,data:a,isLoading:r,isMulti:!1,extra:e.getFIPFormItemExtra(),disabledFunc:e.disableFIPAssociate,filterParams:[{label:t("Floating Ip Address"),name:"name"}],columns:[{title:t("Floating Ip Address"),dataIndex:"name"},{title:t("Network"),dataIndex:"network_name"},{title:t("Created At"),dataIndex:"created_at",valueRender:"sinceTime"}]}};var F=a.portForwardingProtocols={tcp:t("TCP"),udp:t("UDP")};a.getPortForwardingName=function(){var e,t,a,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if((0,g.default)(n))return"";var{protocol:i,external_port:o,external_port_range:u,internal_ip_address:d,internal_port:c,internal_port_range:f}=n,p=F[i]||i,h=(0,s.default)(e=(0,s.default)(t="".concat(o||u," => ")).call(t,d,":")).call(e,c||f),m=l?(0,s.default)(a="".concat(l,":")).call(a,h):h;return(0,s.default)(r="".concat(p,": ")).call(r,m)}},529088:(e,t,a)=>{(t=e.exports=a(840049)(!1)).push([e.id,"/* init */\n/* specific color */\n/*  border */\n/*  input */\n/*  background */\n/* button */\n/*  shadow */\n/*  font */\n/*  animation */\n/*  size */\n/*  sider */\n.index__layout-header-menu-search-border--2vV86 {\n  border: none;\n}\n.index__vertical-center--5hz2d {\n  position: absolute;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n          transform: translateY(-50%);\n}\n/* login */\n.index__wrapper--3q1S2 {\n  min-height: calc(100vh - 108px);\n  margin-top: 16px;\n  padding: 0 16px;\n}\n.index__hint--3yEH0 {\n  margin-bottom: 16px;\n}\n.index__hints--1QRzH .ant-alert-warning {\n  background-color: #fffbe6;\n  border: 1px solid #ffe58f;\n}\n.index__hints--1QRzH .ant-alert-warning .ant-alert-icon {\n  color: #fedf40;\n}\n.index__hints--1QRzH .ant-alert-message {\n  max-height: 40px;\n  overflow-y: auto;\n}\n",""]),t.locals={primaryColor:"#a33e3e",normalColor:"rgba(34, 117, 74, 0.78)",successColor:"#57e39b",warnColor:"#fedf40",warnDarkColor:"#fa8c16",warnLightColor:"#f6b23d",errorColor:"#eb354d",dangerColor:"#c4233e",moneyColor:"#f50",infoColor:"rgba(0, 104, 255, 0.65)",headerHeight:"50px",productsColumnWidth:"220px","layout-header-menu-search-border":"index__layout-header-menu-search-border--2vV86","vertical-center":"index__vertical-center--5hz2d",wrapper:"index__wrapper--3q1S2",hint:"index__hint--3yEH0",hints:"index__hints--1QRzH"}},536356:(e,a,r)=>{"use strict";var n=r(633950),l=r(548924);n(a,"__esModule",{value:!0}),a.volumeTypeSelectProps=a.volumeTypeFilters=a.volumeTypeColumns=a.hasEncryption=a.getVolumeTypeColumns=a.creationMethod=a.controls=a.consumerTypes=void 0;var i=l(r(75613)),o=l(r(148083)),s=l(r(866769)),u=l(r(371573)),d=(a.consumerTypes={"front-end":t("Frontend"),"back-end":t("Backend"),both:t("Both of Frontend and Backend")},a.creationMethod={manu:t("Manu"),auto:t("Auto")},a.controls={"front-end":t("Front End"),"back-end":t("Back End")},e=>{var a=e&&(0,i.default)(e).call(e,(e=>{var t,a=null==e||null===(t=e.extra_specs)||void 0===t?void 0:t[":price"];return a&&!(0,o.default)((0,s.default)(a))})),r=[{title:t("Name"),dataIndex:"name"},{title:t("Description"),dataIndex:"description",isHideable:!0,valueRender:"noValue"},{title:t("Read IOPS/sec per GB"),dataIndex:["qos_props","read_iops_sec_per_gb"],render:e=>e||"-"},{title:t("Write IOPS/sec per GB"),dataIndex:["qos_props","write_iops_sec_per_gb"],render:e=>e||"-"}];return a&&r.push({title:t("Cost (/GB/hr)"),dataIndex:["extra_specs",":price"],isHideable:!0,render:e=>{var t=(0,s.default)(e);return(0,o.default)(t)?"-":"$".concat(t.toFixed(6))}}),r.push({title:t("Public"),dataIndex:"is_public",valueRender:"yesNo"}),r});a.getVolumeTypeColumns=d;a.volumeTypeColumns=d([]);var c=a.volumeTypeFilters=[{label:t("Name"),name:"name"}];a.volumeTypeSelectProps={columns:d([]),filterParams:c};a.hasEncryption=e=>{var{encryption:t}=e||{};return!(!t||(0,u.default)(t))&&!t.deleted_at}},551416:(e,a,r)=>{"use strict";var n=r(818565),l=r(213696),i=r(303787),o=r(810732),s=r(532462),u=r(110819),d=r(722338),c=r(633950),f=r(471742),p=r(548924);c(a,"__esModule",{value:!0}),a.default=void 0,r(39044);var h=p(r(564690)),m=p(r(877879));r(970094);var g=p(r(752500)),v=function(e,t){if("function"==typeof f)var a=new f,r=new f;return function(e,t){if(!t&&e&&e.__esModule)return e;var n,l,i={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return i;if(n=t?r:a){if(n.has(e))return n.get(e);n.set(e,i)}for(var s in e)"default"!==s&&{}.hasOwnProperty.call(e,s)&&((l=(n=c)&&o(e,s))&&(l.get||l.set)?n(i,s,l):i[s]=e[s]);return i}(e,t)}(r(823872)),y=(r(877800),r(153434)),b=r(211110),_=p(r(472519));function S(e,t){var a=n(e);if(l){var r=l(e);t&&(r=i(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a,r,n=null!=arguments[t]?arguments[t]:{};t%2?s(a=S(Object(n),!0)).call(a,(function(t){(0,m.default)(e,t,n[t])})):u?d(e,u(n)):s(r=S(Object(n))).call(r,(function(t){c(e,t,o(n,t))}))}return e}var{RangePicker:w}=g.default,{h:C,d:k,w:I}=y.MILLISECOND_IN_TIME_UNIT;class P extends v.Component{constructor(e){super(e),(0,m.default)(this,"onChangeType",(e=>{var t={value:e};1!==e&&(t.start=void 0,t.end=void 0),this.setState(x({},t),(()=>{this.onChange(t)}))})),(0,m.default)(this,"onChange",(e=>{var{onChange:t}=this.props;t&&t(x(x({},this.state),e))})),(0,m.default)(this,"onDateChange",(e=>{var t={start:e?e[0]:null,end:e?e[1]:null};this.setState(x({},t),(()=>{this.onChange(t)}))}));var{defaultValue:t}=e;this.state={defaultValue:void 0!==t?t:C,value:null,start:null,end:null}}componentDidMount(){var{defaultValue:e,value:t}=this.state;this.onChangeType(t||e)}get options(){return[{label:t("All"),value:0},{label:t("In the last hour"),value:C},{label:t("Recently a day"),value:k},{label:t("In the last 7 days"),value:I},{label:t("In the last 30 days"),value:30*k},{label:t("Custom"),value:1}]}render(){var{defaultValue:e,value:t}=this.state;return v.default.createElement("div",{className:_.default.wrapper},v.default.createElement(h.default.Group,{defaultValue:e,value:t,options:this.options,buttonStyle:"solid",optionType:"button",onChange:e=>this.onChangeType(e.target.value)}),1===t&&v.default.createElement(w,{onCalendarChange:this.onDateChange,format:b.timeFormatStr.YMDHm,showTime:!0}))}}a.default=P},561804:(e,a,r)=>{"use strict";var n=r(633950),l=r(548924);n(a,"__esModule",{value:!0}),a.default=x,r(21184);var i=l(r(35934));r(594800);var o=l(r(265582));r(573969);var s=l(r(38959)),u=l(r(949975)),d=l(r(303884));r(358350);var c=l(r(377556)),f=l(r(89195)),p=l(r(342279)),h=l(r(823872)),m=(r(877800),r(384472),l(r(61296))),g=r(83575),v=l(r(131751)),y=r(102907),b=l(r(141815)),_=(e,t)=>{var{id:a,title:r,actionType:n,buttonType:l,buttonText:i,isDanger:o}=e;return{id:a,title:r,name:i||r,actionType:n,buttonType:l,isDanger:o,action:e,isAllowed:t.length>0,items:t,isBatch:!0,needHide:!1}};function S(e){var{actions:a,selectedItems:r,onFinishAction:n,containerProps:l,onClickAction:i,onCancelAction:p}=e;if(a.length<1)return null;var m=(0,f.default)(a).call(a,(e=>{var t="table-batch-more-".concat((0,g.generateId)()),a=_(e,r),{isDanger:o,name:s}=a;return a.onFinishAction=n,a.isDanger=!!o,r.length?h.default.createElement(c.default.Item,{key:t},h.default.createElement(v.default,(0,d.default)({},a,{buttonType:"link",onFinishAction:n,containerProps:l,onClickAction:i,onCancelAction:p,buttonClassName:b.default["more-action-btn"]}))):h.default.createElement(c.default.Item,{key:t,disabled:!0,style:{textAlign:"center"}},s)})),y=h.default.createElement(c.default,null,m);return h.default.createElement(o.default,{overlay:y,overlayClassName:b.default["table-batch-menu"]},h.default.createElement(s.default,{type:"primary"},t("More Actions")," ",h.default.createElement(u.default,null)))}function x(e){var a,r,{selectedItems:n,visibleButtonNumber:l,batchActions:o,onFinishAction:u,containerProps:c,onClickAction:m,onCancelAction:b,resourceName:x,isAdminPage:w}=e,C=[],k=[],I=(0,y.getActionsByPolicy)({actions:o,containerProps:c,isAdminPage:w});return l<I.length?l<0?k=I:(C=(0,p.default)(I).call(I,0,l),k=(0,p.default)(I).call(I,l)):C=I,r=(0,f.default)(C).call(C,(e=>{var{isDanger:a=!1,buttonType:r="default"}=e;return n&&0!==n.length?h.default.createElement(v.default,(0,d.default)({},_(e,n),{key:"table-batch-action-".concat((0,g.generateId)()),onFinishAction:u,containerProps:c,onClickAction:m,onCancelAction:b})):h.default.createElement(i.default,{title:t("Please select {name} first",{name:x}),key:"tooltip-".concat((0,g.generateId)())},h.default.createElement(s.default,{type:r,disabled:!0,danger:a},e.buttonText||e.title))})),a=h.default.createElement(S,{actions:k,selectedItems:n,onFinishAction:u,containerProps:c,onClickAction:m,onCancelAction:b}),h.default.createElement(h.default.Fragment,null,r,a)}x.defaultProps={visibleButtonNumber:1},x.prototypes={visibleButtonNumber:m.default.number}},572455:(e,a,r)=>{"use strict";var n=r(818565),l=r(213696),i=r(303787),o=r(810732),s=r(532462),u=r(110819),d=r(722338),c=r(633950),f=r(471742),p=r(548924);c(a,"__esModule",{value:!0}),a.default=a.Attach=void 0;var h=p(r(29672)),m=p(r(424836)),g=p(r(877879)),v=r(87067),y=r(860615),b=function(e,t){if("function"==typeof f)var a=new f,r=new f;return function(e,t){if(!t&&e&&e.__esModule)return e;var n,l,i={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return i;if(n=t?r:a){if(n.has(e))return n.get(e);n.set(e,i)}for(var s in e)"default"!==s&&{}.hasOwnProperty.call(e,s)&&((l=(n=c)&&o(e,s))&&(l.get||l.set)?n(i,s,l):i[s]=e[s]);return i}(e,t)}(r(899196)),_=r(492325);function S(e,t){var a=n(e);if(l){var r=l(e);t&&(r=i(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a,r,n=null!=arguments[t]?arguments[t]:{};t%2?s(a=S(Object(n),!0)).call(a,(function(t){(0,g.default)(e,t,n[t])})):u?d(e,u(n)):s(r=S(Object(n))).call(r,(function(t){c(e,t,o(n,t))}))}return e}class w extends y.ModalAction{constructor(){super(...arguments),(0,g.default)(this,"onSubmit",(e=>{var{id:t}=this.props.item,{instance:{selectedRowKeys:a=[]}={}}=e;return b.default.addInterface({id:a[0],body:{interfaceAttachment:{port_id:t}}})}))}init(){this.store=new b.ServerStore}get name(){return t("Attach Instance")}static get modalSize(){return"large"}getModalSize(){return"large"}get defaultValue(){var{name:e,id:t}=this.item;return{virtual_adapter:e,virtual_adapter_id:t}}get formItems(){return[{name:"virtual_adapter",label:t("Virtual Adapter"),type:"label"},{name:"virtual_adapter_id",label:t("Virtual Adapter ID"),type:"label",hidden:!0},x({name:"instance",label:t("Instance"),type:"select-table",backendPageStore:this.store,extraParams:{noReminder:!0},disabledFunc:e=>e.locked||!(0,h.default)(_.allowAttachInterfaceStatus).call(_.allowAttachInterfaceStatus,e.vm_state),required:!0,isMulti:!1},_.instanceSelectTablePropsBackend)]}}a.Attach=w,(0,g.default)(w,"id","attach_instance"),(0,g.default)(w,"title",t("Attach Instance")),(0,g.default)(w,"policy","os_compute_api:os-attach-interfaces:create"),(0,g.default)(w,"allowed",(e=>m.default.resolve(""===e.device_id)));a.default=(0,v.inject)("rootStore")((0,v.observer)(w))},578452:(e,a,r)=>{"use strict";var n=r(818565),l=r(213696),i=r(303787),o=r(810732),s=r(532462),u=r(110819),d=r(722338),c=r(633950),f=r(548924);c(a,"__esModule",{value:!0}),a.x86CategoryList=a.pageTypeMap=a.pageTypeList=a.isGpuVisual=a.isGpuCategory=a.isComputeOptimized=a.isBareMetalFlavor=a.isBareMetal=a.ironicCategoryList=a.heterogeneousCategoryList=a.hasIOPSTypes=a.hasEphemeralTypes=a.gpuColumns=a.getFlavorSearchFilters=a.getFlavorArchInfo=a.getFamilyItemValue=a.getBaseColumns=a.getAllArchitecture=a.flavorCategoryList=a.flavorArchitectures=a.extraColumns=a.cpuThreadPolicyMap=a.cpuThreadPolicyList=a.cpuPolicyList=a.cpuArchColumn=a.categoryHasIOPS=a.categoryHasEphemeral=a.bareMetalCategoryList=a.armCategoryList=void 0;var p=f(r(360147)),h=f(r(75613)),m=f(r(148083)),g=f(r(866769)),v=f(r(68982)),y=f(r(532462)),b=f(r(819989)),_=f(r(29672)),S=f(r(877879)),x=r(83575);function w(e,t){var a=n(e);if(l){var r=l(e);t&&(r=i(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a,r,n=null!=arguments[t]?arguments[t]:{};t%2?s(a=w(Object(n),!0)).call(a,(function(t){(0,S.default)(e,t,n[t])})):u?d(e,u(n)):s(r=w(Object(n))).call(r,(function(t){c(e,t,o(n,t))}))}return e}var k=a.cpuPolicyList={dedicated:t("Dedicated"),shared:t("Shared")},I=(a.cpuThreadPolicyList=[{label:t("Prefer(Thread siblings are preferred)"),value:"prefer"},{label:t("Isolate(No multithreading)"),value:"isolate"},{label:t("Require(Need multithreading)"),value:"require"}],a.cpuThreadPolicyMap={prefer:t("Prefer"),isolate:t("Isolate"),require:t("Require")}),P=(a.pageTypeList=[{label:t("Large(Optimal performance)"),value:"large"},{label:t("Small(Not recommended)"),value:"small"},{label:t("Any(Random)"),value:"any"},{label:t("Custom"),value:"custom"}],a.pageTypeMap={large:t("Large"),small:t("Small"),any:t("Any")}),D=a.flavorArchitectures={x86_architecture:t("X86 Architecture"),heterogeneous_computing:t("Heterogeneous Computing"),bare_metal:t("Bare Metal"),arm_architecture:t("ARM Architecture"),custom:t("Custom"),all:t("All Flavors")},T=a.x86CategoryList={general_purpose:t("General Purpose"),compute_optimized:t("Compute Optimized"),memory_optimized:t("Memory Optimized"),big_data:t("Big Data"),local_ssd:t("Local SSD"),high_clock_speed:t("High Clock Speed")},A=(a.ironicCategoryList={general_purpose:t("General Purpose")},a.armCategoryList=T,a.heterogeneousCategoryList={compute_optimized_type_with_gpu:t("Compute Optimized Type with GPU"),visualization_compute_optimized_type_with_gpu:t("Visualization Compute Optimized Type with GPU"),compute_optimized_type:t("Compute Optimized Type")}),R=(a.bareMetalCategoryList={general_purpose:t("General Purpose")},a.flavorCategoryList=C(C({},T),A)),F=a.hasIOPSTypes=["general_purpose","compute_optimized","memory_optimized","high_clock_speed","compute_optimized_type_with_gpu","visualization_compute_optimized_type_with_gpu","compute_optimized_type"],E=a.hasEphemeralTypes=["big_data","local_ssd","compute_optimized_type_with_gpu"];a.categoryHasIOPS=e=>e&&(0,p.default)(F).call(F,e)>=0;a.categoryHasEphemeral=e=>e&&(0,p.default)(E).call(E,e)>=0;a.isGpuCategory=e=>e&&(0,p.default)(e).call(e,"_gpu")>=0;a.isGpuVisual=e=>"visualization_compute_optimized_type_with_gpu"===e;a.isComputeOptimized=e=>"compute_optimized_type"===e;a.getBaseColumns=(e,a)=>{var r=a&&(0,h.default)(a).call(a,(e=>{var t,a=(null==e?void 0:e[":price"])||(null==e||null===(t=e.extra_specs)||void 0===t?void 0:t[":price"]);return a&&!(0,m.default)((0,g.default)(a))})),n=[{title:t("ID/Name"),dataIndex:"name",routeName:e?e.getRouteName("flavorDetail"):""},{title:t("Category"),dataIndex:"category",valueMap:R},{title:t("Disk (GiB)"),dataIndex:"disk",isHideable:!0},{title:t("CPU"),dataIndex:"vcpus",isHideable:!0},{title:t("Memory"),dataIndex:"ram",isHideable:!0,render:e=>(0,x.formatSize)(e,2)},{title:t("Internal Network Bandwidth (Gbps)"),dataIndex:"quota:vif_outbound_average",isHideable:!0,width:120,render:e=>e?e/1e3/125:"-"},{title:t("Ephemeral Disk (GiB)"),dataIndex:"OS-FLV-EXT-DATA:ephemeral",isHideable:!0}];return r&&n.push({title:t("Cost per Hour"),dataIndex:":price",isHideable:!0,render:e=>{var t=(0,g.default)(e);return(0,m.default)(t)?"-":"$".concat(t.toFixed(3))}}),n};a.extraColumns=[{title:t("Public"),dataIndex:"is_public",isHideable:!0,valueRender:"yesNo"}],a.cpuArchColumn={title:t("CPU Arch"),dataIndex:"cpu_arch",isHideable:!0},a.gpuColumns=[{title:t("GPU Type"),dataIndex:"gpuType",isHideable:!0},{title:t("GPU Count"),dataIndex:"gpuCount",isHideable:!0},{title:t("NUMA Nodes"),dataIndex:"hw:numa_nodes",isHideable:!0},{title:t("CPU Policy"),dataIndex:"hw:cpu_policy",isHideable:!0,valueMap:k},{title:t("CPU Thread Policy"),dataIndex:"hw:cpu_thread_policy",isHideable:!0,valueMap:I},{title:t("Memory Page"),dataIndex:"hw:mem_page_size",isHideable:!0,valueMap:P}],a.getAllArchitecture=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=[];try{var r,n,l=(0,v.default)(r=e||[]).call(r,(e=>"flavor_families"===e.key));(0,y.default)(n=l&&l.value||[]).call(n,(e=>{e.architecture&&a.push(e.architecture)}))}catch(e){}return t&&a.push("custom"),a};a.getFamilyItemValue=e=>{var t,a=(0,v.default)(t=e||[]).call(t,(e=>"flavor_families"===e.key));return a?a.value:[]};var N=e=>"bare_metal"===e;a.isBareMetal=N;a.isBareMetalFlavor=e=>{var{extra_specs:t={}}=e.originData||e||{};return N(t[":architecture"])||"required"===t["trait:CUSTOM_GOLD"]};a.getFlavorArchInfo=e=>{var t,{architecture:a="",category:r=""}=e||{};return a?"custom"===a?D[a]:(0,b.default)(t="".concat(D[a]||a," - ")).call(t,R[r]||r):"-"};a.getFlavorSearchFilters=e=>{var a=[{label:t("ID"),name:"id"},{label:t("Name"),name:"name"},{label:t("CPU"),name:"vcpus",filterFunc:(e,t)=>{var a;return(0,_.default)(a="".concat(e)||"").call(a,t)}},{label:t("Memory"),name:"ram",filterFunc:(e,t)=>{var a;return(0,_.default)(a=(0,x.formatSize)(e,2)||"").call(a,t)}},{label:t("Disk"),name:"disk",filterFunc:(e,t)=>{var a;return(0,_.default)(a="".concat(e)||"").call(a,t)}}];return e&&a.push({label:t("Category"),name:"category",options:(0,x.getOptions)(e)}),a}},585477:(e,t,a)=>{(t=e.exports=a(840049)(!1)).push([e.id,"/* stylelint-disable selector-class-pattern */\n.custom__ace_editor--2x9Bb {\n  font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;\n  line-height: 20px !important;\n  -webkit-font-smoothing: auto;\n}\n.custom__ace_editor--2x9Bb.custom__ace-chaos--NJP1L {\n  color: #fff;\n  background-color: #242e42;\n}\n.custom__ace_editor--2x9Bb.custom__ace-chaos--NJP1L .custom__ace_gutter--1cP4P {\n  color: #537f7e;\n  background-color: #242e42;\n  border-right: 1px solid #4a5974;\n}\n.custom__ace_editor--2x9Bb.custom__ace-chaos--NJP1L .custom__ace_variable--ViPst,\n.custom__ace_editor--2x9Bb.custom__ace-chaos--NJP1L .custom__ace_identifier--249iw,\n.custom__ace_editor--2x9Bb.custom__ace-chaos--NJP1L .custom__ace_meta--2PQjL.custom__ace_tag--2I4Xk {\n  color: #75e0f2;\n}\n.custom__ace_editor--2x9Bb.custom__ace-chaos--NJP1L .custom__ace_keyword--TdUSy {\n  color: #fff;\n}\n.custom__ace_editor--2x9Bb.custom__ace-chaos--NJP1L .custom__ace_string--3lFMH {\n  color: #ebe087;\n}\n.custom__ace_editor--2x9Bb.custom__ace-chaos--NJP1L .custom__ace_constant--bDEu2.custom__ace_numeric--2gqBl {\n  color: #bd99ff;\n}\n.custom__ace_editor--2x9Bb.custom__ace-chaos--NJP1L .custom__ace_marker-layer--6Ofnc .custom__ace_active-line--3gBy- {\n  background-color: #36435c;\n}\n.custom__ace_editor--2x9Bb.custom__ace-chaos--NJP1L .custom__ace_indent-guide--2YcVM {\n  padding: 2px 0;\n  border-right: 1px dotted #777;\n}\n.custom__ace_editor--2x9Bb.custom__ace-chaos--NJP1L .custom__ace_marker-layer--6Ofnc .custom__ace_selection--1U_DQ {\n  background-color: #4a5974;\n}\n.custom__ace_editor--2x9Bb.custom__ace-chaos--NJP1L .custom__ace_comment--1foUc {\n  color: #aaa;\n}\n.custom__ace_editor--2x9Bb.custom__ace-chaos--NJP1L .custom__ace_fold--3dVBm:hover {\n  background-color: #fff;\n}\n.custom__ace_editor--2x9Bb.custom__ace-chaos--NJP1L .custom__ace_line--3FuBW .custom__ace_fold--3dVBm {\n  height: auto;\n}\n",""]),t.locals={ace_editor:"custom__ace_editor--2x9Bb","ace-chaos":"custom__ace-chaos--NJP1L",ace_gutter:"custom__ace_gutter--1cP4P",ace_variable:"custom__ace_variable--ViPst",ace_identifier:"custom__ace_identifier--249iw",ace_meta:"custom__ace_meta--2PQjL",ace_tag:"custom__ace_tag--2I4Xk",ace_keyword:"custom__ace_keyword--TdUSy",ace_string:"custom__ace_string--3lFMH",ace_constant:"custom__ace_constant--bDEu2",ace_numeric:"custom__ace_numeric--2gqBl","ace_marker-layer":"custom__ace_marker-layer--6Ofnc","ace_active-line":"custom__ace_active-line--3gBy-","ace_indent-guide":"custom__ace_indent-guide--2YcVM",ace_selection:"custom__ace_selection--1U_DQ",ace_comment:"custom__ace_comment--1foUc",ace_fold:"custom__ace_fold--3dVBm",ace_line:"custom__ace_line--3FuBW"}},594529:(e,a,r)=>{"use strict";var n=r(471742),l=r(633950),i=r(810732),o=r(548924);l(a,"__esModule",{value:!0}),a.default=void 0;var s=o(r(89195)),u=o(r(29672)),d=o(r(819989)),c=o(r(532462)),f=o(r(424836));r(594800);var p=o(r(265582));r(358350);var h=o(r(377556)),m=o(r(838379));r(615134);var g=o(r(707204));r(21184);var v=o(r(35934));r(573969);var y=o(r(38959)),b=o(r(458423)),_=o(r(601839)),S=o(r(877879)),x=o(r(620173)),w=o(r(835961)),C=o(r(468224)),k=function(e,t){if("function"==typeof n)var a=new n,r=new n;return function(e,t){if(!t&&e&&e.__esModule)return e;var n,o,s={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return s;if(n=t?r:a){if(n.has(e))return n.get(e);n.set(e,s)}for(var u in e)"default"!==u&&{}.hasOwnProperty.call(e,u)&&((o=(n=l)&&i(e,u))&&(o.get||o.set)?n(s,u,o):s[u]=e[u]);return s}(e,t)}(r(823872)),I=o(r(61296)),P=o(r(338233)),D=(r(384472),r(877800),r(383724)),T=r(83575),A=o(r(31170)),R=o(r(242603)),F=o(r(778392));class E extends k.Component{constructor(e){var a;super(e),a=this,(0,S.default)(this,"getSimpleValue",((e,t,a)=>{var r,n;return(0,x.default)(e)?(0,s.default)(e).call(e,((e,r)=>{if(k.default.isValidElement(e))try{return t[a][r]}catch(e){return""}return e})).join("\n"):(0,w.default)(e)?k.default.isValidElement(e)?(0,u.default)(n=[void 0,"",null]).call(n,t[a])?"-":t[a].toString():t[a]:(0,u.default)(r=[void 0,"",null]).call(r,e)?"-":e})),(0,S.default)(this,"getColumnData",((e,t)=>{var a,{dataIndex:r,render:n,valueRender:l,stringify:i,valueMap:o,unit:s}=t,{getValueRenderFunc:u}=this.props,c=(0,C.default)(e,r);if(i)return i(c,e);if(l){var f=u("sinceTime"===l?"toLocalTime":l);return this.getSimpleValue(f(c,e),e,r)}return n?this.getSimpleValue(n(c,e),e,r):s?(0,d.default)(a="".concat(c)).call(a,s):o?o[c]||c:this.getSimpleValue(c,e,r)})),(0,S.default)(this,"confirmExportMax",(()=>{var{totalMax:e,total:a}=this.props;R.default.warn({title:t("Are you sure to download data?"),content:t("The total amount of data is { total }, and the interface can support downloading { totalMax } pieces of data. If you need to download all the data, please contact the administrator.",{totalMax:e,total:a}),onCancel:this.onConfirmCancel,onOk:this.beginDownload})})),(0,S.default)(this,"downloadAllData",(()=>{var{total:e,totalMax:t}=this.props;e&&e>t?this.confirmExportMax():this.beginDownload()})),(0,S.default)(this,"getFileName",(e=>{var a,r,n,l,i=(0,T.toLocalTimeFilter)((new Date).getTime()),{resourceName:o,extraName:s}=this.props,u=s?(0,d.default)(a="".concat(s,"-")).call(a,o):o;return e?(0,d.default)(r=(0,d.default)(n="".concat(u,"-")).call(n,t("all"),"-")).call(r,i,".csv"):(0,d.default)(l="".concat(u,"-")).call(l,i,".csv")})),(0,S.default)(this,"exportCurrentData",((e,a)=>{var r=this.getDownloadHeader(),n=this.getDownloadData(),l=new D.Parser({fields:r}).parse(n),i=new Blob(["\ufeff"+l],{type:"text/plain;charset=utf-8"}),o=a?this.getFileName("all"):this.getFileName();P.default.saveAs(i,o),a?A.default.success(t("All data downloaded.")):A.default.success(t("Current data downloaded."))})),(0,S.default)(this,"exportCurrentDataAll",(()=>{this.exportCurrentData(null,!0)})),(0,S.default)(this,"exportAllData",(()=>{var e=this.getDownloadHeader(),a=this.getDownloadDataAll(),r=new D.Parser({fields:e}).parse(a),n=new Blob(["\ufeff"+r],{type:"text/plain;charset=utf-8"}),l=this.getFileName("all");P.default.saveAs(n,l),A.default.success(t("All data downloaded."))})),(0,S.default)(this,"cancelDownload",(()=>{this.setState({isDownloading:!1},(()=>{var{onFinishDownload:e}=this.props;e&&e()})),A.default.warn(t("Download canceled!"))})),(0,S.default)(this,"beginDownload",(()=>{this.setState({isDownloading:!0,percent:0,current:1,allData:[]},(()=>{var{onBeginDownload:e}=this.props;e&&e(),this.getDownloadDataForAll()}))})),(0,S.default)(this,"finishDownload",(()=>{this.setState({isDownloading:!1},(()=>{this.exportAllData();var{onFinishDownload:e}=this.props;e&&e()}))})),(0,S.default)(this,"getDownloadDataForAll",(0,_.default)((function*(){var{current:e,allData:t,isDownloading:r}=a.state,{totalMax:n}=a.props,l=Math.min(a.total||0,n);if(r){var{getData:i}=a.props,o=yield i({page:e,limit:a.pageSize}),s=[...t,...o];if(o.length<a.pageSize||s.length>=l)a.setState({allData:s,percent:100},(()=>{a.finishDownload()}));else{var u=0;(u=l?Math.floor(s.length/l*100):10*e)>100&&(u=100),a.setState({allData:s,current:e+1,percent:u},(()=>{a.getDownloadDataForAll()}))}}}))),this.state={isDownloading:!1,current:1,allData:[]}}get pageSize(){return 100}get total(){return this.props.total}getDownloadHeader(){var{columns:e}=this.props;return(0,s.default)(e).call(e,(e=>({label:e.title,value:e.dataIndex,default:""})))}getDownloadData(){var{columns:e,data:t}=this.props;return(0,s.default)(t).call(t,(t=>{var a={};return(0,c.default)(e).call(e,(e=>{var r=this.getColumnData(t,e);a[e.dataIndex]=r})),a}))}getDownloadDataAll(){var{columns:e}=this.props,{allData:t}=this.state;return(0,s.default)(t).call(t,(t=>{var a={};return(0,c.default)(e).call(e,(e=>{var r=this.getColumnData(t,e);a[e.dataIndex]=r})),a}))}renderDownloadCurrent(){return k.default.createElement(v.default,{title:t("Download all data")},k.default.createElement(y.default,{type:"default",onClick:this.exportCurrentDataAll,icon:k.default.createElement(b.default,null)}))}renderProgress(){var{isDownloading:e,percent:t}=this.state;return e?k.default.createElement(g.default,{percent:t,status:"active",className:F.default.progress}):null}renderCancelBtn(){var{isDownloading:e}=this.state;return e?k.default.createElement(v.default,{title:t("Cancel Download")},k.default.createElement(y.default,{type:"danger",shape:"circle",onClick:this.cancelDownload,icon:k.default.createElement(m.default,null),size:"small"})):null}renderDownloadAll(){var e=k.default.createElement(h.default,null,k.default.createElement(h.default.Item,{key:"current",onClick:this.exportCurrentData},t("Download current data")),k.default.createElement(h.default.Item,{key:"all",onClick:this.downloadAllData},t("Download all data")));return k.default.createElement(k.default.Fragment,null,k.default.createElement(p.default,{overlay:e},k.default.createElement(y.default,{type:"default",icon:k.default.createElement(b.default,null)})),this.renderProgress(),this.renderCancelBtn())}render(){var{total:e,data:t}=this.props;return e===t.length?this.renderDownloadCurrent():this.renderDownloadAll()}}a.default=E,(0,S.default)(E,"propTypes",{columns:I.default.array,data:I.default.array,total:I.default.number,getValueRenderFunc:I.default.func.isRequired,resourceName:I.default.string,extraName:I.default.string,getData:I.default.func,totalMax:I.default.number}),(0,S.default)(E,"defaultProps",{columns:[],data:[],total:0,totalMax:1e4,resourceName:"",extraName:"",getData:()=>f.default.resolve({data:{items:[],count:0}})})},595780:(e,t,a)=>{"use strict";var r=a(818565),n=a(213696),l=a(303787),i=a(810732),o=a(532462),s=a(110819),u=a(722338),d=a(633950),c=a(548924);d(t,"__esModule",{value:!0}),t.default=t.PoolStore=void 0;var f=c(a(877879)),p=c(a(549849)),h=c(a(896363)),m=c(a(892621)),g=c(a(381891)),v=["keywords"];function y(e,t){var a=r(e);if(n){var o=n(e);t&&(o=l(o).call(o,(function(t){return i(e,t).enumerable}))),a.push.apply(a,o)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a,r,n=null!=arguments[t]?arguments[t]:{};t%2?o(a=y(Object(n),!0)).call(a,(function(t){(0,f.default)(e,t,n[t])})):s?u(e,s(n)):o(r=y(Object(n))).call(r,(function(t){d(e,t,i(n,t))}))}return e}class _ extends g.default{get client(){return m.default.cinder.pools}get listFilterByProject(){return!1}get paramsFunc(){return e=>{var{keywords:t}=e;return b(b({},(0,p.default)(e,v)),{},{detail:!0})}}get mapper(){return e=>{var{name:t,capabilities:a={}}=e,r=b({name:t},a),{total_capacity_gb:n,free_capacity_gb:l}=a;return(0,h.default)(n)&&(0,h.default)(l)&&(r.usedGB=(n-l).toFixed(2),r.usedGBPercent=100*(r.usedGB/n).toFixed(2)),r}}}t.PoolStore=_;var S=new _;t.default=S},614530:(e,t,a)=>{(t=e.exports=a(840049)(!1)).push([e.id,".index__empty--2DMK4 {\n  display: inline-block;\n  width: 24px;\n}\n",""]),t.locals={empty:"index__empty--2DMK4"}},618334:(e,a,r)=>{"use strict";var n=r(818565),l=r(213696),i=r(303787),o=r(810732),s=r(532462),u=r(110819),d=r(722338),c=r(633950),f=r(548924);c(a,"__esModule",{value:!0}),a.default=a.BaseTable=void 0,r(541135);var p=f(r(465093)),h=f(r(254241)),m=f(r(411657)),g=f(r(667508));r(594800);var v=f(r(265582)),y=f(r(661250));r(244771);var b=f(r(144313));r(573969);var _=f(r(38959)),S=f(r(549849)),x=f(r(89195)),w=f(r(303787)),C=f(r(29672)),k=f(r(819989)),I=f(r(532462)),P=f(r(360147));r(588260);var D=f(r(586482)),T=f(r(15191));r(21184);var A=f(r(35934)),R=f(r(834666)),F=f(r(877879)),E=f(r(785219)),N=f(r(620173)),M=f(r(468224)),j=f(r(733711)),B=f(r(823872)),L=f(r(61296)),V=f(r(38256)),O=f(r(838391)),z=r(127567),q=(r(877800),f(r(587374))),K=f(r(496989)),G=(r(384472),f(r(551416))),U=r(640293),Q=r(83575),H=r(955384),W=r(87067),J=f(r(2957)),Y=f(r(13425)),Z=f(r(328858)),X=f(r(561804)),$=f(r(594529)),ee=f(r(763455)),te=["sortable","dataIndex","valueRender","sorter","sortOrder","render","copyable","tip","isStatus","isName","isLink","routeName","linkPrefix","isPrice","valueMap","unit"];function ae(e,t){var a=n(e);if(l){var r=l(e);t&&(r=i(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function re(e){for(var t=1;t<arguments.length;t++){var a,r,n=null!=arguments[t]?arguments[t]:{};t%2?s(a=ae(Object(n),!0)).call(a,(function(t){(0,F.default)(e,t,n[t])})):u?d(e,u(n)):s(r=ae(Object(n))).call(r,(function(t){c(e,t,o(n,t))}))}return e}class ne extends B.default.Component{constructor(e){var a,r,n;super(e),(0,F.default)(this,"getDataIndex",(e=>(0,N.default)(e)?e.join(","):e)),(0,F.default)(this,"getSortKey",(e=>{var{field:t,column:a}=e;return t&&a?a.sortKey||a.dataIndex:null})),(0,F.default)(this,"handleChange",((e,t,a,r)=>{var{action:n}=r,l=re({limit:e.pageSize,page:e.current,current:e.current,sortKey:this.getSortKey(a),sortOrder:a.order},t),{ableSkipPageByBackend:i,isPageByBack:o}=this.props;if("sort"===n){if(o&&!i){var{pagination:s}=this.props;l=re(re({},l),{},{limit:s.pageSize,page:s.current,current:s.current})}this.sortKey=this.getSortKey(a),this.sortOrder=a.order,this.props.onFetchBySort(l)}else this.props.onFetch(l)})),(0,F.default)(this,"handlePageChange",((e,t)=>{var{filters:a}=this.state,{onFetch:r,defaultSortKey:n,defaultSortOrder:l}=this.props;r&&r(re({limit:t,page:e,current:e,sortKey:this.sortKey||n,sortOrder:this.sortOrder||l},a))})),(0,F.default)(this,"handleRefresh",(()=>{this.props.onRefresh(!0)})),(0,F.default)(this,"handleRowHide",(e=>{var t,a=(0,x.default)(t=this.hideableRows).call(t,(e=>e.value));this.setState({hideRow:(0,w.default)(a).call(a,(t=>!(0,C.default)(e).call(e,t)))},(()=>{var e;(0,H.setLocalStorageItem)((0,k.default)(e="".concat(this.useId,"-")).call(e,this.props.resourceName),this.state.hideRow)}))})),(0,F.default)(this,"handleCancelSelect",(()=>{this.props.onSelectRowKeys([])})),(0,F.default)(this,"handleFilterChange",((e,t)=>{if(!(0,O.default)(e,this.props.filters)||!(0,O.default)(t,this.props.timeFilter)){this.setState({filters:e,timeFilter:t});var{pageSize:a}=this.props.pagination,{sortKey:r,sortOrder:n,onFilterChange:l}=this.props;l&&l(re({limit:a,page:1,sortKey:r,sortOrder:n},e),t)}})),(0,F.default)(this,"handleTimeChange",(e=>{this.handleFilterChange(this.state.filters,e)})),(0,F.default)(this,"handleFilterInput",(e=>{var t={};(0,I.default)(e).call(e,(e=>{t[(0,w.default)(e).name]=e.value})),this.handleFilterChange(t,this.state.timeFilter)})),(0,F.default)(this,"handleInputFocus",(e=>{var{handleInputFocus:t}=this.props;t&&t(e)})),(0,F.default)(this,"handleFilterInputText",(e=>{var t={},{value:a}=e.currentTarget;a&&(t.keywords=a),this.handleFilterChange(t,this.state.timeFilter)})),(0,F.default)(this,"hasItemActions",(()=>{var{firstAction:e,moreActions:t,actionList:a}=this.itemActions;return!!e||(!(!t||!t.length)||a&&a.length>0)})),(0,F.default)(this,"getNoValueRender",(e=>e||(e=>(0,Q.getNoValue)(e)))),(0,F.default)(this,"getPriceRender",((e,t)=>e||(e=>{var t=(0,E.default)(e)?e:(e||0).toFixed(2);return B.default.createElement("span",{style:{color:globalCSS.moneyColor}},t)}))),(0,F.default)(this,"getTipRender",(function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:R.default;return(n,l)=>{var i=e(n,l),o=t?t(n,l):(0,M.default)(l,a);return i?B.default.createElement("div",null,o,B.default.createElement(A.default,{title:i},B.default.createElement(r,{style:{marginLeft:8}}))):o}})),(0,F.default)(this,"getColumnTitle",(e=>{var{title:t,titleTip:a}=e;return a?B.default.createElement("span",null,t,B.default.createElement(A.default,{title:a},B.default.createElement(T.default,{style:{marginLeft:8}}))):t})),(0,F.default)(this,"getBaseColumns",(e=>(0,x.default)(e).call(e,(e=>{var{Paragraph:t}=D.default,{sortable:a,dataIndex:r,valueRender:n,sorter:l,sortOrder:i,render:o,copyable:s,tip:u,isStatus:d,isName:c,isLink:f,routeName:p,linkPrefix:h,isPrice:m,valueMap:g,unit:v}=e,y=(0,S.default)(e,te),b=(0,U.getColumnSorter)(e,this.props),_=i||b?(0,U.getSortOrder)(r,this.props):null,x=o||(0,U.getRender)(n);if(g&&(x=(0,U.getValueMapRender)(e)),v&&(x=(0,U.getUnitRender)(e)),(0,U.checkIsStatusColumn)(r,d)&&(x=(0,U.getStatusRender)(x)),"description"===r&&(x=this.getNoValueRender(x)),"project_name"===r&&(x=(0,U.getProjectRender)(x)),"name"===r&&p||f){var{rowKey:w}=this.props;x=(0,U.getNameRenderByRouter)(x,e,w)}if("name"===r&&h||c){var{rowKey:C}=this.props;x=(0,U.getNameRender)(x,e,C)}if(("cost"===r||m)&&(x=this.getPriceRender(x,e)),s&&(x=e=>e&&"-"!==e?B.default.createElement(t,{copyable:!0},e):"-"),u){var{tipIcon:k}=e;x=this.getTipRender(u,x,r,k)}var I=re(re({},y),{},{title:this.getColumnTitle(e),dataIndex:r,align:e.align||"left"});return b&&(I.sorter=b),i&&(I.sortOrder=_),(0,U.updateColumnSort)(I,this.props),x&&(I.render=x),re(re({},I),{},{render:(e,t)=>(0,U.columnRender)(I.render,e,t)})})))),(0,F.default)(this,"getColumns",(()=>{var e,{columns:a,containerProps:r,onClickAction:n,onFinishAction:l,onCancelAction:i,isAdminPage:o}=this.props,{hideRow:s}=this.state,u=(0,w.default)(e=(0,w.default)(a).call(a,(e=>!e.hidden))).call(e,(e=>!(0,j.default)(s,this.getDataIndex(e.dataIndex)))),d=this.getBaseColumns(u);return this.hasItemActions()?[...d,{title:t("Action"),key:"operation",width:150,render:(e,t,a)=>B.default.createElement(Y.default,{isAdminPage:o,actions:this.itemActions,onFinishAction:l,onCancelAction:i,item:t,index:a,containerProps:r,onClickAction:n})}]:d})),(0,F.default)(this,"stopRefreshAuto",(()=>{this.setState({autoRefresh:!1});var{stopRefreshAuto:e}=this.props;e&&e()})),(0,F.default)(this,"startRefreshAuto",(()=>{this.setState({autoRefresh:!0});var{startRefreshAuto:e}=this.props;e&&e()})),(0,F.default)(this,"renderSelectedTitle",(()=>B.default.createElement("div",{className:ee.default["select-title"]},B.default.createElement("div",null,this.renderBatchActions()),B.default.createElement("div",null,B.default.createElement(_.default,{type:"flat",className:ee.default["cancel-select"],onClick:this.handleCancelSelect},t("Cancel Select")))))),(0,F.default)(this,"renderTableTitle",(()=>this.renderNormalTitle())),(0,F.default)(this,"renderRowMenu",(()=>{var{hideRow:e}=this.state;return B.default.createElement(J.default,{className:ee.default["column-menu"],options:this.hideableRows,value:(e=>{var t,a=[];return(0,I.default)(t=this.hideableRows).call(t,(t=>{-1===(0,P.default)(e).call(e,t.value)&&a.push(t.value)})),a})(e),onChange:this.handleRowHide})})),(0,F.default)(this,"renderTableFooter",(e=>{var{page:t,current:a,pageSize:r,total:n,pageSizeOptions:l}=this.props.pagination,{isLoading:i,hideTotal:o}=this.props;return B.default.createElement(K.default,{current:t||a||1,pageSize:r,onChange:this.handlePageChange,currentDataSize:e.length,pageSizeOptions:l||[10,20,50,100],total:n,isLoading:i,onFocusChange:this.handleInputFocus,hideTotal:o})})),this.state={hideRow:(0,H.getLocalStorageItem)((0,k.default)(a="".concat(this.useId,"-")).call(a,this.props.resourceName))||[],filters:[],timeFilter:{},autoRefresh:e.autoRefresh},this.sortKey=e.defaultSortKey,this.sortOrder=e.defaultSortOrder,this.suggestions=(0,x.default)(r=(0,w.default)(n=e.columns).call(n,(e=>e.search&&e.dataIndex))).call(r,(e=>{var t;return{label:e.title,key:e.dataIndex,options:e.filters&&(0,x.default)(t=e.filters).call(t,(e=>({label:e.text,key:e.value})))}}))}get hideableRows(){var e,t,a;return(0,x.default)(e=(0,w.default)(t=(0,w.default)(a=this.props.columns).call(a,(e=>!e.hidden))).call(t,(e=>e.isHideable))).call(e,(e=>({label:e.title,value:this.getDataIndex(e.dataIndex)||e.key})))}get useId(){var{user:e={}}=(0,z.toJS)(this.props.rootStore)||{},{user:{id:t}={}}=e||{};return t}get itemActions(){var{itemActions:e={}}=this.props;return e}filterDownloadColumns(e){var a,r,{rowKey:n}=this.props,l=(0,x.default)(a=(0,w.default)(e).call(e,(e=>!e.hidden))).call(a,(e=>{var{title:a,splitColumnForDownload:r=!0}=e;if((0,C.default)(a).call(a,"/")&&r){var l,i,[o,s]=e.title.split("/"),u=s;if(o.length>2)u=(0,k.default)(i="".concat(o.split("ID")[0])).call(i,s);var d=e.idKey||n,c=null;return(0,C.default)(l=e.title).call(l,t("Project"))&&"project_name"===e.dataIndex&&(d="project_id",c=(e,t)=>(0,U.getProjectId)(t)),[{title:o,dataIndex:d,render:c},re(re({},e),{},{title:u})]}return e}));return(0,k.default)(r=[]).call(r,...l)}renderBatchActions(){var{batchActions:e,selectedRowKeys:t,data:a,rowKey:r,containerProps:n,onClickAction:l,onFinishAction:i,onCancelAction:o,resourceName:s,isAdminPage:u}=this.props,d=(0,w.default)(a).call(a,(e=>(0,P.default)(t).call(t,e[r])>=0));return e?B.default.createElement(X.default,{isAdminPage:u,visibleButtonNumber:3,selectedItemKeys:t,selectedItems:d,batchActions:e,onFinishAction:i,onCancelAction:o,containerProps:n,onClickAction:l,resourceName:s}):null}renderTimeFilter(){var{showTimeFilter:e,filterTimeDefaultValue:t}=this.props;if(!e)return null;var a={onChange:this.handleTimeChange,className:ee.default.timer};return void 0!==t&&(a.defaultValue=t),B.default.createElement(G.default,a)}renderSearch(){var{hideSearch:e,searchFilters:a,initFilter:r={}}=this.props;return e?null:a.length>0?B.default.createElement("div",{className:ee.default["search-row"]},B.default.createElement(q.default,{filterParams:a,initValue:r,onInputChange:this.handleFilterInput,onInputFocus:this.handleInputFocus,placeholder:t("Multiple filter tags are separated by enter")})):B.default.createElement("div",{className:ee.default["search-row"]},B.default.createElement(b.default,{placeholder:t("Enter query conditions to filter"),onChange:this.handleFilterInputText}))}renderMiddleInHeader(){var{middleComponentInHeader:e}=this.props;return e||null}renderActions(){var{isAdminPage:e,primaryActions:t,containerProps:a,onClickAction:r,onFinishAction:n,onCancelAction:l,primaryActionsExtra:i}=this.props;return t?B.default.createElement(Z.default,{isAdminPage:e,primaryActions:t,containerProps:a,onClickAction:r,onFinishAction:n,onCancelAction:l,primaryActionsExtra:i}):null}renderCustomButton(){var{hideCustom:e}=this.props;return e?null:B.default.createElement(v.default,{overlay:this.renderRowMenu()},B.default.createElement(_.default,{className:ee.default["custom-button"],type:"default",icon:B.default.createElement(y.default,null)}))}renderDownload(){var{pagination:e,data:t,columns:a,resourceName:r,detailName:n,getDownloadData:l,onClickAction:i,onCancelAction:o,hideDownload:s}=this.props;if(s)return null;var{total:u}=e,d={data:t,columns:this.filterDownloadColumns(a),total:u,getValueRenderFunc:U.getValueRenderFunc,resourceName:r,extraName:n,getData:l,onBeginDownload:i,onFinishDownload:o,onCancelDownload:o};return B.default.createElement($.default,d)}renderRefresh(){var{hideRefresh:e}=this.props;return e?null:B.default.createElement(_.default,{type:"default",icon:B.default.createElement(g.default,null),onClick:this.handleRefresh})}renderRefreshAuto(){var{hideAutoRefresh:e}=this.props;if(e)return null;var{autoRefresh:a}=this.state;if(a){var r=t("Stop auto refreshing data");return B.default.createElement(A.default,{title:r},B.default.createElement(_.default,{type:"primary",icon:B.default.createElement(m.default,null),onClick:this.stopRefreshAuto}))}var n=t("Start auto refreshing data");return B.default.createElement(A.default,{title:n},B.default.createElement(_.default,{type:"default",icon:B.default.createElement(h.default,null),onClick:this.startRefreshAuto}))}renderNormalTitle(){return B.default.createElement("div",{className:ee.default["table-header"],id:"sl-table-header-search"},B.default.createElement("div",{className:(0,V.default)(ee.default["table-header-action-btns"],"table-header-action-btns")},this.renderActions(),this.renderBatchActions()),this.renderTimeFilter(),this.renderMiddleInHeader(),B.default.createElement("div",{className:ee.default["table-header-right"]},this.renderSearch(),B.default.createElement("div",{className:(0,V.default)(ee.default["table-header-btns"],"table-header-btns")},this.renderRefresh(),this.renderDownload(),this.renderCustomButton(),this.renderRefreshAuto())))}render(){var{className:e,data:t,isLoading:a,silentLoading:r,rowKey:n,selectedRowKeys:l,onSelectRowKeys:i,hideHeader:o,getCheckboxProps:s,pagination:u,scrollY:d,expandable:c,isPageByBack:f=!0,ableSkipPageByBackend:h,childrenColumnName:m}=this.props,g=null,v=!(!h&&f)&&re(re({},u),{},{size:"small"});o||this.renderTableTitle;var y=!h&&f?this.renderTableFooter:null;i&&(g={selectedRowKeys:l,getCheckboxProps:s,onChange:i});var b=this.renderTableTitle(),_=this.getColumns(),S={};return d>0&&(S.y=d||400),B.default.createElement("div",null,b,B.default.createElement(p.default,{className:(0,V.default)(ee.default.table,"sl-table",e),rowKey:n,columns:_,dataSource:(0,z.toJS)(t),loading:!r&&a,onChange:this.handleChange,pagination:v,rowSelection:g,sortDirections:["ascend","descend","ascend"],scroll:S,showSorterTooltip:!1,expandable:c,footer:y,childrenColumnName:m}))}}a.BaseTable=ne,(0,F.default)(ne,"propTypes",{data:L.default.oneOfType([L.default.array,L.default.object]).isRequired,columns:L.default.array.isRequired,selectedRowKeys:L.default.array,isLoading:L.default.bool,pagination:L.default.object,filters:L.default.object,keyword:L.default.string,rowKey:L.default.any,onFetch:L.default.func,onFilterChange:L.default.func,onSelectRowKeys:L.default.func,getCheckboxProps:L.default.func,hideHeader:L.default.bool,hideSearch:L.default.bool,hideCustom:L.default.bool,batchActions:L.default.array,alwaysUpdate:L.default.bool,emptyText:L.default.oneOfType([L.default.string||L.default.func]),resourceName:L.default.string,detailName:L.default.string,expandable:L.default.object,showTimeFilter:L.default.bool,timeFilter:L.default.any,isPageByBack:L.default.bool,isSortByBack:L.default.bool,ableSkipPageByBackend:L.default.bool,autoRefresh:L.default.bool,hideRefresh:L.default.bool,hideAutoRefresh:L.default.bool,startRefreshAuto:L.default.func,stopRefreshAuto:L.default.func,dataDurationAuto:L.default.number,defaultSortKey:L.default.string,defaultSortOrder:L.default.string,hideTotal:L.default.bool,hideDownload:L.default.bool,primaryActionsExtra:L.default.any,isAdminPage:L.default.bool,containerProps:L.default.any,middleComponentInHeader:L.default.node}),(0,F.default)(ne,"defaultProps",{rowKey:"name",selectedRowKeys:[],onFetch(){},hideHeader:!1,hideSearch:!1,hideCustom:!1,resourceName:"",detailName:"",expandable:void 0,showTimeFilter:!1,isPageByBack:!1,isSortByBack:!1,autoRefresh:!0,hideRefresh:!1,hideAutoRefresh:!1,dataDurationAuto:15,defaultSortKey:"",defaultSortOrder:"",hideTotal:!1,hideDownload:!1,primaryActionsExtra:null,isAdminPage:!1,ableSkipPageByBackend:!1});a.default=(0,W.inject)("rootStore")(ne)},628672:(e,t,a)=>{var r=a(803192);"string"==typeof r&&(r=[[e.id,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(453027)(r,n);r.locals&&(e.exports=r.locals)},644526:(e,a,r)=>{"use strict";var n=r(818565),l=r(213696),i=r(303787),o=r(810732),s=r(532462),u=r(110819),d=r(722338),c=r(633950),f=r(548924);c(a,"__esModule",{value:!0}),a.default=a.CreateSnapshot=void 0;var p=f(r(819989)),h=f(r(424836)),m=f(r(601839)),g=f(r(877879)),v=r(87067),y=r(860615),b=f(r(48474)),_=r(505997),S=f(r(452740));function x(e,t){var a=n(e);if(l){var r=l(e);t&&(r=i(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a,r,n=null!=arguments[t]?arguments[t]:{};t%2?s(a=x(Object(n),!0)).call(a,(function(t){(0,g.default)(e,t,n[t])})):u?d(e,u(n)):s(r=x(Object(n))).call(r,(function(t){c(e,t,o(n,t))}))}return e}var C=e=>{var{snapshots:t={}}=e,{currentVolumeType:a}=b.default;return{snapshotQuota:t,typeQuota:e["snapshots_".concat(a)]||{}}},k=e=>{var{snapshotQuota:t,typeQuota:a}=C(e),{left:r=0}=t||{},{left:n=0}=a||{};return 0!==r&&0!==n?1:0};class I extends y.ModalAction{constructor(){super(...arguments),(0,g.default)(this,"onSubmit",(e=>{var{id:t,status:a}=this.item,{name:r}=e,n={name:r,volume_id:t,force:"in-use"===a};return this.store.create(n)}))}init(){b.default.setCurrentVolumeType(this.item),this.state.quota={},this.state.quotaLoading=!0,this.store=b.default,this.projectStore=S.default,this.getQuota()}get name(){return t("create volume snapshot")}get defaultValue(){var e,t,{name:a,id:r,volume_type:n,size:l}=this.item;return{volume:(0,p.default)(e=(0,p.default)(t="".concat(a||r,"(")).call(t,n," | ")).call(e,l,"GiB)")}}static get disableSubmit(){var{cinderQuota:e={}}=S.default;return 0===k(e)}static get showQuota(){return!0}get showQuota(){return!0}getQuota(){var e=this;return(0,m.default)((function*(){e.setState({quotaLoading:!0});var t=yield e.projectStore.fetchProjectCinderQuota();e.setState({quota:t,quotaLoading:!1})}))()}get quotaInfo(){var{quota:e={},quotaLoading:a}=this.state;if(a)return[];var{snapshotQuota:r={},typeQuota:n={}}=C(e),l=k(e),i=w(w({},r),{},{add:l,name:"snapshot",title:t("Volume Snapshot")}),{volume_type:o}=this.item;return[i,w(w({},n),{},{add:l,name:"type",title:t("{name} type snapshots",{name:o}),type:"line"})]}get formItems(){return[{name:"volume",label:t("Volume"),type:"label",iconType:"volume"},{name:"name",label:t("Volume Snapshot Name"),type:"input-name",placeholder:t("Please input snapshot name"),required:!0}]}}a.CreateSnapshot=I,(0,g.default)(I,"id","create-snapshot"),(0,g.default)(I,"title",t("Create Volume Snapshot")),(0,g.default)(I,"buttonText",t("Create Snapshot")),(0,g.default)(I,"policy","volume:create_snapshot"),(0,g.default)(I,"allowed",(e=>h.default.resolve((0,_.isAvailableOrInUse)(e))));a.default=(0,v.inject)("rootStore")((0,v.observer)(I))},647373:(e,a,r)=>{"use strict";var n=r(633950),l=r(548924);n(a,"__esModule",{value:!0}),a.default=void 0;var i=l(r(424836)),o=l(r(532462)),s=l(r(303787)),u=l(r(549849));r(279840);var d=l(r(78590)),c=l(r(877879)),f=l(r(414407)),p=l(r(620173)),h=l(r(823872)),m=r(860615),g=l(r(722625)),v=(r(877800),["forceRelease"]);class y extends m.ConfirmAction{constructor(){super(...arguments),(0,c.default)(this,"policy","delete_floatingip"),(0,c.default)(this,"getItemName",(e=>e.floating_ip_address)),(0,c.default)(this,"confirmContext",(e=>{var a=null;if(this.needForceRelease(e)&&(a=h.default.createElement("div",null,h.default.createElement(d.default,{style:{marginTop:"14px"},onChange:t=>{this.onChangeType(t.target.checked,e)}},t("Force release")))),!this.messageHasItemName)return h.default.createElement("div",null,h.default.createElement("p",null," ",t("Are you sure to {action}?",{action:this.actionNameDisplay||this.title})),a);var r=this.getName(e);return h.default.createElement("div",null,h.default.createElement("p",null," ",this.unescape(t("Are you sure to {action} (instance: {name})?",{action:this.actionNameDisplay||this.title,name:r}))),a)})),(0,c.default)(this,"onSubmit",(e=>{var{forceRelease:a}=e,r=(0,u.default)(e,v);if(this.hasCheckBox&&!a){var n=t("Floating ip has already been associate, Please check Force release");return i.default.reject(n)}return g.default.delete(r)}))}get id(){return"delete"}get title(){return t("Release")}get isDanger(){return!0}get buttonText(){return t("Release")}get actionName(){return t("Release")}onChangeType(e,t){(0,p.default)(t)?(0,o.default)(t).call(t,(t=>{t.forceRelease=e})):t.forceRelease=e}needForceRelease(e){var t=!1;(0,p.default)(e)?((0,o.default)(e).call(e,(e=>{e.forceRelease=!1})),(0,s.default)(e).call(e,(e=>!((0,f.default)(e.fixed_ip_address)&&"DOWN"===e.status&&(0,f.default)(e.port_details))))[0]&&(t=!0)):(e.forceRelease=!1,t=!((0,f.default)(e.fixed_ip_address)&&"DOWN"===e.status&&(0,f.default)(e.port_details)));return this.hasCheckBox=t,t}}a.default=y},648136:(e,t,a)=>{"use strict";var r=a(633950),n=a(548924);r(t,"__esModule",{value:!0}),t.default=t.CredentialStore=void 0;var l,i=n(a(3647)),o=n(a(532462)),s=n(a(810732)),u=n(a(601839)),d=n(a(549849)),c=n(a(533301)),f=a(127567),p=n(a(892621)),h=n(a(577186)),m=n(a(961362)),g=n(a(381891)),v=["current","id","all_projects"],y=new(t.CredentialStore=(l=class extends g.default{get isSubResource(){return!0}get client(){return p.default.keystone.users.applicationCredentials}get paramsFunc(){return e=>{var{current:t,id:a,all_projects:r}=e;return(0,d.default)(e,v)}}create(e){var t={};return t[this.responseKey]=e,this.submitting(this.client.create(h.default.user.user.id,t))}listDidFetch(e,t){return(0,u.default)((function*(){if(!t)try{var a=yield m.default.getUserProjects(),r=new i.default;(0,o.default)(a).call(a,(e=>{r.set(e.id,e.name)})),(0,o.default)(e).call(e,(e=>{e.project_name=r.get(e.project_id)||"-"}))}catch(t){return e}return e}))()}},(0,c.default)(l.prototype,"create",[f.action],(0,s.default)(l.prototype,"create"),l.prototype),l));t.default=y},653884:(e,t,a)=>{"use strict";var r=a(818565),n=a(213696),l=a(303787),i=a(810732),o=a(532462),s=a(110819),u=a(722338),d=a(633950),c=a(548924);d(t,"__esModule",{value:!0}),t.default=t.GroupStore=void 0;var f,p,h,m,g=c(a(601839)),v=c(a(549849)),y=c(a(532462)),b=c(a(68982)),_=c(a(818565)),S=c(a(424836)),x=c(a(303787)),w=c(a(89195)),C=c(a(810732)),k=c(a(337187)),I=c(a(877879)),P=c(a(533301)),D=(c(a(155041)),a(127567)),T=c(a(892621)),A=c(a(381891)),R=["id","userId","groupId","roleId","projectId","domainId","withRole","all_projects"];function F(e,t){var a=r(e);if(n){var o=n(e);t&&(o=l(o).call(o,(function(t){return i(e,t).enumerable}))),a.push.apply(a,o)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a,r,n=null!=arguments[t]?arguments[t]:{};t%2?o(a=F(Object(n),!0)).call(a,(function(t){(0,I.default)(e,t,n[t])})):s?u(e,s(n)):o(r=F(Object(n))).call(r,(function(t){d(e,t,i(n,t))}))}return e}var N=new(t.GroupStore=(f=class extends A.default{constructor(){super(...arguments),(0,k.default)(this,"systemRoles",p,this),(0,k.default)(this,"domainRoles",h,this),(0,k.default)(this,"groupUsers",m,this),(0,I.default)(this,"updateUserGroup",((e,t,a,r,n)=>{var l={},{id:i}=e||{};(0,y.default)(t).call(t,(e=>{var{scope:{project:{id:t}={}}={},group:{id:r}={},role:{id:o}={}}=e;if(r===i&&o){var s=(0,b.default)(a).call(a,(e=>e.id===o));if(t)if(l[t])l[t].roles=[...l[t].roles,s];else{var u=(0,b.default)(n).call(n,(e=>e.id===t));l[t]={project:u,roles:[s]}}}}));var o=(0,b.default)(r).call(r,(t=>t.id===e.domain_id));return E(E({},e),{},{projects:l,projectCount:(0,_.default)(l).length,domain:o,domainName:(o||{}).name||e.domain_id})}))}get client(){return T.default.keystone.groups}get domainClient(){return T.default.keystone.domains}get systemGroupClient(){return T.default.keystone.systemGroups}get roleClient(){return T.default.keystone.roles}get roleAssignmentClient(){return T.default.keystone.roleAssignments}get userClient(){return T.default.keystone.users}get projectClient(){return T.default.keystone.projects}get paramsFunc(){return e=>{var{id:t,userId:a,groupId:r,roleId:n,projectId:l,domainId:i,withRole:o,all_projects:s}=e;return(0,v.default)(e,R)}}listFetchByClient(e,t){var{userId:a}=t;return a?this.userClient.groups.list(a,e):this.client.list(e)}edit(e){var t=this;return(0,g.default)((function*(){var{id:a,description:r,name:n}=e,l={group:{description:r,name:n}};return t.submitting(t.client.patch(a,l))}))()}fetchSystemRole(e){var t=this;return(0,g.default)((function*(){var{id:a}=e;t.systemRoles=[];var r=yield t.systemGroupClient.roles.list(a);t.systemRoles=r.roles}))()}assignSystemRole(e){var t=this;return(0,g.default)((function*(){var{id:a,roleId:r}=e;return t.systemGroupClient.roles.update(a,r)}))()}deleteSystemRole(e){var t=this;return(0,g.default)((function*(){var{id:a,roleId:r}=e;return t.systemGroupClient.roles.delete(a,r)}))()}fetchDomainRole(e){var t=this;return(0,g.default)((function*(){var{id:a,domain_id:r}=e;t.domainRoles=[];var n=yield t.domainClient.groups.roles.list(r,a);t.domainRoles=n.roles}))()}assignDomainRole(e){var t=this;return(0,g.default)((function*(){var{id:a,roleId:r,domain_id:n}=e;return t.domainClient.groups.roles.update(n,a,r)}))()}deleteDomainRole(e){var t=this;return(0,g.default)((function*(){var{id:a,roleId:r,domain_id:n}=e;return t.domainClient.groups.roles.delete(n,a,r)}))()}fetchGroupUsers(e){var t=this;return(0,g.default)((function*(){var{id:a}=e,r=yield t.client.users.list(a),{users:n}=r;return t.groupUsers=n,n}))()}deleteGroupUsers(e){var t=this;return(0,g.default)((function*(){var{id:a,userId:r}=e;return t.client.users.delete(a,r)}))()}addGroupUsers(e){var t=this;return(0,g.default)((function*(){var{id:a,userId:r}=e;return t.client.users.update(a,r)}))()}listDidFetch(e,t,a){var r=this;return(0,g.default)((function*(){if(!e.length)return e;var{projectId:t,roleId:n,domainId:l,withRole:i=!0}=a,o={};t&&(o["scope.project.id"]=t),n&&(o["role.id"]=n);var[s,u,d,c]=yield S.default.all([i?r.roleAssignmentClient.list(o):null,i?r.roleClient.list():null,r.domainClient.list(),i?r.projectClient.list():null]),{roles:f=[]}=u||{},{domains:p=[]}=d,{projects:h=[]}=c||{},{role_assignments:m=[]}=s||{},g=e;return l&&(g=(0,x.default)(e).call(e,(e=>e.domain_id===l))),g=(0,w.default)(g).call(g,(e=>r.updateUserGroup(e,m,f,p,h))),t||n?(0,x.default)(g).call(g,(e=>e.projectCount)):g}))()}detailDidFetch(e){var t=this;return(0,g.default)((function*(){var{id:a}=e,[r,n]=yield S.default.all([t.domainClient.list(),t.client.users.list(a)]),{domains:l=[]}=r,{users:i=[]}=n,o=t.updateUserGroup(e,[],[],l,[]);return o.userCount=i.length,o}))()}},p=(0,P.default)(f.prototype,"systemRoles",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=(0,P.default)(f.prototype,"domainRoles",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=(0,P.default)(f.prototype,"groupUsers",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),(0,P.default)(f.prototype,"edit",[D.action],(0,C.default)(f.prototype,"edit"),f.prototype),(0,P.default)(f.prototype,"fetchSystemRole",[D.action],(0,C.default)(f.prototype,"fetchSystemRole"),f.prototype),(0,P.default)(f.prototype,"assignSystemRole",[D.action],(0,C.default)(f.prototype,"assignSystemRole"),f.prototype),(0,P.default)(f.prototype,"deleteSystemRole",[D.action],(0,C.default)(f.prototype,"deleteSystemRole"),f.prototype),(0,P.default)(f.prototype,"fetchDomainRole",[D.action],(0,C.default)(f.prototype,"fetchDomainRole"),f.prototype),(0,P.default)(f.prototype,"assignDomainRole",[D.action],(0,C.default)(f.prototype,"assignDomainRole"),f.prototype),(0,P.default)(f.prototype,"deleteDomainRole",[D.action],(0,C.default)(f.prototype,"deleteDomainRole"),f.prototype),(0,P.default)(f.prototype,"fetchGroupUsers",[D.action],(0,C.default)(f.prototype,"fetchGroupUsers"),f.prototype),(0,P.default)(f.prototype,"deleteGroupUsers",[D.action],(0,C.default)(f.prototype,"deleteGroupUsers"),f.prototype),(0,P.default)(f.prototype,"addGroupUsers",[D.action],(0,C.default)(f.prototype,"addGroupUsers"),f.prototype),f));t.default=N},654017:(e,a,r)=>{"use strict";var n=r(818565),l=r(213696),i=r(303787),o=r(810732),s=r(532462),u=r(110819),d=r(722338),c=r(633950),f=r(548924);c(a,"__esModule",{value:!0}),a.default=void 0,r(121581);var p=f(r(514059));r(358350);var h=f(r(377556));r(332528);var m=f(r(861806));r(594800);var g=f(r(265582));r(573969);var v=f(r(38959)),y=f(r(549849)),b=f(r(908843)),_=f(r(819989)),S=f(r(68982)),x=f(r(818565)),w=f(r(32099)),C=f(r(360147)),k=f(r(303787)),I=f(r(75613)),P=f(r(342279)),D=f(r(532462)),T=f(r(29672)),A=f(r(89195)),R=f(r(797490)),F=f(r(667746)),E=f(r(40090)),N=f(r(303884)),M=f(r(601839)),j=f(r(877879)),B=f(r(661297)),L=f(r(756612)),V=f(r(620173)),O=f(r(336936)),z=f(r(785219)),q=f(r(468224)),K=f(r(814910)),G=f(r(371573)),U=f(r(823872)),Q=r(189961),H=f(r(38256)),W=r(127567),J=(r(877800),f(r(618334))),Y=r(83575),Z=f(r(31170)),X=r(211110),$=f(r(360165)),ee=f(r(942240)),te=r(113479),ae=f(r(506408)),re=["id","tab"],ne=["page","limit","sortKey","sortOrder"],le=["keywords"],ie=["sortKey","limit","page","current","sortOrder"],oe=["page","limit","sortKey","sortOrder"],se=["silent"];function ue(e,t){var a=n(e);if(l){var r=l(e);t&&(r=i(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function de(e){for(var t=1;t<arguments.length;t++){var a,r,n=null!=arguments[t]?arguments[t]:{};t%2?s(a=ue(Object(n),!0)).call(a,(function(t){(0,j.default)(e,t,n[t])})):u?d(e,u(n)):s(r=ue(Object(n))).call(r,(function(t){c(e,t,o(n,t))}))}return e}class ce extends U.default.Component{constructor(e){var a,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),a=this,(0,j.default)(this,"setRefreshDataTimerTransition",(()=>{this.stopRefreshAuto(),this.dataTimerTransition||(this.dataTimerTransition=(0,b.default)((()=>{this.handleRefresh(),this.dataTimerTransition=null}),1e3*this.dataDurationTransition))})),(0,j.default)(this,"setRefreshDataTimerAuto",(()=>{if(this.stopRefreshTransition(),this.ableAutoFresh){var{autoRefresh:e}=this.state;e&&!this.dataTimerAuto&&(this.dataTimerAuto=(0,b.default)((()=>{this.autoRefreshCount+=1,this.handleRefresh(),this.dataTimerAuto=null}),1e3*this.dataDurationAuto))}})),(0,j.default)(this,"onStopRefreshAuto",(()=>{this.setState({autoRefresh:!1}),this.stopRefreshAuto()})),(0,j.default)(this,"onClickAction",(()=>{this.inAction=!0,this.autoRefreshCount=0})),(0,j.default)(this,"onFinishAction",(()=>{this.inAction=!1,this.handleSelectRowKeys([]),this.handleRefresh(!0)})),(0,j.default)(this,"onCancelAction",(()=>{this.inAction=!1,this.getDataSource()})),(0,j.default)(this,"handleInputFocus",(e=>{this.inAction=e,e||this.setRefreshDataTimerAuto()})),(0,j.default)(this,"fetchListWithTry",function(){var e=(0,M.default)((function*(e){try{e&&(yield e())}catch(e){var{message:r="",data:n,status:l}=(e||{}).response||e||{};if(401===l){var i=t("The session has expired, please log in again.");Z.default.errorWithDetail(null,i)}else if(500===l){var o,s=t("System is error, please try again later."),u=(0,_.default)(o="".concat(t("Get {name} error.",{name:a.name.toLowerCase()})," ")).call(o,s);Z.default.errorWithDetail(null,u)}else{var d={message:n||r||e||"",status:l};Z.default.errorWithDetail(d,t("Get {name} error.",{name:a.name.toLowerCase()}))}a.list.isLoading=!1,a.list.silent=!1}}));return function(t){return e.apply(this,arguments)}}()),(0,j.default)(this,"updateFetchParamsByPage",(e=>e)),(0,j.default)(this,"updateFetchParams",(e=>e)),(0,j.default)(this,"fetchDataByPage",function(){var e=(0,M.default)((function*(e){yield a.store.fetchListByPage(e),a.list.silent=!1}));return function(t){return e.apply(this,arguments)}}()),(0,j.default)(this,"fetchData",function(){var e=(0,M.default)((function*(e){yield a.store.fetchList(e),a.list.silent=!1}));return function(t){return e.apply(this,arguments)}}()),(0,j.default)(this,"fetchDownloadData",function(){var e=(0,M.default)((function*(e){return a.isFilterByBackend?yield a.downloadStore.fetchListByPage(a.updateFetchParamsByPage(e)):yield a.downloadStore.fetchList(a.updateFetchParams(e))}));return function(t){return e.apply(this,arguments)}}()),(0,j.default)(this,"getDownloadData",(0,M.default)((function*(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,N.default)({},((0,E.default)(e),e)),{filters:r}=a.state,n=de(de(de(de({},a.props.match.params),t),r),{},{sortKey:t.sortKey||a.isSortByBackend&&a.defaultSortKey||"",sortOrder:t.sortOrder||a.isSortByBackend&&a.defaultSortOrder||""});return!a.isAdminPage&&a.fetchDataByCurrentProject?n.project_id=a.currentProjectId:a.isAdminPage&&a.fetchDataByAllProjects&&a.allProjectsKey&&(n[a.allProjectsKey]=!0),yield a.fetchDownloadData(n)}))),(0,j.default)(this,"startRefreshAuto",(()=>{this.autoRefreshCount=0,this.setState({autoRefresh:!0}),this.handleRefresh()})),(0,j.default)(this,"stopRefreshAuto",(()=>{clearTimeout(this.dataTimerAuto),this.dataTimerAuto=null})),(0,j.default)(this,"stopRefreshTransition",(()=>{clearTimeout(this.dataTimerTransition),this.dataTimerTransition=null})),(0,j.default)(this,"getFilteredValue",(e=>this.list.filters[e])),(0,j.default)(this,"checkIsProjectFilter",(e=>e.name===this.projectFilterKey)),(0,j.default)(this,"getSearchFilters",(()=>{var e=this.searchFilters;return this.isAdminPage&&this.adminPageHasProjectFilter?(0,S.default)(e).call(e,(e=>this.checkIsProjectFilter(e)))?e:[...e,{label:t("Project ID"),name:this.projectFilterKey}]:e})),(0,j.default)(this,"filterDataByTime",(e=>{if(!this.filterTimeKey)return!0;var{timeFilter:{value:t=0,start:a,end:r}={}}=this.state;if(0===t)return!0;var n=(0,q.default)(e,this.filterTimeKey,0);return 1!==t?(0,X.checkTimeIn)(n,(new Date).getTime()-t,null):(0,X.checkTimeIn)(n,a,r)})),(0,j.default)(this,"checkFilterInclude",(e=>{var t,a=(0,S.default)(t=this.searchFilters).call(t,(t=>t.name===e));return(0,L.default)(a,"include")?a.include:!(0,L.default)(a,"options")})),(0,j.default)(this,"filterData",(e=>{var t;if(!this.filterDataByTime(e))return!1;var{filters:a}=this.state;if(1===(0,x.default)(a).length&&a.keywords){var r,{keywords:n}=a;return!!(0,S.default)(r=(0,w.default)(e)).call(r,(e=>((0,z.default)(e)||(0,V.default)(e))&&(0,C.default)(e).call(e,n)>=0))}return!(0,S.default)(t=(0,x.default)(a)).call(t,(t=>{var r,n=(0,q.default)(e,t),l=a[t],{filterFunc:i}=(0,S.default)(r=this.getSearchFilters()).call(r,(e=>e.name===t));if(i)return!i(n,l,e);var o,s=this.checkFilterInclude(t);return(0,z.default)(n)&&(0,z.default)(l)?s?(0,C.default)(o=n.toLowerCase()).call(o,l.toLowerCase())<0:n.toLowerCase()!==l.toLowerCase():!(0,O.default)(n,l)}))})),(0,j.default)(this,"getDataSource",(()=>{var e,{data:t,filters:a={}}=this.list,{timeFilter:r={}}=this.state,{id:n,tab:l}=a,i=(0,y.default)(a,re),o=[];this.isFilterByBackend?o=(0,W.toJS)(t):(o=(0,k.default)(e=(0,W.toJS)(t)||[]).call(e,(e=>this.filterData(e,(0,W.toJS)(i),(0,W.toJS)(r)))),this.updateList({total:o.length}));return(0,I.default)(o).call(o,(e=>this.itemInTransitionFunction(e)))?this.setRefreshDataTimerTransition():this.setRefreshDataTimerAuto(),this.updateHintsByData(o),this.setTableHeight(),o})),(0,j.default)(this,"getFilters",(()=>{var e,{filters:t}=this.list;return de(de({},(0,Q.parse)((0,P.default)(e=this.location.search).call(e,1))),(0,W.toJS)(t))})),(0,j.default)(this,"handleMoreMenuClick",(e=>(t,a)=>{var r,n=(0,S.default)(r=this.enabledItemActions).call(r,(e=>e.key===a));n&&n.onClick&&n.onClick(e)})),(0,j.default)(this,"refreshDetailData",(()=>{var{refreshDetail:e}=this.props;e&&e(this.refreshDetailDataWithSilence)})),(0,j.default)(this,"handleRefresh",(e=>{var{inAction:t,inSelect:a}=this;if((!this.inDetailPage||!this.inDetailAction)&&!(t||a&&!e)&&(e||!(this.autoRefreshCount>=this.autoRefreshCountMax))){e&&(this.autoRefreshCount=0);var{page:r,limit:n,sortKey:l,sortOrder:i,filters:o}=this.list,s=de(de({page:r,limit:n,sortKey:l,sortOrder:i},(0,W.toJS)(o)),{},{silent:!e});this.handleFetch(s,!0),this.inDetailPage&&(e||this.forceRefreshTopDetailWhenListRefresh)&&this.shouldRefreshDetail&&this.refreshDetailData()}})),(0,j.default)(this,"updateList",(e=>{var t;this.list&&(this.list.update?this.list.update(e):(0,D.default)(t=(0,x.default)(e)).call(t,(t=>{this.list[t]=e[t]})))})),(0,j.default)(this,"getPureParamsByFrontend",(e=>{var t,{page:a,limit:r,sortKey:n,sortOrder:l}=e,i=(0,y.default)(e,ne),o={page:a,limit:r};if(this.isSortByBackend&&(o.sortKey=n,o.sortOrder=l),!this.searchFilters.length){var{keywords:s}=i,u=(0,y.default)(i,le);return de(de({},o),u)}return(0,D.default)(t=(0,x.default)(i)).call(t,(e=>{var t;(0,S.default)(t=this.searchFilters).call(t,(t=>t.name===e))||(o[e]=i[e])})),o})),(0,j.default)(this,"handleFetch",((e,t)=>{if(!t||this.isFilterByBackend){var{sortKey:a,limit:r,page:n,current:l,sortOrder:i}=e;(0,y.default)(e,ie);n===this.list.page&&r===this.list.limit||(this.autoRefreshCount=0),this.isFilterByBackend?this.getDataWithPolicy(de(de({},e),this.list.filters||{})):this.updateList({page:n,limit:r,sortKey:a,sortOrder:i})}else this.getDataWithPolicy(this.getPureParamsByFrontend(e))})),(0,j.default)(this,"handleFetchBySort",(e=>{if(this.isSortByBackend){var t=de(de({},e),{},{page:1});this.handleFetch(t,!0)}else{var{sortKey:a,limit:r,page:n,sortOrder:l}=e;this.updateList({page:n,limit:r,sortKey:a,sortOrder:l})}})),(0,j.default)(this,"handleFilterChange",((e,t)=>{var{page:a,limit:r,sortKey:n,sortOrder:l}=e,i=(0,y.default)(e,oe);this.isFilterByBackend?(this.list.filters=e,this.setState({filters:i,timeFilter:t},(()=>{this.handleFetch(e,!0)}))):(this.updateList({page:a,sortKey:n,sortOrder:l,filters:i}),this.setState({filters:i,timeFilter:t}))})),(0,j.default)(this,"handleSelectRowKeys",(e=>{this.store.setSelectRowKeys("list",e),e&&0!==e.length?(this.inSelect=!0,this.autoRefreshCount=0):(this.inSelect=!1,this.getDataSource())})),(0,j.default)(this,"onCloseSuccessHint",(()=>{})),(0,j.default)(this,"getTablePageSize",(e=>{var t=[10,20,50,100],a=this.pageSizeOptions||t;return(0,T.default)(a).call(a,e)?e:a[0]||t[0]})),(0,j.default)(this,"renderMore",((e,t)=>{if((0,G.default)(this.enabledItemActions))return null;var a=this.renderMoreMenu(t);return null===a?null:U.default.createElement(g.default,{content:a,trigger:"click",placement:"bottomRight"},U.default.createElement(v.default,{icon:"more",type:"flat"}))})),(0,j.default)(this,"renderMoreMenu",(e=>{var t,a=(0,A.default)(t=this.enabledItemActions).call(t,(t=>((0,K.default)(t.show)?t.show(e):t.show||!0)?U.default.createElement(h.default.MenuItem,{key:t.key},U.default.createElement(m.default,{name:t.icon})," ",U.default.createElement("span",null,t.text)):null));return(0,R.default)(a).call(a,(e=>null===e))?null:U.default.createElement(h.default,{onClick:this.handleMoreMenuClick(e)},a)})),this.options=n,this.state={filters:{},timeFilter:{},autoRefresh:!0,newHints:!1,tableHeight:this.getTableHeight()},this.dataTimerTransition=null,this.dataTimerAuto=null,this.dataDurationTransition=10,this.dataDurationAuto=30,this.autoRefreshTotalTime=600,this.autoRefreshCount=0,this.autoRefreshCountMax=Math.floor(this.autoRefreshTotalTime/this.dataDurationAuto),this.infoMessage="",this.successMessage="",this.errorMessage="",this.warnMessage="",this.inAction=!1,this.inSelect=!1,this.setTableHeight=(0,F.default)(r=this.setTableHeight).call(r,this),this.debounceSetTableHeight=this.debounceSetTableHeight.call(this),this.init()}componentDidMount(){var e=this.initFilter;if(!this.filterTimeKey){var{limit:t,page:a}=this.store.list;this.list.filters={},this.handleFetch(de(de({},e),{},{limit:t,page:a}),!0)}window.addEventListener("resize",this.debounceSetTableHeight)}componentDidUpdate(e){if(this.inDetailPage){var{detail:t}=e,{detail:a}=this.props;(0,G.default)(t)||(0,G.default)(a)||(0,O.default)(t,a)||this.handleRefresh(!0)}}componentWillUnmount(){this.unsubscribe&&this.unsubscribe(),this.disposer&&this.disposer(),this.unMountActions&&this.unMountActions(),this.stopRefreshTransition(),this.stopRefreshAuto(),this.clearListUnmount&&this.store.clearData&&this.store.clearData("listUnmount"),window.removeEventListener("resize",this.debounceSetTableHeight)}get policy(){return""}get aliasPolicy(){return""}get name(){return""}get title(){return"".concat(this.name,"s")}get className(){return""}get path(){var{location:{pathname:e=""}={}}=this.props;return e||""}get inDetailPage(){var{detail:e}=this.props;return!!e}get inDetailAction(){var{inAction:e}=this.props;return!!e}get detailName(){if(!this.inDetailPage)return"";var{detailName:e}=this.props;return e}get shouldRefreshDetail(){return!0}get location(){return this.props.location}get isAdminPage(){var{pathname:e}=this.location;return(0,Y.isAdminPage)(e)}get hasAdminRole(){return this.props.rootStore.hasAdminRole}getRouteName(e){return this.isAdminPage?"".concat(e,"Admin"):e}getRoutePath(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.getRouteName(e);return(0,te.getPath)({key:r,params:t,query:a})}getLinkRender(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=this.getRouteName(e);return(0,te.getLinkRender)({key:n,params:a,query:r,value:t})}get prefix(){return this.props.match.url}get params(){return this.props.match.params||{}}get routing(){return this.props.rootStore.routing}get list(){return this.store.list}get isLoading(){return this.list.isLoading||this.store.isSubmitting}get tips(){return[]}get rowKey(){return"id"}get hasTab(){return!1}get hasSubTab(){return!1}get hideCustom(){return!1}get hideSearch(){return!1}get hideRefresh(){return!1}get hideDownload(){return!1}get checkEndpoint(){return!1}get endpoint(){return""}get endpointError(){return this.checkEndpoint&&!this.endpoint}get initFilter(){var e;return(0,Q.parse)((0,P.default)(e=this.location.search).call(e,1))||{}}get hintHeight(){var e=0;return this.infoMessage&&(e+=50),this.warnMessage&&(e+=50),this.errorMessage&&(e+=50),this.successMessage&&(e+=50),e}get tableTopHeight(){var e=document.getElementById("sl-table-header-search"),t=document.getElementById("search-items-menu"),a=e?e.scrollHeight:50,r=(null==t?void 0:t.scrollHeight)||0,n=90+(r?a-r+10:a)+16;return this.hasSubTab?n+88+20:this.hasTab?n+44:n}getTableHeight(){var e=window.innerHeight;if(this.inDetailPage)return-1;var t=document.getElementsByClassName("ant-table-header")[0],a=t?t.offsetHeight:51,r=e-this.tableTopHeight-this.hintHeight-50-a;return r>0?r:1}get tableWidth(){return 800}get isFilterByBackend(){return!1}get isSortByBackend(){return!1}get ableSkipPageByBackend(){return!1}get enabledItemActions(){var e;return(0,k.default)(e=this.itemActions).call(e,(e=>!e.action))}get adminPageHasProjectFilter(){return!1}get transitionStatusList(){return[]}get fetchDataByAllProjects(){return!0}get currentUser(){var{user:e}=this.props.rootStore||{};return e||{}}get currentProjectId(){return this.props.rootStore.projectId}get fetchDataByCurrentProject(){return!1}get defaultSortKey(){return""}get defaultSortOrder(){return"descend"}get clearListUnmount(){return!1}get itemInTransitionFunction(){return e=>{var t,{status:a}=e;return(0,C.default)(t=this.transitionStatusList).call(t,a)>=0}}get ableAutoFresh(){return!0}get actionConfigs(){return{batchActions:[],primaryActions:[],rowActions:[]}}get primaryActions(){return this.actionConfigs.primaryActions}get batchActions(){return this.actionConfigs.batchActions}get itemActions(){return this.actionConfigs.rowActions}get searchFilters(){return[]}get expandable(){}get filterTimeKey(){}get projectFilterKey(){return"project_id"}get pageSizeOptions(){return[10,20,50,100]}get hideTotal(){return!1}get primaryActionsExtra(){return null}get allProjectsKey(){return"all_projects"}get forceRefreshTopDetailWhenListRefresh(){return!1}get middleComponentInTableHeader(){return null}get refreshDetailDataWithSilence(){return!0}getEmptyProps(){return{}}getEnabledTableProps(){var e=this.getTableProps();return(0,G.default)(this.batchActions)&&(e.onSelectRowKeys=null),e}getCheckboxProps(e){return{disabled:!1,name:e.name}}getBaseTableProps(){var{keyword:e,selectedRowKeys:a,total:r,page:n,limit:l,silent:i,sortKey:o,sortOrder:s,timerFilter:u}=this.list,d={total:r,current:Number(n),pageSize:this.getTablePageSize(l),showTotal:e=>t("Total {total} items",{total:e}),showSizeChanger:!0};this.pageSizeOptions&&(d.pageSizeOptions=this.pageSizeOptions);var{autoRefresh:c,tableHeight:f}=this.state;return de({resourceName:this.name,detailName:this.detailName,data:this.getDataSource(),columns:this.getColumns(),filters:this.getFilters(),timerFilter:u,searchFilters:this.getSearchFilters(),keyword:e,pagination:d,primaryActions:this.primaryActions,batchActions:this.batchActions,itemActions:this.itemActions,getCheckboxProps:this.getCheckboxProps,isLoading:this.isLoading,silentLoading:i,rowKey:this.rowKey,selectedRowKeys:(0,W.toJS)(a),scrollY:f,sortKey:o,sortOrder:s,defaultSortKey:this.defaultSortKey,defaultSortOrder:this.defaultSortOrder,getDownloadData:this.getDownloadData,containerProps:this.props,expandable:this.expandable,showTimeFilter:!!this.filterTimeKey,filterTimeDefaultValue:this.filterTimeDefaultValue,isPageByBack:this.isFilterByBackend,isSortByBack:this.isSortByBackend,ableSkipPageByBackend:this.ableSkipPageByBackend,autoRefresh:c,startRefreshAuto:this.startRefreshAuto,stopRefreshAuto:this.onStopRefreshAuto,onClickAction:this.onClickAction,onFinishAction:this.onFinishAction,onCancelAction:this.onCancelAction,dataDurationAuto:this.dataDurationAuto,handleInputFocus:this.handleInputFocus,hideTotal:this.hideTotal,hideDownload:this.hideDownload,primaryActionsExtra:this.primaryActionsExtra,isAdminPage:this.isAdminPage,initFilter:this.initFilter,middleComponentInHeader:this.middleComponentInTableHeader},this.getEnabledTableProps())}getTableProps(){return{onRefresh:this.handleRefresh,onFetch:this.handleFetch,onFetchBySort:this.handleFetchBySort,onSelectRowKeys:this.handleSelectRowKeys,onFilterChange:this.handleFilterChange,hideCustom:this.hideCustom,hideSearch:this.hideSearch,hideRefresh:this.hideRefresh,hideAutoRefresh:!this.ableAutoFresh}}getData(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{silent:t}=e,a=(0,y.default)(e,se);t&&(this.list.silent=!0);var r=de(de(de({},this.props.match.params),a),{},{sortKey:a.sortKey||this.isSortByBackend&&this.defaultSortKey||"",sortOrder:a.sortOrder||this.isSortByBackend&&this.defaultSortOrder||""});if(!this.isAdminPage&&this.fetchDataByCurrentProject?r.project_id=this.currentProjectId:this.isAdminPage&&this.fetchDataByAllProjects&&this.allProjectsKey&&(r[this.allProjectsKey]=!0),this.isFilterByBackend){var{limit:n}=r;n&&(r.limit=this.getTablePageSize(n)),this.fetchListWithTry((()=>this.fetchDataByPage(this.updateFetchParamsByPage(r))))}else this.fetchListWithTry((()=>this.fetchData(this.updateFetchParams(r))))}getDataWithPolicy(e){if(this.currentUser&&!(0,G.default)(this.currentUser)&&!this.endpointError){if(!(0,$.default)({policy:this.policy,aliasPolicy:this.aliasPolicy,actionName:this.name})){var a={message:t("You don't have access to get {name}.",{name:this.name.toLowerCase()}),status:401};return Z.default.errorWithDetail(a,t("Unable to get {name}.",{name:this.name.toLowerCase()})),this.list.isLoading=!1,void(this.list.silent=!1)}this.getData(e)}}setTableHeight(){if(!this.inAction){var e=this.getTableHeight(),{tableHeight:t}=this.state;e!==t&&this.setState({tableHeight:e})}}getColumns(){return[]}debounceSetTableHeight(){return(0,B.default)(this.setTableHeight,1e3)}updateHintsByOthers(){this.updateHints&&(this.updateHints(),(0,b.default)(this.setTableHeight,0),this.setState({newHints:!0}))}updateHintsByData(e){}init(){this.store={list:{}},this.downloadStore={}}renderTable(){try{var e=this.getBaseTableProps();return U.default.createElement(J.default,e)}catch(e){var t=this.getRoutePath("overview");return U.default.createElement(ee.default,{title:this.name,link:t,codeError:!0})}}renderInfoHint(){return this.infoMessage?U.default.createElement(p.default,{message:this.infoMessage,type:"info",showIcon:!0,className:ae.default.hint}):null}renderSuccessHint(){return this.successMessage?U.default.createElement(p.default,{message:this.successMessage,type:"success",showIcon:!0,closable:!0,className:ae.default.hint,onClose:this.onCloseSuccessHint}):null}renderWarnHint(){return this.warnMessage?U.default.createElement(p.default,{message:this.warnMessage,type:"warning",showIcon:!0,className:ae.default.hint}):null}renderErrorHint(){return this.errorMessage?U.default.createElement(p.default,{message:this.errorMessage,type:"error",showIcon:!0,closable:!0,className:ae.default.hint}):null}renderHint(){var{newHints:e}=this.state;return e||this.infoMessage||this.warnMessage||this.successMessage||this.errorMessage?U.default.createElement("div",{className:(0,H.default)(ae.default.hints,"list-hints")},this.renderInfoHint(),this.renderSuccessHint(),this.renderWarnHint(),this.renderErrorHint()):null}renderHeader(){return null}render(){if(this.endpointError){var e=this.getRoutePath("overview");return U.default.createElement(ee.default,{title:this.name,link:e,endpointError:!0})}var t=this.renderTable();return U.default.createElement("div",{className:(0,H.default)(ae.default.wrapper,"list-container",this.className)},this.renderHeader(),this.renderHint(),t)}}a.default=ce},657383:(e,t,a)=>{(t=e.exports=a(840049)(!1)).push([e.id,"/* init */\n/* specific color */\n/*  border */\n/*  input */\n/*  background */\n/* button */\n/*  shadow */\n/*  font */\n/*  animation */\n/*  size */\n/*  sider */\n.index__layout-header-menu-search-border--38ON8 {\n  border: none;\n}\n.index__vertical-center--1m6Ax {\n  position: absolute;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n          transform: translateY(-50%);\n}\n/* login */\n.index__wrapper--26YmP {\n  min-height: calc(100vh - 108px);\n}\n.index__wrapper--26YmP .ant-tabs-content {\n  height: 100vh;\n}\n.index__wrapper--26YmP .ant-tabs > .ant-tabs-nav {\n  background-color: #fff;\n}\n.index__wrapper--26YmP .ant-tabs-nav-wrap {\n  padding: 0 16px;\n}\n.index__wrapper--26YmP .list-container {\n  margin-top: 0;\n}\n",""]),t.locals={primaryColor:"#a33e3e",normalColor:"rgba(34, 117, 74, 0.78)",successColor:"#57e39b",warnColor:"#fedf40",warnDarkColor:"#fa8c16",warnLightColor:"#f6b23d",errorColor:"#eb354d",dangerColor:"#c4233e",moneyColor:"#f50",infoColor:"rgba(0, 104, 255, 0.65)",headerHeight:"50px",productsColumnWidth:"220px","layout-header-menu-search-border":"index__layout-header-menu-search-border--38ON8","vertical-center":"index__vertical-center--1m6Ax",wrapper:"index__wrapper--26YmP"}},662731:(e,a,r)=>{"use strict";var n=r(818565),l=r(213696),i=r(303787),o=r(810732),s=r(532462),u=r(110819),d=r(722338),c=r(633950),f=r(471742),p=r(548924);c(a,"__esModule",{value:!0}),a.default=void 0;var h=p(r(767653));r(851011);var m=p(r(328153));r(710953);var g=p(r(430519));r(244771);var v=p(r(144313)),y=p(r(877879)),b=function(e,t){if("function"==typeof f)var a=new f,r=new f;return function(e,t){if(!t&&e&&e.__esModule)return e;var n,l,i={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return i;if(n=t?r:a){if(n.has(e))return n.get(e);n.set(e,i)}for(var s in e)"default"!==s&&{}.hasOwnProperty.call(e,s)&&((l=(n=c)&&o(e,s))&&(l.get||l.set)?n(i,s,l):i[s]=e[s]);return i}(e,t)}(r(823872)),_=(r(877800),p(r(61296)));r(384472);function S(e,t){var a=n(e);if(l){var r=l(e);t&&(r=i(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a,r,n=null!=arguments[t]?arguments[t]:{};t%2?s(a=S(Object(n),!0)).call(a,(function(t){(0,y.default)(e,t,n[t])})):u?d(e,u(n)):s(r=S(Object(n))).call(r,(function(t){c(e,t,o(n,t))}))}return e}class w extends b.Component{constructor(e){super(e),(0,y.default)(this,"onChange",(e=>{var{onChange:t}=this.props;t&&t(e)})),(0,y.default)(this,"onKeyChange",(e=>{this.onChange(x(x({},this.state),{},{key:e.target.value}))})),(0,y.default)(this,"onValueChange",(e=>{this.onChange(x(x({},this.state),{},{value:e.target.value}))})),this.state={key:"",value:""}}static getDerivedStateFromProps(e,t){var{key:a,value:r}=e.value||{};return a!==t.key||r!==t.value?{key:a,value:r}:null}renderInput(e,t,a){var{isTextarea:r=!1,textareaRows:n}=this.props,l={value:e,placeholder:t,onChange:this.onValueChange,readOnly:a,required:!0};return r?(l.rows=n,b.default.createElement(v.default.TextArea,l)):b.default.createElement(v.default,l)}render(){var{key:e,value:a}=this.state,{keyReadonly:r,valueReadonly:n,keySpan:l,valueSpan:i,keyPlaceholder:o=t("Please input key"),valuePlaceholder:s=t("Please input value"),middleComponent:u}=this.props,d=b.default.createElement("div",{style:{textAlign:"center",lineHeight:"30px",margin:"0 10px"}},u);return b.default.createElement(m.default,null,b.default.createElement(g.default,{span:l||4},b.default.createElement(v.default,{value:e,placeholder:o,onChange:this.onKeyChange,readOnly:r,required:!0})),d,b.default.createElement(g.default,{span:i||8},this.renderInput(a,s,n)))}}a.default=w,(0,y.default)(w,"propTypes",{onChange:_.default.func,value:_.default.object,keyReadonly:_.default.bool,valueReadonly:_.default.bool,keySpan:_.default.number,valueSpan:_.default.number,middleComponent:_.default.node,isTextarea:_.default.bool,textareaRows:_.default.number}),(0,y.default)(w,"defaultProps",{onChange:null,value:{key:"",value:""},keyReadonly:!1,valueReadonly:!1,middleComponent:b.default.createElement(h.default,{rotate:90}),isTextarea:!1,textareaRows:2})},690132:(e,a,r)=>{"use strict";var n=r(471742),l=r(633950),i=r(810732),o=r(548924);l(a,"__esModule",{value:!0}),a.default=void 0;var s=o(r(424836)),u=o(r(908843)),d=o(r(29672));r(573969);var c=o(r(38959));r(46630);var f=o(r(308380)),p=o(r(303884)),h=o(r(877879)),m=function(e,t){if("function"==typeof n)var a=new n,r=new n;return function(e,t){if(!t&&e&&e.__esModule)return e;var n,o,s={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return s;if(n=t?r:a){if(n.has(e))return n.get(e);n.set(e,s)}for(var u in e)"default"!==u&&{}.hasOwnProperty.call(e,u)&&((o=(n=l)&&i(e,u))&&(o.get||o.set)?n(s,u,o):s[u]=e[u]);return s}(e,t)}(r(823872)),g=(r(877800),o(r(61296))),v=r(83575);class y extends m.Component{static propTypes(){return{title:g.default.string.isRequired,buttonType:g.default.string,render:g.default.func,component:g.default.node,item:g.default.any,modalSize:g.default.string,okText:g.default.string,cancelText:g.default.string,handleOk:g.default.func,className:g.default.func,buttonText:g.default.string,buttonClassName:g.default.string,showCancelButton:g.default.bool,style:g.default.object,onClickButton:g.default.func,onFinishAction:g.default.func,onCancelAction:g.default.func}}constructor(e){super(e),(0,h.default)(this,"addListener",(()=>{var e=document.getElementsByClassName("modal-button-modal")[0];this.modalTarget=e,e&&(this.listenerResult=e.addEventListener("click",this.onClickModal))})),(0,h.default)(this,"removeListener",(()=>{var e=document.getElementsByClassName("modal-button-modal")[0];e&&(this.listenerResult=e.removeEventListener("click",this.onClickModal)),this.modalTarget=null})),(0,h.default)(this,"getModalWidth",(e=>{switch(e){case"small":default:return 520;case"middle":return 720;case"large":return 1200}})),(0,h.default)(this,"onClick",(e=>{this.stopEvent(e);var{onClickButton:t}=this.props;t&&t(),this.showModal()})),(0,h.default)(this,"onFinishAction",(()=>{var{onFinishAction:e}=this.props;e&&e()})),(0,h.default)(this,"handleOk",(e=>{this.stopEvent(e);var{handleOk:t}=this.props;t?(this.setState({submitLoading:!0}),t()instanceof s.default?t().finally((()=>{this.hideModal(),this.onFinishAction(),this.setState({submitLoading:!1})})):(this.hideModal(),this.onFinishAction(),this.setState({submitLoading:!1}))):(this.hideModal(),this.onFinishAction())})),(0,h.default)(this,"handleCancel",(e=>{this.stopEvent(e);var{onCancelAction:t}=this.props;t&&t(),this.hideModal()})),(0,h.default)(this,"hideModal",(()=>{this.removeListener(),this.setState({visible:!1})})),(0,h.default)(this,"showModal",(()=>{this.setState({visible:!0},(()=>{(0,u.default)((()=>{this.addListener()}),0)}))})),(0,h.default)(this,"stopEvent",(e=>{e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation()})),(0,h.default)(this,"onClickModal",(e=>{if(this.modalTarget){for(var t=[...this.modalTarget.getElementsByTagName("button"),...this.modalTarget.getElementsByTagName("a")],{innerHTML:a=""}=e.target||{},r=!1,n=["-",""],l=0;l<t.length;l++){var i;if(r)return;!(0,d.default)(n).call(n,a)&&(0,d.default)(i=t[l].innerHTML).call(i,a)&&(r=!0)}r||this.stopEvent(e)}else this.stopEvent(e)})),this.state={visible:!1,submitLoading:!1}}componentWillUnmount(){this.removeListener()}renderModal(){var{visible:e,submitLoading:t}=this.state;if(!e)return null;var{title:a,item:r,modalSize:n,className:l,okText:i,cancelText:o,render:s,component:u,showCancelButton:d}=this.props,c=this.getModalWidth(n),h=s?s(r):u,g={visible:e,title:a,key:"modal-".concat((0,v.generateId)()),className:l,width:c,onOk:this.handleOk,onCancel:this.handleCancel,okText:i,cancelText:o,confirmLoading:t};return d||(g.cancelButtonProps={style:{display:"none"}}),m.default.createElement(f.default,(0,p.default)({},g,{className:"modal-button-modal"}),h)}render(){var{buttonText:e,title:t,danger:a,style:r,buttonType:n,buttonClassName:l}=this.props;return m.default.createElement(m.default.Fragment,null,m.default.createElement(c.default,{type:n,danger:a,onClick:this.onClick,className:l,style:r},e||t),this.renderModal())}}a.default=y,(0,h.default)(y,"defaultProps",{buttonType:"primary",render:null,component:null,item:null,okText:t("Confirm"),cancelText:t("Cancel"),handleOk:null,className:"",buttonClassName:"",showCancelButton:!1,style:{},onClickButton:null,onFinishAction:null,onCancelAction:null})},690806:(e,a,r)=>{"use strict";var n=r(818565),l=r(213696),i=r(303787),o=r(810732),s=r(532462),u=r(110819),d=r(722338),c=r(633950),f=r(548924);c(a,"__esModule",{value:!0}),a.default=a.Credentials=void 0;var p=f(r(89195)),h=f(r(29672)),m=f(r(877879)),g=f(r(823872)),v=r(87067),y=f(r(654017)),b=r(648136),_=f(r(577186)),S=r(319982);function x(e,t){var a=n(e);if(l){var r=l(e);t&&(r=i(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a,r,n=null!=arguments[t]?arguments[t]:{};t%2?s(a=x(Object(n),!0)).call(a,(function(t){(0,m.default)(e,t,n[t])})):u?d(e,u(n)):s(r=x(Object(n))).call(r,(function(t){c(e,t,o(n,t))}))}return e}class C extends y.default{constructor(){super(...arguments),(0,m.default)(this,"getColumns",(()=>[{title:t("ID/Name"),dataIndex:"name",isName:!0,hasNoDetail:!0},{title:t("Project ID/Name"),dataIndex:"project_name"},{title:t("Description"),dataIndex:"description",isHideable:!0},{title:t("Expires At"),dataIndex:"expires_at",valueRender:"toLocalTime",isHideable:!0},{title:t("Restricted Situation"),dataIndex:"unrestricted",isHideable:!0,render:e=>e?t("Unrestricted"):t("Restricted"),titleTip:t("Used to restrict whether the application credential may be used for the creation or destruction of other application credentials or trusts.")},{title:t("Roles"),dataIndex:"roles",render:e=>{var t;return(0,p.default)(t=e||[]).call(t,(e=>g.default.createElement("div",{key:e.id},e.name)))},stringify:e=>(0,p.default)(e).call(e,(e=>e.name)).join("\n")}])),(0,m.default)(this,"updateFetchParams",(e=>this.isUserDetail?e:w(w({},e),{},{id:_.default.user.user.id})))}init(){this.store=new b.CredentialStore,this.downloadStore=new b.CredentialStore}get isUserDetail(){var e;return this.inDetailPage&&(0,h.default)(e=this.path).call(e,"user-admin/detail")}get policy(){return"identity:get_application_credential"}get name(){return t("application credential")}get actionConfigs(){return this.isUserDetail?S.detailConfigs:S.actionConfigs}get searchFilters(){return[{label:t("Name"),name:"name"}]}}a.Credentials=C;a.default=(0,v.inject)("rootStore")((0,v.observer)(C))},700776:(e,a,r)=>{"use strict";var n=r(633950),l=r(548924);n(a,"__esModule",{value:!0}),a.default=a.Create=void 0;var i=l(r(549849)),o=l(r(89195)),s=l(r(303787)),u=l(r(818565)),d=l(r(677861)),c=l(r(424836)),f=l(r(877879)),p=r(87067),h=r(860615),m=l(r(648136)),g=l(r(895761)),v=l(r(577186)),y=r(127567),b=l(r(338233)),_=["links","roles","system","unrestricted","user_id","name"];class S extends h.ModalAction{constructor(){super(...arguments),(0,f.default)(this,"onSubmit",(e=>{var t,a;(e.expires_at&&(e.expires_at=e.expires_at.clone().endOf("day")),e.roles)&&(e.roles=(0,o.default)(t=(0,s.default)(a=(0,u.default)(e.roles)).call(a,(t=>e.roles[t]))).call(t,(e=>({id:e}))));return m.default.create(e).then((e=>{var t=e.application_credential,{links:a,roles:r,system:n,unrestricted:l,user_id:o,name:s}=t,u=(0,i.default)(t,_),c="".concat(s,".json"),f=new Blob([(0,d.default)(u,null,2)],{type:"text/plain;charset=utf-8"});b.default.saveAs(f,c)}))}))}static get modalSize(){return"middle"}getModalSize(){return"middle"}get name(){return t("Create Application Credentials")}static allowed(){return c.default.resolve(!0)}get roleOptions(){var e=(0,y.toJS)(v.default.roles);return(0,o.default)(e).call(e,(e=>({label:e.name,value:e.id})))}get formItems(){return[{name:"name",label:t("Name"),type:"input-name",required:!0},{name:"expires_at",label:t("Expires At"),type:"date-picker",showToday:!1,disabledDate:e=>e&&e<(0,g.default)().subtract(1,"days").endOf("d"),required:!1},{name:"roles",label:t("Roles"),type:"check-group",options:this.roleOptions,extra:t("If not provided, the roles assigned to the application credential will be the same as the roles in the current token."),span:12},{name:"unrestricted",label:t("Unrestricted"),type:"check",content:t("Unrestricted"),extra:t("By default, for security reasons, application credentials are forbidden from being used for creating or destructing additional application credentials or keystone trusts. If your application credential needs to be able to perform these actions, check unrestricted.")},{name:"description",label:t("Description"),type:"textarea",required:!1}]}}a.Create=S,(0,f.default)(S,"id","create-application_credentials"),(0,f.default)(S,"title",t("Create Application Credentials")),(0,f.default)(S,"policy","identity:create_application_credential");a.default=(0,p.inject)("rootStore")((0,p.observer)(S))},703871:(e,t,a)=>{var r=a(657383);"string"==typeof r&&(r=[[e.id,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(453027)(r,n);r.locals&&(e.exports=r.locals)},723063:(e,a,r)=>{"use strict";var n=r(633950),l=r(548924);n(a,"__esModule",{value:!0}),a.default=a.UpdateStatus=void 0;var i=l(r(819989)),o=l(r(424836)),s=l(r(877879)),u=r(87067),d=r(860615),c=l(r(342616));class f extends d.ModalAction{constructor(){super(...arguments),(0,s.default)(this,"handleStatusChange",(e=>{this.setState({status:e})})),(0,s.default)(this,"onSubmit",(e=>{var{id:t}=this.item;return delete e.volume,this.store.resetStatus(t,e)}))}get name(){return t("update status")}get defaultValue(){var e,t,{name:a,id:r,volume_type:n,size:l}=this.item;return{volume:(0,i.default)(e=(0,i.default)(t="".concat(a||r,"(")).call(t,n," | ")).call(e,l,"GiB)"),status:"available"}}get tips(){return t('Do not reset the normally mounted volume to the "available""maintenance" or "error" status. The reset state does not remove the volume from the instance. If you need to remove the volume from the instance, please go to the console of the corresponding project and use the "detach" operation.')}get formItems(){var{status:e}=this.state,a=[{value:"available",label:t("Available")},{value:"maintenance",label:t("Maintained")},{value:"error",label:t("Error")},{value:"in-use",label:t("In Use")}];return[{name:"volume",label:t("Volume"),type:"label",iconType:"volume"},{name:"status",label:t("Status"),type:"select",required:!0,options:a,onChange:this.handleStatusChange,extra:"in-use"===e?t("The volume status can be reset to in-use only when the previous status is in-use."):""}]}init(){this.store=c.default}}a.UpdateStatus=f,(0,s.default)(f,"id","update-status"),(0,s.default)(f,"title",t("Update Status")),(0,s.default)(f,"policy","volume_extension:volume_admin_actions:reset_status"),(0,s.default)(f,"allowed",(()=>o.default.resolve(!0)));a.default=(0,u.inject)("rootStore")((0,u.observer)(f))},731447:(e,t,a)=>{"use strict";var r=a(818565),n=a(213696),l=a(303787),i=a(810732),o=a(532462),s=a(110819),u=a(722338),d=a(633950),c=a(548924);d(t,"__esModule",{value:!0}),t.default=t.InstanceVolumeStore=void 0;var f=c(a(89195)),p=c(a(424836)),h=c(a(532462)),m=c(a(601839)),g=c(a(549849)),v=c(a(877879)),y=c(a(892621)),b=c(a(381891)),_=a(83575),S=a(505997),x=["id","serverId","all_projects","projectId","serverName"];function w(e,t){var a=r(e);if(n){var o=n(e);t&&(o=l(o).call(o,(function(t){return i(e,t).enumerable}))),a.push.apply(a,o)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a,r,n=null!=arguments[t]?arguments[t]:{};t%2?o(a=w(Object(n),!0)).call(a,(function(t){(0,v.default)(e,t,n[t])})):s?u(e,s(n)):o(r=w(Object(n))).call(r,(function(t){d(e,t,i(n,t))}))}return e}class k extends b.default{constructor(){super(...arguments),(0,v.default)(this,"getFatherResourceId",(e=>e.serverId))}get client(){return y.default.nova.servers.volumeAttachments}get isSubResource(){return!0}get paramsFunc(){return e=>{var{id:t,serverId:a,all_projects:r,projectId:n,serverName:l}=e;return(0,g.default)(e,x)}}get mapperBeforeFetchProject(){return(e,t)=>{var{projectId:a}=t;return C(C({},e),{},{project_id:a})}}get mapper(){return e=>(0,S.updateVolume)(e)}get groupArraySize(){return 10}listDidFetch(e,t){var a=this;return(0,m.default)((function*(){if(0===e.length)return e;var r=(0,f.default)(e).call(e,(e=>e.volumeId)),n=(0,_.groupArray)(r,a.groupArraySize),l=yield p.default.all((0,f.default)(n).call(n,(e=>{var r={uuid:e,all_projects:t};return a.skylineClient.extension.volumes(r)}))),i=[];return(0,h.default)(l).call(l,(e=>{i.push(...e.volumes)})),i}))()}}t.InstanceVolumeStore=k;var I=new k;t.default=I},737070:(e,t,a)=>{var r=a(343958);"string"==typeof r&&(r=[[e.id,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(453027)(r,n);r.locals&&(e.exports=r.locals)},742181:(e,t,a)=>{"use strict";var r=a(818565),n=a(213696),l=a(303787),i=a(810732),o=a(532462),s=a(110819),u=a(722338),d=a(633950),c=a(548924);d(t,"__esModule",{value:!0}),t.default=void 0;var f=c(a(89195)),p=c(a(877879)),h=c(a(756612)),m=c(a(823872)),g=c(a(38256)),v=c(a(175548)),y=a(127567),b=a(83575),_=a(113479),S=c(a(870792));function x(e,t){var a=r(e);if(n){var o=n(e);t&&(o=l(o).call(o,(function(t){return i(e,t).enumerable}))),a.push.apply(a,o)}return a}class w extends m.default.Component{constructor(e){super(e),(0,p.default)(this,"fetchData",(e=>{this.shouldFetchDetail&&this.store.fetchDetail&&this.store.fetchDetail(function(e){for(var t=1;t<arguments.length;t++){var a,r,n=null!=arguments[t]?arguments[t]:{};t%2?o(a=x(Object(n),!0)).call(a,(function(t){(0,p.default)(e,t,n[t])})):s?u(e,s(n)):o(r=x(Object(n))).call(r,(function(t){d(e,t,i(n,t))}))}return e}({id:this.id},e)).catch(this.catch)})),this.init()}componentDidMount(){this.fetchData()}get id(){var{id:e}=this.props.match.params;return e}get currentUser(){var{user:e}=this.props.rootStore||{};return e||{}}get currentProjectId(){return this.props.rootStore.projectId}get projectId(){var{project_id:e,tenant_id:t,owner:a,owner_id:r}=this.detailData;return e||t||a||r}get isMyResource(){return this.projectId===this.currentProjectId}get detailData(){return this.props.detail||(0,y.toJS)(this.store.detail)}get isLoading(){return this.store.isLoading}get routing(){return this.props.rootStore.routing}get path(){var{location:{pathname:e=""}={}}=this.props;return e||""}get leftCards(){return[]}get rightCards(){return[]}get isAdminPage(){var{pathname:e=""}=this.props.location||{};return(0,b.isAdminPage)(e)}get shouldFetchDetail(){return!1}get leftCardsStyle(){return{}}getRouteName(e){return this.isAdminPage?"".concat(e,"Admin"):e}getRoutePath(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.getRouteName(e);return(0,_.getPath)({key:r,params:t,query:a})}getLinkRender(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=this.getRouteName(e);return(0,_.getLinkRender)({key:n,params:a,query:r,value:t})}init(){this.store={}}renderLeftCards(){var e;return(0,f.default)(e=this.leftCards).call(e,((e,t)=>{var{title:a,titleHelp:r,options:n,render:l,labelCol:i,contentCol:o,button:s,sourceData:u}=e;return l?l():m.default.createElement(v.default,{key:"card-left-".concat(t),className:"detail-left-card",data:u||this.detailData,title:a,titleHelp:r,options:n,loading:this.isLoading,labelCol:i,contentCol:o,button:s})}))}renderRightCards(){var e;return(0,f.default)(e=this.rightCards).call(e,((e,t)=>{var{title:a,options:r,labelCol:n,titleHelp:l,render:i,button:o,className:s}=e;if(i)return i();var u=8,d=16;return(0,h.default)(e,"labelCol")&&(d=24-(u=n)),m.default.createElement(v.default,{key:"card-right-".concat(t),className:(0,g.default)("detail-right-card",s),data:this.detailData,title:a,titleHelp:l,options:r,loading:this.isLoading,labelCol:u,contentCol:d,button:o})}))}renderModal(){return null}render(){return m.default.createElement("div",{className:(0,g.default)(S.default.main)},m.default.createElement("div",{className:S.default["left-side"],id:"detail-left-side",style:this.leftCardsStyle},this.renderLeftCards()),m.default.createElement("div",{className:S.default["right-side"],id:"detail-right-side"},this.renderRightCards()),this.renderModal())}}t.default=w},753457:(e,t,a)=>{(t=e.exports=a(840049)(!1)).push([e.id,".index__item--3lFuh {\n  margin-bottom: 10px;\n  background-color: #fff;\n}\n.index__item--3lFuh .ant-descriptions-item-label {\n  width: 100px;\n  color: #8a8a8a;\n}\n.index__item--3lFuh .ant-descriptions-item-content {\n  word-break: break-all;\n}\n",""]),t.locals={item:"index__item--3lFuh"}},759844:(e,a,r)=>{"use strict";var n=r(471742),l=r(633950),i=r(810732),o=r(548924);l(a,"__esModule",{value:!0}),a.default=a.ExtendVolume=void 0;var s=o(r(549849)),u=o(r(424836)),d=o(r(819989)),c=o(r(601839)),f=o(r(877879)),p=o(r(371573)),h=r(87067),m=r(860615),g=function(e,t){if("function"==typeof n)var a=new n,r=new n;return function(e,t){if(!t&&e&&e.__esModule)return e;var n,o,s={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return s;if(n=t?r:a){if(n.has(e))return n.get(e);n.set(e,s)}for(var u in e)"default"!==u&&{}.hasOwnProperty.call(e,u)&&((o=(n=l)&&i(e,u))&&(o.get||o.set)?n(s,u,o):s[u]=e[u]);return s}(e,t)}(r(342616)),v=o(r(452740)),y=r(505997),b=["type"];class _ extends m.ModalAction{constructor(){var e;super(...arguments),e=this,(0,f.default)(this,"onSizeChange",(e=>{var t=e-this.itemSize;(0,y.setCreateVolumeSize)(t)})),(0,f.default)(this,"checkInstance",(()=>{var{lockedError:e}=this.state;return e?u.default.reject(e):u.default.resolve()})),(0,f.default)(this,"onSubmit",function(){var t=(0,c.default)((function*(t){var{new_size:a}=t,{id:r}=e.item;return e.store.extendSize(r,{new_size:a})}));return function(e){return t.apply(this,arguments)}}())}get name(){return t("Extend volume")}init(){this.store=g.default,this.state.showNotice=!0,this.volumeStore=new g.VolumeStore,this.projectStore=v.default,(0,y.fetchQuota)(this,1,this.item.volume_type)}get tips(){return t("After the volume is expanded, the volume cannot be reduced.")}static get disableSubmit(){return(0,y.checkQuotaDisable)(!1)}static get showQuota(){return!0}get showQuota(){return!0}get quotaInfo(){var{quota:e={},quotaLoading:t}=this.state;if(t||(0,p.default)(e))return[];var[a,r,n,l]=(0,y.getQuotaInfo)(this,!1),{type:i}=r;return[(0,s.default)(r,b),l]}get isQuotaLimited(){var{gigabytes:{limit:e}={}}=this.projectStore.cinderQuota||{};return-1!==e}get leftSize(){var{gigabytes:{left:e=0}={}}=this.projectStore.cinderQuota||{};return e}get itemSize(){var{size:e}=this.item;return e}get minSize(){return this.itemSize+1}get maxSize(){var{size:e}=this.item;return e+this.leftSize}get defaultValue(){var e,t,{name:a,id:r,volume_type:n,size:l}=this.item;return{volume:(0,d.default)(e=(0,d.default)(t="".concat(a||r,"(")).call(t,n," | ")).call(e,l,"GiB)"),new_size:this.minSize}}get formItems(){var e;return[{name:"volume",label:t("Volume"),type:"label",iconType:"volume"},{name:"new_size",label:t("Capacity (GiB)"),type:"slider-input",max:this.maxSize,min:this.minSize,description:(0,d.default)(e="".concat(this.minSize,"GiB-")).call(e,this.maxSize,"GiB"),required:!0,display:this.isQuotaLimited,onChange:this.onSizeChange,validator:this.checkInstance},{name:"new_size",label:t("Capacity (GiB)"),type:"input-int",min:this.minSize,required:!0,display:!this.isQuotaLimited,onChange:this.onSizeChange,validator:this.checkInstance}]}}a.ExtendVolume=_,(0,f.default)(_,"id","extend-snapshot"),(0,f.default)(_,"title",t("Extend Volume")),(0,f.default)(_,"policy","volume:extend"),(0,f.default)(_,"allowed",(e=>u.default.resolve((0,y.isAvailableOrInUse)(e))));a.default=(0,h.inject)("rootStore")((0,h.observer)(_))},763020:(e,t,a)=>{var r=a(487268);"string"==typeof r&&(r=[[e.id,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(453027)(r,n);r.locals&&(e.exports=r.locals)},763455:(e,t,a)=>{var r=a(400663);"string"==typeof r&&(r=[[e.id,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(453027)(r,n);r.locals&&(e.exports=r.locals)},775988:(e,t,a)=>{(t=e.exports=a(840049)(!1)).push([e.id,".index__editor--3eLoM {\n  min-height: 60vh;\n  border-radius: 4px;\n}\n",""]),t.locals={editor:"index__editor--3eLoM"}},778392:(e,t,a)=>{var r=a(318032);"string"==typeof r&&(r=[[e.id,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(453027)(r,n);r.locals&&(e.exports=r.locals)},784009:(e,t,a)=>{var r=a(753457);"string"==typeof r&&(r=[[e.id,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(453027)(r,n);r.locals&&(e.exports=r.locals)},786299:(e,t,a)=>{var r=a(230707);"string"==typeof r&&(r=[[e.id,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(453027)(r,n);r.locals&&(e.exports=r.locals)},787172:(e,a,r)=>{"use strict";var n=r(818565),l=r(213696),i=r(303787),o=r(810732),s=r(532462),u=r(110819),d=r(722338),c=r(633950),f=r(548924);c(a,"__esModule",{value:!0}),a.default=a.Edit=void 0;var p=f(r(424836)),h=f(r(877879)),m=r(87067),g=r(860615),v=f(r(722625)),y=r(799571),b=r(583156),_=r(365468);function S(e,t){var a=n(e);if(l){var r=l(e);t&&(r=i(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}class x extends g.ModalAction{constructor(){super(...arguments),(0,h.default)(this,"onSubmit",(e=>{var{description:t,qos_policy_id:a}=e,r={description:t};return this.qosEndpoint&&(r.qos_policy_id=a&&a.selectedRowKeys.length?a.selectedRowKeys[0]:null),v.default.edit({id:this.item.id},r)}))}static get modalSize(){return(0,_.qosEndpoint)()?"large":"small"}getModalSize(){return(0,_.qosEndpoint)()?"large":"small"}get qosEndpoint(){return(0,_.qosEndpoint)()}init(){this.qosPolicyStore=new b.QoSPolicyStore}get defaultValue(){var{item:e}=this.props;return function(e){for(var t=1;t<arguments.length;t++){var a,r,n=null!=arguments[t]?arguments[t]:{};t%2?s(a=S(Object(n),!0)).call(a,(function(t){(0,h.default)(e,t,n[t])})):u?d(e,u(n)):s(r=S(Object(n))).call(r,(function(t){c(e,t,o(n,t))}))}return e}({description:this.item.description},this.qosEndpoint?{qos_policy_id:{selectedRowKeys:e.qos_policy_id?[e.qos_policy_id]:[],selectedRows:e.qos_policy_id?[{id:e.qos_policy_id,name:e.qos_policy_id}]:[]}}:{})}get instanceName(){return this.item.floating_ip_address}get formItems(){return[{name:"description",label:t("Description"),type:"textarea"},{name:"qos_policy_id",label:t("QoS Policy"),type:"tab-select-table",tabs:y.getQoSPolicyTabs.call(this),isMulti:!1,tip:t("Choosing a QoS policy can limit bandwidth and DSCP"),display:!!this.qosEndpoint}]}}a.Edit=x,(0,h.default)(x,"id","edit-floating-ip"),(0,h.default)(x,"policy","update_floatingip"),(0,h.default)(x,"allowed",(()=>p.default.resolve(!0)));a.default=(0,m.inject)("rootStore")((0,m.observer)(x))},788911:(e,t,a)=>{(t=e.exports=a(840049)(!1)).push([e.id,".index__wrapper--2C8q2 {\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  min-width: 450px;\n}\n",""]),t.locals={wrapper:"index__wrapper--2C8q2"}},799571:(e,a,r)=>{"use strict";var n=r(818565),l=r(213696),i=r(303787),o=r(810732),s=r(532462),u=r(110819),d=r(722338),c=r(633950),f=r(548924);c(a,"__esModule",{value:!0}),a.getQoSPolicyTabs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=w({backendPageStore:this.qosPolicyStore},e),r=[{title:t("Current Project QoS Policies"),key:"project",props:(0,b.default)({},a,w(w({},D({self:this})),{},{extraParams:{project_id:this.currentProjectId}}))},{title:t("Shared QoS Policies"),key:"shared",props:(0,b.default)({},a,w(w({},D({shared:!0,self:this})),{},{extraParams:{shared:!0}}))}];this.hasAdminRole&&r.push({title:t("All QoS Policies"),key:"all",props:(0,b.default)({},a,w(w({},D({all:!0,self:this})),{},{extraParams:{all_projects:!0}}))});return r},a.qosPolicySortProps=a.getQosPolicySelectTableProps=a.getQosPolicyFilters=a.getQosPolicyColumns=void 0;var p=f(r(819989)),h=f(r(89195)),m=f(r(608093)),g=f(r(877879));r(851011);var v=f(r(328153));r(710953);var y=f(r(430519)),b=f(r(775440)),_=f(r(823872)),S=(r(877800),r(153434));function x(e,t){var a=n(e);if(l){var r=l(e);t&&(r=i(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a,r,n=null!=arguments[t]?arguments[t]:{};t%2?s(a=x(Object(n),!0)).call(a,(function(t){(0,g.default)(e,t,n[t])})):u?d(e,u(n)):s(r=x(Object(n))).call(r,(function(t){c(e,t,o(n,t))}))}return e}var C=e=>{var a,r,n,l,i,o,s,u,d;return"egress"===e.direction?(0,p.default)(o=(0,p.default)(s=(0,p.default)(u=(0,p.default)(d="".concat(t("Egress"),": ")).call(d,t("Max BandWidth"),": ")).call(u,e.max_kbps/1024," Mbps; ")).call(s,t("Max Burst"),": ")).call(o,e.max_burst_kbps/1024," Mbps"):"ingress"===e.direction?(0,p.default)(a=(0,p.default)(r=(0,p.default)(n=(0,p.default)(l="".concat(t("Ingress"),": ")).call(l,t("Max BandWidth"),": ")).call(n,e.max_kbps/1024," Mbps; ")).call(r,t("Max Burst"),": ")).call(a,e.max_burst_kbps/1024," Mbps"):(0,p.default)(i="".concat(t("DSCP Marking"),": ")).call(i,e.dscp_mark)},k=e=>{var{self:a,all:r=!1}=e,n=[{title:t("ID/Name"),dataIndex:"name",routeName:a.getRouteName("networkQosDetail")},{title:t("Description"),dataIndex:"description",sorter:!1},{title:t("Rules Number"),dataIndex:"rulesNumber",render:(e,t)=>t.rules.length,isHideable:!0,sorter:!1},{title:t("Rules"),dataIndex:"rules",render:e=>e.length?_.default.createElement(v.default,null,(0,h.default)(e).call(e,(e=>_.default.createElement(y.default,{span:24,key:e.direction},C(e))))):"-",sorter:!1,stringify:e=>e.length?(0,h.default)(e).call(e,(e=>C(e))).join("\n"):"-"},{title:t("Shared"),dataIndex:"shared",valueRender:"yesNo",width:80,sorter:!1},{title:t("Default Policy"),dataIndex:"is_default",valueRender:"yesNo",isHideable:!0,width:100,sorter:!1},{title:t("Created At"),dataIndex:"created_at",valueRender:"toLocalTime",isHideable:!0,sorter:!1}];return r&&a.isAdminPage&&(0,m.default)(n).call(n,2,0,{title:t("Project ID/Name"),dataIndex:"project_name",sortKey:"project_id"}),n};a.getQosPolicyColumns=k;var I=e=>{var{self:a,shared:r=!1}=e,n=[{label:t("Name"),name:"name"},{label:t("Description"),name:"description"}];return r||n.push({label:t("Shared"),name:"shared",options:S.yesNoOptions}),a.hasAdminRole&&n.push({label:t("Project ID"),name:"tenant_id"}),n};a.getQosPolicyFilters=I;var P=a.qosPolicySortProps={isSortByBack:!0,defaultSortKey:"name",defaultSortOrder:"descend"},D=e=>{var{self:t,all:a,shared:r}=e;return w(w({},P),{},{columns:k({self:t,all:a}),filterParams:I({self:t,shared:r})})};a.getQosPolicySelectTableProps=D},803192:(e,t,a)=>{(t=e.exports=a(840049)(!1)).push([e.id,"/* init */\n/* specific color */\n/*  border */\n/*  input */\n/*  background */\n/* button */\n/*  shadow */\n/*  font */\n/*  animation */\n/*  size */\n/*  sider */\n.keypair__layout-header-menu-search-border--2mKZP {\n  border: none;\n}\n.keypair__vertical-center--38ZDl {\n  position: absolute;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n          transform: translateY(-50%);\n}\n/* login */\n.keypair__action-wrapper---KO5u {\n  margin-left: 8px;\n}\n.keypair__action-wrapper---KO5u .ant-btn-link {\n  padding: 5.6px 15px !important;\n  border-color: #a33e3e;\n}\n",""]),t.locals={primaryColor:"#a33e3e",normalColor:"rgba(34, 117, 74, 0.78)",successColor:"#57e39b",warnColor:"#fedf40",warnDarkColor:"#fa8c16",warnLightColor:"#f6b23d",errorColor:"#eb354d",dangerColor:"#c4233e",moneyColor:"#f50",infoColor:"rgba(0, 104, 255, 0.65)",headerHeight:"50px",productsColumnWidth:"220px","layout-header-menu-search-border":"keypair__layout-header-menu-search-border--2mKZP","vertical-center":"keypair__vertical-center--38ZDl","action-wrapper":"keypair__action-wrapper---KO5u"}},806433:(e,a,r)=>{"use strict";r(633950)(a,"__esModule",{value:!0}),a.serviceStatus=a.serviceState=a.getNeutronAgentServiceStatus=a.getNeutronAgentServiceState=void 0;var n=a.serviceStatus={enabled:t("Enabled"),disabled:t("Disabled")},l=a.serviceState={up:t("Up"),down:t("Down")};a.getNeutronAgentServiceState=e=>e?l.up:l.down;a.getNeutronAgentServiceStatus=e=>e?n.enabled:n.disabled},829290:(e,a,r)=>{"use strict";var n=r(633950),l=r(548924);n(a,"__esModule",{value:!0}),a.default=a.EditAction=void 0;var i=l(r(424836)),o=l(r(877879)),s=r(87067),u=r(860615),d=l(r(342616)),c=r(505997);class f extends u.ModalAction{constructor(){super(...arguments),(0,o.default)(this,"onSubmit",(e=>{var{id:t}=this.item;return this.store.update(t,e)}))}get defaultValue(){var{name:e,description:t}=this.item;return{name:e,description:t}}get formItems(){return[{name:"name",label:t("Name"),type:"input-name",placeholder:t("Please input name"),required:!0},{name:"description",label:t("Description"),type:"textarea"}]}init(){this.store=d.default}}a.EditAction=f,(0,o.default)(f,"id","edit"),(0,o.default)(f,"title",t("Edit")),(0,o.default)(f,"policy","volume:update"),(0,o.default)(f,"allowed",(e=>i.default.resolve((0,c.isAvailableOrInUse)(e))));a.default=(0,s.inject)("rootStore")((0,s.observer)(f))},834701:(e,a,r)=>{"use strict";var n=r(818565),l=r(213696),i=r(303787),o=r(810732),s=r(532462),u=r(110819),d=r(722338),c=r(633950),f=r(548924);c(a,"__esModule",{value:!0}),a.createTip=a.checkQuotaDisable=a.backupStatus=a.backupModeList=void 0,a.fetchQuota=function(e){return _.apply(this,arguments)},a.restoreTip=a.modeTip=a.getQuotaInfo=a.getQuota=a.getAdd=void 0;var p=f(r(877879)),h=f(r(601839)),m=f(r(823872)),g=f(r(452740)),v=f(r(434216));function y(e,t){var a=n(e);if(l){var r=l(e);t&&(r=i(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a,r,n=null!=arguments[t]?arguments[t]:{};t%2?s(a=y(Object(n),!0)).call(a,(function(t){(0,p.default)(e,t,n[t])})):u?d(e,u(n)):s(r=y(Object(n))).call(r,(function(t){c(e,t,o(n,t))}))}return e}a.backupStatus={available:t("Available"),error:t("Error"),updating:t("Updating"),deleting:t("Deleting"),error_deleting:t("Error Deleting"),restoring:t("Restoring"),creating:t("Creating")},a.createTip=m.default.createElement("span",null,m.default.createElement("span",{style:{fontWeight:600}},t("When you do online backup of the volume that has been bound, you need to pay attention to the following points:")),m.default.createElement("p",null,t("1. The backup can only capture the data that has been written to the volume at the beginning of the backup task, excluding the data in the cache at that time.")),m.default.createElement("p",null,t("2. To ensure the integrity of the data, it is recommended that you suspend the write operation of all files when creating a backup."))),a.backupModeList=[{value:!1,label:t("Full Backup")},{value:!0,label:t("Increment Backup")}],a.modeTip=t("Create a full backup, the system will automatically create a new backup chain, the full backup name is the backup chain name; Create an incremental backup, the system will automatically create an incremental backup under the newly created backup chain."),a.restoreTip=m.default.createElement("span",null,m.default.createElement("span",{style:{fontWeight:600}},t("When you restore a backup, you need to meet one of the following conditions:")),m.default.createElement("p",null,t("1. The volume associated with the backup is available.")),m.default.createElement("p",null,t("2. The volume associated with the backup has been mounted, and the instance is shut down.")));function _(){return(_=(0,h.default)((function*(e){e.setState({quota:{},quotaLoading:!0});var t=yield g.default.fetchProjectCinderQuota();e.setState({quota:t,quotaLoading:!1})}))).apply(this,arguments)}var S=e=>{var{backups:t={},backup_gigabytes:a={}}=e||{};return{backups:t,gigabytes:a}};a.getQuota=S;var x=e=>{var{backups:t,gigabytes:a}=S(e),{left:r=0}=t||{},{left:n=0,limit:l}=a||{},{currentVolumeSize:i=0}=v.default,o=0!==r&&(0!==n&&(-1===l||n>=i))?1:0;return{add:o,addSize:1===o?i:0}};a.getAdd=x;a.getQuotaInfo=e=>{var{quota:a={},quotaLoading:r}=e.state;if(r)return[];var{backups:n={},gigabytes:l={}}=S(a),{add:i,addSize:o}=x(a);return[b(b({},n),{},{add:i,name:"backup",title:t("Volume Backup")}),b(b({},l),{},{add:o,name:"gigabytes",title:t("Volume Backup Capacity (GiB)"),type:"line"})]};a.checkQuotaDisable=()=>{var{cinderQuota:e={}}=g.default,{add:t}=x(e);return 0===t}},842369:(e,a,r)=>{"use strict";var n=r(633950),l=r(548924);n(a,"__esModule",{value:!0}),a.default=a.AcceptVolumeTransfer=void 0;var i=l(r(424836)),o=l(r(877879)),s=r(87067),u=r(860615),d=l(r(342616));class c extends u.ModalAction{constructor(){super(...arguments),(0,o.default)(this,"onSubmit",(e=>{var{transfer_id:t,auth_key:a}=e;return d.default.acceptVolumeTransfer(t,{auth_key:a})}))}get name(){return t("Accept Volume Transfer")}get defaultValue(){return{}}get messageHasItemName(){return!1}get formItems(){return[{name:"transfer_id",label:t("Transfer ID"),type:"input",placeholder:t("Please input transfer id"),required:!0},{name:"auth_key",label:t("Auth Key"),type:"input",placeholder:t("Please input auth key"),required:!0}]}}a.AcceptVolumeTransfer=c,(0,o.default)(c,"id","accept-volume-transfer"),(0,o.default)(c,"title",t("Accept Volume Transfer")),(0,o.default)(c,"policy",(()=>"volume:accept_transfer")),(0,o.default)(c,"allowed",(()=>i.default.resolve(!0)));a.default=(0,s.inject)("rootStore")((0,s.observer)(c))},846964:(e,a,r)=>{"use strict";var n=r(818565),l=r(213696),i=r(303787),o=r(810732),s=r(532462),u=r(110819),d=r(722338),c=r(633950),f=r(548924);c(a,"__esModule",{value:!0}),a.getPortColumns=a.bindingTypes=void 0,a.getPortFormItem=function(){var e,a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],{portFixedIPs:r,fixedIpLoading:n}=this.state,l=[{label:t("Name"),name:"name"},{label:t("Fixed IP"),name:"fixed_ips",filterFunc:(e,t)=>{var a;return(0,v.default)(a=e||[]).call(a,(e=>{var a;return(0,y.default)(a=e.ip_address).call(a,t)}))}}];a&&l.push({label:t("Bind Resource Name"),name:"server_name"},{label:t("Status"),name:"status",options:(0,b.default)(e=(0,w.getOptions)(D)).call(e,(e=>{var t;return(0,y.default)(t=["ACTIVE","DOWN"]).call(t,e.key)}))});var i=[{title:t("ID/Name"),dataIndex:"name",routeName:this.getRouteName("portDetail")},{title:t("Description"),dataIndex:"description"},{title:t("Fixed IPs"),dataIndex:"fixed_ips",render:e=>S.default.createElement(S.default.Fragment,null,(0,h.default)(e).call(e,((e,t)=>S.default.createElement("div",{key:"ip_address_".concat(t)},e.ip_address))))},{title:t("Created At"),dataIndex:"created_at",valueRender:"sinceTime"}];if(a){var o=[{title:t("Status"),dataIndex:"status",valueMap:D},{title:t("Bind Resource"),dataIndex:"server_name",render:(e,t)=>{var{device_id:a}=t;if(!a)return"-";var r=this.getLinkRender("instanceDetail",a,{id:a},{tab:"interface"});return S.default.createElement(S.default.Fragment,null,r,S.default.createElement("br",null),e||"-")}}];(0,_.default)(i).call(i,4,0,...o)}return[{name:"virtual_adapter",label:t("Virtual Adapter"),type:"select-table",required:!0,rowKey:"id",data:this.portStore.list.data||[],isLoading:this.portStore.list.isLoading,disabledFunc:this.portsDisableFunc,onChange:this.handlePortSelect,isMulti:!1,filterParams:l,columns:i},{name:"fixed_ip_address",label:t("Fixed IP"),type:"select-table",rowKey:"fixed_ip_address",required:!0,data:r,isLoading:n,isMulti:!1,filterParams:[{label:t("Ip Address"),name:"name"}],columns:[{title:t("Ip Address"),dataIndex:"name"},{title:t("Subnet ID"),dataIndex:"subnet_id"},{title:t("Reason"),dataIndex:"reason"}],disabledFunc:e=>!e.available}]},a.getPortsAndReasons=function(e,a){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,h.default)(e).call(e,(e=>{var n=!0,l="",i=e.fixed_ip_address;if(P(i))if(e["router:external"])l=t("Is external network port"),n=!1;else if(e.floatingIP){var o;l=(0,m.default)(o="".concat(t("Is associate to floating ip: ")," ")).call(o,e.floatingIP),n=!1}else(0,g.default)(a).call(a,(t=>t.subnet_id===e.subnet_id))<0&&(l="".concat(r?t("It is unreachable for this floating ip."):t("It is unreachable for all floating ips.")),n=!1);else l="".concat(t("It is IPv6 type.")),n=!1;return I(I({},e),{},{key:i,name:i,available:n,reason:l})}))},a.getPortsForPortFormItem=function(e){this.portStore.fetchList({device_owner:e,project_id:this.currentProjectId})},a.portStatus=a.portState=a.portSortProps=a.portFilters=a.portFilter=a.portColumns=a.instancePortOptions=void 0;var p=f(r(877879)),h=f(r(89195)),m=f(r(819989)),g=f(r(590187)),v=f(r(75613)),y=f(r(29672)),b=f(r(303787)),_=f(r(608093)),S=f(r(823872)),x=r(646197),w=r(83575),C=r(640293);function k(e,t){var a=n(e);if(l){var r=l(e);t&&(r=i(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a,r,n=null!=arguments[t]?arguments[t]:{};t%2?s(a=k(Object(n),!0)).call(a,(function(t){(0,p.default)(e,t,n[t])})):u?d(e,u(n)):s(r=k(Object(n))).call(r,(function(t){c(e,t,o(n,t))}))}return e}var{isIPv4:P}=x.ipValidate,D=a.portStatus={ACTIVE:t("Active"),BUILD:t("Build"),DOWN:t("Down"),ERROR:t("Error")};a.portState={UP:t("Up"),DOWN:t("Down")},a.bindingTypes={normal:t("Normal"),direct:t("Direct"),macvtap:t("MacVTap")},a.portSortProps={isSortByBack:!0,defaultSortKey:"status",defaultSortOrder:"descend"};a.portColumns=[C.idNameColumn,{title:t("Owned Network"),dataIndex:"network_name",isLink:!0,idKey:"network_id",sorter:!1},{title:t("IPv4 Address"),dataIndex:"ipv4",render:e=>(0,h.default)(e).call(e,(e=>S.default.createElement("div",{key:e},e))),sorter:!1},{title:t("IPv6 Address"),dataIndex:"ipv6",render:e=>(0,h.default)(e).call(e,(e=>S.default.createElement("div",{key:e},e))),sorter:!1},{title:t("Mac Address"),dataIndex:"mac_address",sorter:!1},{title:t("Status"),dataIndex:"status",valueMap:D,sorter:!1}],a.portFilters=[{label:t("Name"),name:"name"}];var T=e=>[{title:t("Port"),dataIndex:"id"},{title:t("Bind Resource"),dataIndex:"server_name",render:(t,a)=>{var{device_id:r,device_owner:n}=a;if(r&&"compute:nova"===n){var l,i=t?(0,m.default)(l="".concat(r," (")).call(l,t,")"):r,o=e.getLinkRender("instanceDetail",i,{id:a.device_id},{tab:"interface"});return S.default.createElement(S.default.Fragment,null,a.device_owner,S.default.createElement("br",null),o)}return S.default.createElement(S.default.Fragment,null,a.device_owner,a.device_owner&&S.default.createElement("br",null),a.device_id||"-")},isHideable:!0,sorter:!1},{title:t("Owned Network"),dataIndex:"network_id",routeName:e.getRouteName("networkDetail"),sorter:!1,render:t=>{var a=e.getLinkRender("networkDetail",t,{id:t});return S.default.createElement(S.default.Fragment,null,a)}},{title:t("Mac Address"),dataIndex:"mac_address",isHideable:!0},{title:t("Status"),dataIndex:"status",width:80,valueMap:D}];a.getPortColumns=T;var A=a.portFilter=[{label:t("Network"),name:"network_id"},{label:t("Status"),name:"status",options:(0,w.getOptions)(D)}];a.instancePortOptions=e=>({columns:T(e),filterParams:A})},867471:(e,t,a)=>{(t=e.exports=a(840049)(!1)).push([e.id,".index__table-action--1o0Rg {\n  margin-right: 5px;\n}\n.index__more-action-btn--oi5mL {\n  width: 100%;\n  text-align: center;\n}\n.index__table-batch-menu--39tMs .ant-dropdown-menu-item {\n  padding-right: 0;\n  padding-left: 0;\n}\n",""]),t.locals={"table-action":"index__table-action--1o0Rg","more-action-btn":"index__more-action-btn--oi5mL","table-batch-menu":"index__table-batch-menu--39tMs"}},870792:(e,t,a)=>{var r=a(196768);"string"==typeof r&&(r=[[e.id,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(453027)(r,n);r.locals&&(e.exports=r.locals)},871948:(e,a,r)=>{"use strict";var n=r(818565),l=r(213696),i=r(303787),o=r(810732),s=r(532462),u=r(110819),d=r(722338),c=r(633950),f=r(471742),p=r(548924);c(a,"__esModule",{value:!0}),a.default=a.Associate=void 0;var h=p(r(424836)),m=p(r(994687)),g=p(r(89195)),v=p(r(601839)),y=p(r(877879)),b=p(r(414407)),_=p(r(756612)),S=p(r(823872)),x=r(87067),w=r(860615),C=E(r(899196)),k=E(r(208407)),I=p(r(84036)),P=r(449630),D=p(r(722625)),T=r(194141),A=r(492325),R=r(846964),F=r(522376);function E(e,t){if("function"==typeof f)var a=new f,r=new f;return(E=function(e,t){if(!t&&e&&e.__esModule)return e;var n,l,i={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return i;if(n=t?r:a){if(n.has(e))return n.get(e);n.set(e,i)}for(var s in e)"default"!==s&&{}.hasOwnProperty.call(e,s)&&((l=(n=c)&&o(e,s))&&(l.get||l.set)?n(i,s,l):i[s]=e[s]);return i})(e,t)}function N(e,t){var a=n(e);if(l){var r=l(e);t&&(r=i(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function M(e){for(var t=1;t<arguments.length;t++){var a,r,n=null!=arguments[t]?arguments[t]:{};t%2?s(a=N(Object(n),!0)).call(a,(function(t){(0,y.default)(e,t,n[t])})):u?d(e,u(n)):s(r=N(Object(n))).call(r,(function(t){c(e,t,o(n,t))}))}return e}class j extends w.ModalAction{constructor(){var e;super(...arguments),e=this,(0,y.default)(this,"routersDisableFunc",(e=>{var{floating_network_id:t}=this.item;return!(e.hasExternalGateway&&e.external_gateway_info&&e.external_gateway_info.network_id===t&&0===e.external_gateway_info.external_fixed_ips.length)})),(0,y.default)(this,"portsDisableFunc",(e=>0===e.fixed_ips.length)),(0,y.default)(this,"onValuesChange",(e=>{if((0,_.default)(e,"resourceType")){var{resourceType:t}=e;this.setState({resourceType:t})}})),(0,y.default)(this,"handleInstanceSelect",function(){var t=(0,v.default)((function*(t){if(e.setState({instanceLoading:!0}),0===t.selectedRows.length)return e.setState({instanceFixedIPs:i,instanceLoading:!1}),h.default.resolve().then((()=>{e.formRef.current.setFieldsValue({port:null})}));var{id:a}=t.selectedRows[0],r=yield C.default.fetchInterfaceList({id:a}),n=yield(0,F.getInterfaceWithReason)(r),{canReachSubnetIdsWithRouterId:l}=e.state,i=(0,R.getPortsAndReasons)(n,l,!0);return e.setState({instanceFixedIPs:i,instanceLoading:!1}),h.default.resolve().then((()=>{e.formRef.current.setFieldsValue({port:null})}))}));return function(e){return t.apply(this,arguments)}}()),(0,y.default)(this,"handlePortSelect",function(){var t=(0,v.default)((function*(t){e.setState({fixedIpLoading:!0});var{canReachSubnetIdsWithRouterId:a}=e.state,r=yield(0,F.getInterfaceWithReason)(t.selectedRows),n=(0,R.getPortsAndReasons)(r,a,!0);return e.setState({portFixedIPs:n,fixedIpLoading:!1}),h.default.resolve().then((()=>{e.formRef.current.setFieldsValue({fixed_ip_address:null})}))}));return function(e){return t.apply(this,arguments)}}()),(0,y.default)(this,"onSubmit",(e=>{var{resourceType:t}=e,{id:a}=this.item,r={};if(r.id=a,"instance"===t){var{port:{selectedRows:n=[]}={}}=e;r.port_id=n[0].port_id,r.fixed_ip_address=n[0].fixed_ip_address}else if("port"===t){var{virtual_adapter:{selectedRows:l=[]}={},fixed_ip_address:{selectedRows:i=[]}={}}=e;r.port_id=l[0].id,r.fixed_ip_address=i[0].fixed_ip_address}else if("router"===t){var{router:o}=e,s=o.selectedRows[0];return k.default.associateFip({id:s.id,fip:this.item,router:s})}return D.default.associateFip(r)}))}get name(){return t("Associate Floating IP")}init(){this.store=new C.ServerStore,this.routersStore=new k.RouterStore,this.portStore=new T.PortStore,P.getCanReachSubnetIdsWithRouterIdInComponent.call(this,(e=>{var{item:t}=this;return e.external_gateway_info&&e.external_gateway_info.network_id===t.floating_network_id})),this.state={instanceFixedIPs:[],portFixedIPs:[],canReachSubnetIdsWithRouterId:[],routerIdWithExternalNetworkInfo:[]},this.getPorts()}get instanceName(){return this.item.floating_ip_address||(0,m.default)(this).name}static get modalSize(){return"large"}getModalSize(){return"large"}get instances(){return this.store.list.data||[]}get resourceTypeMap(){return[{value:"instance",label:t("Instance")},{value:"port",label:t("Virtual Adapter")}]}get defaultValue(){var{floating_ip_address:e}=this.item;return{floatingIp:e,resourceType:"instance"}}get portDeviceOwner(){return[""]}getPorts(){R.getPortsForPortFormItem.call(this,this.portDeviceOwner)}get formItems(){var{resourceType:e="instance",instanceFixedIPs:a,instanceLoading:r}=this.state,n=[{name:"floatingIp",label:t("Floating Ip"),type:"label",iconType:"floatingIp"},{name:"resourceType",label:t("Resource Type"),type:"radio",required:!0,options:this.resourceTypeMap}];switch(e){case"instance":n.push(M({name:"instance",label:t("Instance"),type:"select-table",required:!0,backendPageStore:this.store,extraParams:{noReminder:!0},disabledFunc:e=>0===e.fixed_addresses.length,onChange:this.handleInstanceSelect,isMulti:!1},A.instanceSelectTablePropsBackend),{name:"port",label:t("Instance IP"),type:"select-table",required:!0,data:a,isLoading:r,isMulti:!1,filterParams:[{label:t("Ip Address"),name:"name"}],columns:[{title:t("Ip Address"),dataIndex:"name"},{title:t("Mac Address"),dataIndex:"mac_address"},{title:t("Network"),dataIndex:"network_name"},{title:t("Reason"),dataIndex:"reason"}],disabledFunc:e=>!e.available});break;case"lb":n.push({name:"loadbalance",label:t("Load Balancer"),type:"select-table",required:!0,data:[],isMulti:!1,filterParams:[{label:t("Name"),name:"name"},{label:t("IP"),name:"private_ip"}],columns:[{title:t("Name"),dataIndex:"name"},{title:t("Image"),dataIndex:"image",render:e=>S.default.createElement(I.default,{type:e,title:e})},{title:t("Fixed IP"),dataIndex:"fixed_addresses",render:e=>(0,g.default)(e).call(e,(e=>S.default.createElement("span",{key:e},e,S.default.createElement("br",null))))},{title:t("Floating IP"),dataIndex:"floating_addresses",render:e=>e?(0,g.default)(e).call(e,(e=>S.default.createElement("span",{key:e},e,S.default.createElement("br",null)))):"-"},{title:t("Flavor"),dataIndex:"flavor"},{title:t("Created At"),dataIndex:"created",valueRender:"sinceTime"}]});break;case"router":n.push(M({name:"router",label:t("Router"),type:"select-table",required:!0,backendPageStore:this.routersStore,disabledFunc:this.routersDisableFunc,isMulti:!1},(0,P.getRouterSelectTablePropsBackend)(this)));break;case"port":n.push(...R.getPortFormItem.call(this,!1))}return n}}a.Associate=j,(0,y.default)(j,"id","associate"),(0,y.default)(j,"title",t("Associate")),(0,y.default)(j,"policy","update_floatingip"),(0,y.default)(j,"allowed",(e=>h.default.resolve(!(0,F.disableFIPAssociate)(e)&&(0,b.default)(e.fixed_ip_address)&&"DOWN"===e.status&&(0,b.default)(e.port_details))));a.default=(0,x.inject)("rootStore")((0,x.observer)(j))},872798:(e,a,r)=>{"use strict";var n=r(633950),l=r(548924);n(a,"__esModule",{value:!0}),a.default=a.ManageSecurityGroup=void 0;var i=l(r(424836)),o=l(r(89195)),s=l(r(601839)),u=l(r(877879)),d=l(r(468224)),c=r(87067),f=r(860615),p=l(r(595605)),h=r(591106),m=r(415065),g=r(127567);class v extends f.ModalAction{constructor(){super(...arguments),(0,u.default)(this,"onSubmit",(e=>{var{securityGroup:{selectedRowKeys:t=[]}={},port_security_enabled:a}=e,{id:r}=this.item,n={port:{security_groups:a?t:[],port_security_enabled:a}};return this.securityGroupStore.updatePortSecurityGroup({id:r,reqBody:n})}))}get name(){return t("Manage Security Group")}init(){this.securityGroupStore=new h.SecurityGroupStore,this.currentSecurityGroups=[],this.state.sgInitValue={selectedRowKeys:[],selectedRows:[]},this.detail=null,this.getPortDetail()}static get modalSize(){return"large"}getModalSize(){return"large"}get defaultValue(){var{sgInitValue:e}=this.state,{selectedRowKeys:t=[]}=e||{};return t.length?{port_security_enabled:this.item.port_security_enabled,securityGroup:e}:{}}getPortDetail(){var e=this;return(0,s.default)((function*(){var{id:t,security_groups:a,port_security_enabled:r}=e.item,n=a;a||(n=(yield p.default.fetchDetail({id:t})).security_groups);var l=yield i.default.all((0,o.default)(n).call(n,(t=>e.securityGroupStore.fetchDetail({id:t})))),s={selectedRowKeys:(0,o.default)(n).call(n,(e=>(0,g.toJS)(e))),selectedRows:(0,o.default)(l).call(l,(e=>(0,g.toJS)(e)))};e.setState({sgInitValue:s,port_security_enabled:r}),e.updateFormValue("securityGroup",s),e.updateFormValue("port_security_enabled",r)}))()}get messageHasItemName(){var{item:e}=this.props;return!!e&&e.name}get formItems(){var{sgInitValue:e,port_security_enabled:a}=this.state;return[{name:"port_security_enabled",label:t("Port Security"),type:"switch",onChange:e=>{this.setState({port_security_enabled:e})},required:!0},{name:"securityGroup",label:t("Security Group"),type:"select-table",tips:t("The security group is similar to the firewall function for setting up network access control, or you can go to the console and create a new security group. (Note: The security group you selected will work on all virtual LANs on the instances.)"),backendPageStore:this.securityGroupStore,extraParams:{project_id:this.currentProjectId},initValue:e,isMulti:!0,filterParams:m.securityGroupFilter,columns:m.securityGroupColumns,hidden:!a}]}}a.ManageSecurityGroup=v,(0,u.default)(v,"id","manage-security-group"),(0,u.default)(v,"title",t("Manage Security Group")),(0,u.default)(v,"policy","update_port:port_security_enabled"),(0,u.default)(v,"allowed",(e=>i.default.resolve(0===(0,d.default)(e,"origin_data.allowed_address_pairs",[]).length)));a.default=(0,c.inject)("rootStore")((0,c.observer)(v))},892583:(e,a,r)=>{"use strict";var n=r(818565),l=r(213696),i=r(303787),o=r(810732),s=r(532462),u=r(110819),d=r(722338),c=r(633950),f=r(548924);c(a,"__esModule",{value:!0}),a.default=a.CreateKeypair=void 0;var p=f(r(424836)),h=f(r(601839)),m=f(r(877879)),g=r(87067),v=r(860615),y=f(r(165304)),b=f(r(452740)),_=f(r(338233));function S(e,t){var a=n(e);if(l){var r=l(e);t&&(r=i(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a,r,n=null!=arguments[t]?arguments[t]:{};t%2?s(a=S(Object(n),!0)).call(a,(function(t){(0,m.default)(e,t,n[t])})):u?d(e,u(n)):s(r=S(Object(n))).call(r,(function(t){c(e,t,o(n,t))}))}return e}var w=()=>{var{total:e=0,data:t=[]}=y.default.list||{};return e||t.length},C=e=>{var{limit:t=0}=e||{};return-1===t||t>w()?1:0};class k extends v.ModalAction{constructor(){super(...arguments),(0,m.default)(this,"onSubmit",(e=>{var{name:t,public_key:a}=e,r={name:t,public_key:a,type:"ssh"};return y.default.create(r).then((e=>{if(!a){var{keypair:{private_key:r}}=e,n="".concat(t,".pem"),l=new Blob([r],{type:"text/plain;charset=utf-8"});_.default.saveAs(l,n)}}))}))}get name(){return t("Create Keypair")}init(){this.state.quota={},this.state.quotaLoading=!0,this.projectStore=b.default,this.getQuota()}get tips(){return t("Quota of key pair means: the number of allowed key pairs for each user.")}static get disableSubmit(){var{novaQuota:{key_pairs:e={}}}=b.default;return 0===C(e)}static get showQuota(){return!0}get showQuota(){return!0}getQuota(){var e=this;return(0,h.default)((function*(){e.setState({quotaLoading:!0});var t=yield e.projectStore.fetchProjectNovaQuota(),{key_pairs:a={}}=t||{};e.setState({quota:a,quotaLoading:!1})}))()}get quotaInfo(){var{quota:e={},quotaLoading:a}=this.state;if(a)return[];var r=C(e),n=w();return[x(x({},e),{},{add:r,used:n,name:"key_pair",title:t("Key Pair")})]}get defaultValue(){return{type:"create"}}get createTypeList(){return[{value:"create",label:t("Create Keypair")},{value:"import",label:t("Import Keypair")}]}get formItems(){var{type:e}=this.state,a="create"===e;return[{name:"type",label:t("Create Type"),type:"radio",options:this.createTypeList},{name:"name",label:t("Name"),type:"input-name",required:!0,isKeypair:!0},{name:"public_key",label:t("Public Key"),type:"textarea-from-file",hidden:a,required:!a}]}}a.CreateKeypair=k,(0,m.default)(k,"id","create-keypair"),(0,m.default)(k,"title",t("Create Keypair")),(0,m.default)(k,"policy","os_compute_api:os-keypairs:create"),(0,m.default)(k,"allowed",(()=>p.default.resolve(!0)));a.default=(0,g.inject)("rootStore")((0,g.observer)(k))},893976:(e,a,r)=>{"use strict";var n=r(633950),l=r(548924);n(a,"__esModule",{value:!0}),a.default=a.CreateBackup=void 0;var i=l(r(819989)),o=l(r(424836)),s=l(r(877879)),u=r(87067),d=r(860615),c=l(r(434216)),f=r(505997),p=r(834701);class h extends d.ModalAction{constructor(){super(...arguments),(0,s.default)(this,"onSubmit",(e=>{var{id:t}=this.item,{name:a,incremental:r}=e,n={name:a,incremental:r,volume_id:t,force:(0,f.isInUse)(this.item)};return this.store.create(n)}))}get name(){return t("Create volume backup")}get tips(){return p.createTip}get defaultValue(){var e,t,{name:a,id:r,volume_type:n,size:l}=this.item;return{volume:(0,i.default)(e=(0,i.default)(t="".concat(a||r,"(")).call(t,n," | ")).call(e,l,"GiB)"),incremental:!1}}get formItems(){return[{name:"volume",label:t("Volume"),type:"label",iconType:"volume"},{name:"name",label:t("Volume Backup Name"),type:"input-name",required:!0},{name:"incremental",label:t("Backup Mode"),type:"radio",options:p.backupModeList,tip:p.modeTip}]}init(){this.store=c.default,c.default.setCurrentVolume(this.item),(0,p.fetchQuota)(this)}static get disableSubmit(){return(0,p.checkQuotaDisable)()}static get showQuota(){return!0}get showQuota(){return!0}get quotaInfo(){return(0,p.getQuotaInfo)(this)}}a.CreateBackup=h,(0,s.default)(h,"id","create-backup"),(0,s.default)(h,"title",t("Create Volume Backup")),(0,s.default)(h,"buttonText",t("Create Backup")),(0,s.default)(h,"policy","backup:create"),(0,s.default)(h,"aliasPolicy","cinder:backup:create"),(0,s.default)(h,"allowed",(e=>o.default.resolve((0,f.isAvailableOrInUse)(e))));a.default=(0,u.inject)("rootStore")((0,u.observer)(h))},896273:(e,a,r)=>{"use strict";var n=r(471742),l=r(633950),i=r(810732),o=r(548924);l(a,"__esModule",{value:!0}),a.default=void 0;var s=o(r(303884)),u=function(e,t){if("function"==typeof n)var a=new n,r=new n;return function(e,t){if(!t&&e&&e.__esModule)return e;var n,o,s={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return s;if(n=t?r:a){if(n.has(e))return n.get(e);n.set(e,s)}for(var u in e)"default"!==u&&{}.hasOwnProperty.call(e,u)&&((o=(n=l)&&i(e,u))&&(o.get||o.set)?n(s,u,o):s[u]=e[u]);return s}(e,t)}(r(823872)),d=o(r(202999)),c=r(357026),f=r(113479);class p extends u.Component{getDetailUrl(e){var t=this.isAdminPage?"securityGroupDetailAdmin":"securityGroupDetail";return(0,f.getPath)({key:t,params:{id:e}})}render(){var{item:{security_group_rules:e=[]}={}}=this.props,a={buttonType:"link",title:t("Security Group Rules"),buttonText:t("View Rules"),modalSize:"middle",columns:(0,c.getSelfColumns)(this),data:e,hasPagination:!1};return u.default.createElement(d.default,(0,s.default)({},a,{style:{paddingLeft:0}}))}}a.default=p},914128:(e,a,r)=>{"use strict";var n=r(818565),l=r(213696),i=r(303787),o=r(810732),s=r(532462),u=r(110819),d=r(722338),c=r(633950),f=r(548924);c(a,"__esModule",{value:!0}),a.default=a.Edit=void 0;var p,h=f(r(549849)),m=f(r(877879)),g=f(r(89195)),v=f(r(424836)),y=r(87067),b=r(860615),_=f(r(595605)),S=["mac_address","more"];function x(e,t){var a=n(e);if(l){var r=l(e);t&&(r=i(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a,r,n=null!=arguments[t]?arguments[t]:{};t%2?s(a=x(Object(n),!0)).call(a,(function(t){(0,m.default)(e,t,n[t])})):u?d(e,u(n)):s(r=x(Object(n))).call(r,(function(t){c(e,t,o(n,t))}))}return e}var C=(0,g.default)(p="normal,macvtap,direct,baremetal,direct-physical,virtio-forwarder,smart-nic".split(",")).call(p,(e=>({label:e,value:e})));class k extends b.ModalAction{constructor(){super(...arguments),(0,m.default)(this,"onSubmit",(e=>{var{item:{id:t}={}}=this.props,{mac_address:{type:a,mac:r},more:n}=e,l=w({},(0,h.default)(e,S));return a&&"auto"!==a&&(l.mac_address=r),_.default.update({id:t},l)}))}get defaultValue(){var{item:e}=this.props;return w(w({},e),{},{mac_address:{type:"manual",mac:e.mac_address},"binding:vnic_type":e.binding_vnic_type})}get formItems(){var{more:e}=this.state;return[{name:"name",label:t("Name"),type:"input-name",required:!0,withoutChinese:!0},{name:"mac_address",label:t("Mac Address"),wrapperCol:{span:16},type:"mac-address",required:!0},{name:"binding:vnic_type",label:t("Port Type"),type:"select",required:!0,options:C,hidden:!e},{name:"description",label:t("Description"),type:"textarea"},{name:"more",label:t("Advanced Options"),type:"more"}]}}a.Edit=k,(0,m.default)(k,"id","edit-virtual-adapter"),(0,m.default)(k,"title",t("Edit")),(0,m.default)(k,"buttonText",t("Edit")),(0,m.default)(k,"policy","update_port"),(0,m.default)(k,"allowed",(()=>v.default.resolve(!0)));a.default=(0,y.inject)("rootStore")((0,y.observer)(k))},915147:(e,a,r)=>{"use strict";var n=r(633950),l=r(548924);n(a,"__esModule",{value:!0}),a.default=a.ModifyQoS=void 0;var i=l(r(424836)),o=l(r(601839)),s=l(r(877879)),u=l(r(823872)),d=r(87067),c=r(860615),f=r(583156),p=l(r(595605)),h=r(799571),m=r(365468);class g extends c.ModalAction{constructor(){super(...arguments),(0,s.default)(this,"onSubmit",(e=>{var{id:t}=this.item,{enableQosPolicy:a,qos_policy_id:r}=e,n={qos_policy_id:null};return a&&r&&(n.qos_policy_id=0===r.selectedRowKeys.length?null:r.selectedRowKeys[0]),p.default.update({id:t},n)}))}get name(){return t("Modify QoS")}get labelCol(){return{xs:{span:6},sm:{span:4}}}static get modalSize(){return"large"}getModalSize(){return"large"}init(){this.qosPolicyStore=new f.QoSPolicyStore,this.state={qosPolicy:{name:"",id:""}},this.item.qos_policy_id&&this.getQosPolicyItem()}getQosPolicyItem(){var e=this;return(0,o.default)((function*(){var t=yield e.qosPolicyStore.fetchDetail({id:e.item.qos_policy_id});e.setState({qosPolicy:t})}))()}get instanceName(){return this.item.name||this.item.id}get defaultValue(){var e=null!==this.item.qos_policy_id;return{enableQosPolicy:e,qos_policy_id:{selectedRowKeys:e?[this.item.qos_policy_id]:[],selectedRows:e?[{id:this.item.qos_policy_id,name:this.item.qos_policy_id}]:[]}}}get formItems(){var{enableQosPolicy:e=null!==this.item.qos_policy_id,qosPolicy:a}=this.state;return[{name:"enableQosPolicy",label:t("Enable QoS Policy"),type:"switch",onChange:e=>{this.setState({enableQosPolicy:e})}},{name:"name",label:t("Current QoS policy name"),type:"label",content:u.default.createElement("div",null,a.name||t("Not yet bound")),hidden:!e},{name:"qos_policy_id",label:t("QoS Policy"),type:"tab-select-table",tabs:h.getQoSPolicyTabs.call(this,{disabledFunc:e=>e.id===this.item.qos_policy_id}),isMulti:!1,required:!0,tip:t("Choosing a QoS policy can limit bandwidth and DSCP"),hidden:!e}]}}a.ModifyQoS=g,(0,s.default)(g,"id","modify_qos"),(0,s.default)(g,"title",t("Modify QoS")),(0,s.default)(g,"policy","update_port"),(0,s.default)(g,"allowed",(()=>i.default.resolve(!!(0,m.qosEndpoint)())));a.default=(0,d.inject)("rootStore")((0,d.observer)(g))},923653:(e,a,r)=>{"use strict";var n=r(471742),l=r(633950),i=r(810732),o=r(548924);l(a,"__esModule",{value:!0}),a.zunQuotaCard=a.troveQuotaCard=a.shareQuotaCard=a.quotaCardList=a.magnumQuotaCard=a.getVolumeTypeCards=a.default=a.QuotaOverview=void 0;var s=o(r(89195)),u=o(r(303787)),d=o(r(819989)),c=o(r(424836)),f=o(r(75613)),p=o(r(149409)),h=o(r(818565));r(184464);var m=o(r(600590)),g=o(r(601839));r(484665);var v=o(r(587751));r(487213);var y=o(r(331595));r(710953);var b=o(r(430519));r(324871);var _=o(r(614605));r(851011);var S=o(r(328153));r(615134);var x=o(r(707204)),w=o(r(877879));r(21184);var C=o(r(35934)),k=o(r(15191)),I=o(r(896363)),P=function(e,t){if("function"==typeof n)var a=new n,r=new n;return function(e,t){if(!t&&e&&e.__esModule)return e;var n,o,s={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return s;if(n=t?r:a){if(n.has(e))return n.get(e);n.set(e,s)}for(var u in e)"default"!==u&&{}.hasOwnProperty.call(e,u)&&((o=(n=l)&&i(e,u))&&(o.get||o.set)?n(s,u,o):s[u]=e[u]);return s}(e,t)}(r(823872)),D=(r(877800),r(384472),r(87067)),T=o(r(812941)),A=o(r(452740)),R=o(r(577186)),F=r(365468),E=o(r(786299));var N={normal:{color:globalCSS.normalColor,text:t("Normal")},danger:{color:globalCSS.warnDarkColor,text:t("Danger")},full:{color:globalCSS.errorColor,text:t("Full")}},M=P.default.createElement("span",null,t("Key Pairs"),P.default.createElement(C.default,{title:t("The number of allowed key pairs for each user.")},P.default.createElement(k.default,{style:{marginLeft:4}}))),j=(0,F.firewallEndpoint)()?[{text:t("Firewalls"),key:"firewall_group"},{text:t("Firewall Policies"),key:"firewall_policy"},{text:t("Firewall Rules"),key:"firewall_rule"}]:[],B=a.quotaCardList=[{text:t("Compute"),type:"compute",value:[{text:t("Instances"),key:"instances"},{text:t("vCPUs"),key:"cores"},{text:t("Memory (GiB)"),key:"ram"},{text:M,key:"key_pairs"},{text:t("Server Groups"),key:"server_groups"}]},{text:t("Storage"),type:"storage",value:[{text:t("Volumes"),key:"volumes"},{text:t("Volume Capacity (GiB)"),key:"gigabytes"},{text:t("Volume Snapshots"),key:"snapshots"},{text:t("Volume Backups"),key:"backups"},{text:t("Volume Backup Capacity (GiB)"),key:"backup_gigabytes"}]},{text:t("Network"),type:"networks",value:[{text:t("Routers"),key:"router"},{text:t("Networks"),key:"network"},{text:t("Subnets"),key:"subnet"},{text:t("Floating IPs"),key:"floatingip"},{text:t("Ports"),key:"port"},{text:t("Security Groups"),key:"security_group"},{text:t("Security Group Rules"),key:"security_group_rule"},...j]}],L=a.shareQuotaCard={text:t("Share"),type:"share",value:[{text:t("Shares"),key:"shares"},{text:t("Share Capacity (GiB)"),key:"share_gigabytes"},{text:t("Share Networks"),key:"share_networks"},{text:t("Share Groups"),key:"share_groups"}]},V=a.zunQuotaCard={text:t("Containers Management"),type:"zun",value:[{text:t("Containers"),key:"zun_containers"},{text:t("Containers CPU"),key:"zun_cpu"},{text:t("Containers Memory (MiB)"),key:"zun_memory"},{text:t("Containers Disk (GiB)"),key:"zun_disk"}]},O=a.magnumQuotaCard={text:t("Clusters Management"),type:"magnum",value:[{text:t("Clusters"),key:"magnum_cluster"}]},z=a.troveQuotaCard={text:t("Database"),type:"trove",value:[{text:t("Database Instance"),key:"trove_instances"},{text:t("Database Disk (GiB)"),key:"trove_volumes"}]},q=e=>{var a=(0,s.default)(e).call(e,((e,a)=>({index:a,value:[{text:t("{name} type",{name:e.name}),key:"volumes_".concat(e.name)},{text:t("{name} type capacity (GiB)",{name:e.name}),key:"gigabytes_".concat(e.name)},{text:t("{name} type snapshots",{name:e.name}),key:"snapshots_".concat(e.name)}]})));return{text:t("Storage Types"),type:"volumeTypes",value:a}};a.getVolumeTypeCards=q;class K extends P.Component{constructor(e){var a;super(e),a=this,(0,w.default)(this,"getFilteredValue",(e=>(0,u.default)(e).call(e,(e=>!e.hidden)))),(0,w.default)(this,"getItemInfo",((e,a)=>{var r=0;e[a.key]&&(0,I.default)(e[a.key].used)&&-1!==e[a.key].limit&&(r=e[a.key].used/e[a.key].limit*100);var n,l="-";e[a.key]&&(0,I.default)(e[a.key].used)&&(l=(0,d.default)(n="".concat(e[a.key].used," / ")).call(n,-1===e[a.key].limit?t("Unlimit"):e[a.key].limit));var i=r>=90&&N.full.color||r>=80&&N.danger.color||N.normal.color,o=P.default.createElement("span",null,a.text," : ",l),{server_group_members:s}=e;return"server_groups"===a.key&&s&&(o=P.default.createElement("span",null,o," (",t("Members of Each Group")," :",-1===s.limit?t("Unlimit"):s.limit,")")),P.default.createElement(P.default.Fragment,null,P.default.createElement("div",{className:E.default["progress-title"]},o),P.default.createElement(C.default,{title:o,placement:"top",getPopupContainer:e=>e.parentNode},P.default.createElement(x.default,{style:{marginTop:13,marginBottom:13},percent:r,showInfo:!1,strokeColor:i})))})),(0,w.default)(this,"renderQuotaCardList",(()=>{var e,{isLoading:t}=this.state;return P.default.createElement(S.default,{className:E.default.content},(0,s.default)(e=this.quotaCardList).call(e,(e=>P.default.createElement(b.default,{className:E.default.card,span:24,key:e.type},P.default.createElement(_.default,{title:e.text,bordered:!1,loading:t,size:"small"},P.default.createElement(S.default,{gutter:24},this.renderQuotaCardContent(e)))))),this.enableCinder?P.default.createElement(b.default,{className:E.default.card,span:24,key:this.volumeTypesQuota.type},P.default.createElement(_.default,{title:this.volumeTypesQuota.text,bordered:!1,loading:t,size:"small"},this.renderVolumeTypes())):null)})),(0,w.default)(this,"renderQuotaCard",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(0,s.default)(t).call(t,(t=>P.default.createElement(b.default,{key:t.text,span:12},a.getItemInfo(e,t))))})),(0,w.default)(this,"renderVolumeTypes",(()=>{var{isLoading:e}=this.state;return e?P.default.createElement(y.default,null):P.default.createElement(v.default,{itemLayout:"vertical",size:"large",pagination:{hideOnSinglePage:!0,pageSize:5,size:"small"},dataSource:this.volumeTypesQuota.value,renderItem:e=>{var t;return P.default.createElement(S.default,{key:e.index,gutter:[16]},(0,s.default)(t=e.value).call(t,(e=>P.default.createElement(b.default,{span:8,key:e.text},this.getItemInfo(this.projectStore.quota,e)))))}})})),this.state={isLoading:!0};var{projectStore:r,volumeTypeStore:n}=e;this.projectStore=r||A.default,this.volumeTypeStore=n||T.default}componentDidMount(){this.getData()}getData(){var e=this;return(0,g.default)((function*(){var{getData:t}=e.props;if(t)yield t();else{var{user:a}=e.props.rootStore,{project:{id:r=""}={}}=a,n=[e.projectStore.fetchProjectQuota({project_id:r,withKeyPair:!0})];e.enableCinder&&n.push(e.volumeTypeStore.fetchList()),yield c.default.all(n)}e.setState({isLoading:!1})}))()}get enableCinder(){return R.default.checkEndpoint("cinder")}get enableShare(){return R.default.checkEndpoint("manilav2")}get enableZun(){return R.default.checkEndpoint("zun")}get enableMagnum(){return R.default.checkEndpoint("magnum")}get enableTrove(){return R.default.checkEndpoint("trove")&&R.default.hasAdminOnlyRole}get volumeTypeData(){var{volumeTypeData:e}=this.props,t=e||this.volumeTypeStore.list.data||[];return(0,f.default)(t).call(t,(e=>{var t;return!(0,p.default)(t=e.name).call(t,"__")}))?(0,u.default)(t).call(t,(e=>{var t;return!(0,p.default)(t=e.name).call(t,"__")})):t}get volumeTypesQuota(){return q(this.volumeTypeData)}get quotaCardList(){var e=[...this.props.quotaCardList||B];return this.enableCinder||(e=(0,u.default)(e).call(e,(e=>"storage"!==e.type))),this.enableShare&&e.push(L),this.enableZun&&e.push(V),this.enableMagnum&&e.push(O),this.enableTrove&&e.push(z),e}get quotaAction(){return this.props.quotaAction}renderQuotaCardContent(e){var{isLoading:t}=this.state;return t?P.default.createElement(y.default,null):this.renderQuotaCard(this.projectStore.quota,this.getFilteredValue(e.value))}render(){var e,{isLoading:a}=this.state;return P.default.createElement(_.default,{className:E.default.bottom,bodyStyle:{padding:0},loading:a,headStyle:{paddingLeft:"20px"},title:P.default.createElement("div",{className:E.default.title},P.default.createElement("span",{className:E.default.text},t("Quota Overview")),(0,s.default)(e=(0,h.default)(N)).call(e,(e=>P.default.createElement("span",{key:e,className:E.default.badge},P.default.createElement(m.default,{color:N[e].color,text:N[e].text}))))),extra:this.quotaAction},this.renderQuotaCardList())}}a.QuotaOverview=K;a.default=(0,D.inject)("rootStore")((0,D.observer)(K))},936689:(e,a,r)=>{"use strict";r(633950)(a,"__esModule",{value:!0}),a.default=void 0;var n={"anti-affinity":t("Anti-Affinity"),affinity:t("Affinity"),"soft-anti-affinity":t("Soft-Anti-Affinity"),"soft-affinity":t("Soft-Affinity")};a.default=n},936694:(e,a,r)=>{"use strict";var n=r(818565),l=r(213696),i=r(303787),o=r(810732),s=r(532462),u=r(110819),d=r(722338),c=r(633950),f=r(548924);c(a,"__esModule",{value:!0}),a.default=a.FloatingIps=void 0;var p=f(r(29672)),h=f(r(532462)),m=f(r(818565)),g=f(r(89195)),v=f(r(303787)),y=f(r(427277)),b=f(r(46175));r(735038);var _=f(r(929636)),S=f(r(834666));r(484665);var x=f(r(587751)),w=f(r(601839)),C=f(r(549849)),k=f(r(877879)),I=f(r(371573)),P=f(r(823872)),D=r(87067),T=f(r(654017)),A=r(522376),R=r(722625),F=r(153434),E=(r(877800),r(384472),r(365468)),N=r(83575),M=f(r(387182)),j=["id"],B=["silent"],L=["key"];function V(e,t){var a=n(e);if(l){var r=l(e);t&&(r=i(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a,r,n=null!=arguments[t]?arguments[t]:{};t%2?s(a=V(Object(n),!0)).call(a,(function(t){(0,k.default)(e,t,n[t])})):u?d(e,u(n)):s(r=V(Object(n))).call(r,(function(t){c(e,t,o(n,t))}))}return e}class z extends T.default{constructor(){var e;super(...arguments),e=this,(0,k.default)(this,"updateFetchParams",(e=>{if(this.inQosDetail){var{id:t}=e;return O({qos_policy_id:t},(0,C.default)(e,j))}return e})),(0,k.default)(this,"fetchDataByPage",function(){var t=(0,w.default)((function*(t){yield e.store.fetchListWithResourceName(t),e.list.silent=!1}));return function(e){return t.apply(this,arguments)}}())}init(){this.store=new R.FloatingIpStore,this.downloadStore=new R.FloatingIpStore}get qosEndpoint(){return(0,E.qosEndpoint)()}get isFilterByBackend(){return!this.inQosDetail}get isSortByBackend(){return!this.inQosDetail}get defaultSortKey(){return"status"}get inQosDetail(){var e;return this.inDetailPage&&(0,p.default)(e=this.path).call(e,"qos")}get isRecycleBinDetail(){var e;return this.inDetailPage&&(0,p.default)(e=this.path).call(e,"recycle-bin")}get inInstanceDetail(){var e;return this.inDetailPage&&(0,p.default)(e=this.path).call(e,"instance")}getData(){var e=arguments,t=()=>super.getData,a=this;return(0,w.default)((function*(){var r=e.length>0&&void 0!==e[0]?e[0]:{},{silent:n}=r,l=(0,C.default)(r,B);if(a.inDetailPage&&!a.inQosDetail){var i;n&&(a.list.silent=!0);var{detail:{addresses:o=[]}={}}=a.props,s=[];(0,h.default)(i=(0,m.default)(o)).call(i,(e=>{var t,a;s.push(...(0,g.default)(t=(0,v.default)(a=o[e]).call(a,(e=>"fixed"===e["OS-EXT-IPS:type"]))).call(t,(e=>e.addr)))})),l.fixed_ip_address=s,l.all_projects=a.isAdminPage,s.length>0?yield a.store.fetchListWithResourceName(l):a.list.isLoading=!1}else t().call(a,O({silent:n},l))}))()}get fetchDataByCurrentProject(){return!0}get policy(){return"get_floatingip"}get name(){return t("floating ips")}get actionConfigs(){return this.isRecycleBinDetail?F.emptyActionConfig:this.inInstanceDetail?this.isAdminPage?M.default.instanceDetailAdminConfigs:M.default.instanceDetailConfigs:this.inQosDetail?this.isAdminPage?M.default.qosDetailAdminConfigs:M.default.qosDetailConfigs:this.isAdminPage?M.default.adminConfigs:M.default.actionConfigs}get transitionStatusList(){return A.transitionStatuses}get adminPageHasProjectFilter(){return!0}getRecordPortForwarding(e){var t;return(0,y.default)(t=e.port_forwardings||[]).call(t,((e,t)=>e.external_port-t.external_port))}getPortForwardingDetail(e,t){var{key:a}=t,r=(0,C.default)(t,L);if((0,I.default)(r))return"";var{floating_ip_address:n}=e;return(0,A.getPortForwardingName)(r,n)}get portForwardingResourcesName(){return t("Port Forwardings")}getPortForwardingRender(e){var a=this.getRecordPortForwarding(e),{length:r}=a;if(!r)return null;var n=0;r>10&&r%10&&(n=10-r%10);var l=(0,b.default)({length:n},(e=>({key:"zero-".concat(e)}))),i=[...(0,g.default)(a).call(a,(e=>O(O({},e),{},{key:e.external_port||e.external_port_range}))),...l],o=P.default.createElement(x.default,{itemLayout:"vertical",size:"small",pagination:{hideOnSinglePage:!0,pageSize:10,size:"small",showSizeChanger:!1},dataSource:i,renderItem:t=>P.default.createElement("div",{style:{height:"30px",lineHeight:"30px"}},this.getPortForwardingDetail(e,t))});return P.default.createElement(_.default,{content:o,title:this.portForwardingResourcesName,destroyTooltipOnHide:!0,placement:"right"},t("{number} {resource}",{number:a.length,resource:this.portForwardingResourcesName}),"",P.default.createElement(S.default,null))}getPortForwardingStringify(e){var a=this.getRecordPortForwarding(e);if(!a.length)return"";var r=(0,g.default)(a).call(a,(t=>this.getPortForwardingDetail(e,t)));return[t("{number} {resource}",{number:a.length,resource:this.portForwardingResourcesName}),...r].join("\n")}getResourceRender(e,t){return e&&"-"!==e?e:this.getPortForwardingRender(t)||"-"}geResourceStringify(e,t){return e&&"-"!==e?e:this.getPortForwardingStringify(t)||"-"}getColumns(){return[{title:t("ID/Floating IP"),dataIndex:"floating_ip_address",isLink:!0,routeName:this.getRouteName("fipDetail"),boldName:!0},{title:t("QoS Policy ID/Name"),dataIndex:"qos_policy_name",isLink:!0,routeName:this.getRouteName("networkQosDetail"),idKey:"qos_policy_id",hidden:!this.qosEndpoint||this.inQosDetail,sorter:!1},{title:t("Project ID/Name"),dataIndex:"project_name",hidden:!this.isAdminPage,sortKey:"project_id"},{title:t("Description"),dataIndex:"description",render:e=>e||"-",isHideable:!0,sorter:!1},{title:t("Associated Resource"),dataIndex:"resource_name",render:(e,t)=>this.getResourceRender(e,t),stringify:(e,t)=>this.geResourceStringify(e,t),isHideable:!0,sorter:!1},{title:t("Status"),dataIndex:"status",valueMap:A.floatingIpStatus},{title:t("Created At"),dataIndex:"created_at",valueRender:"toLocalTime",isHideable:!0,sorter:!1}]}get searchFilters(){return[{label:t("ID"),name:"id"},{label:t("Floating IP"),name:"floating_ip_address"},{label:t("Status"),name:"status",options:(0,N.getOptions)(A.floatingIpStatus)}]}}a.FloatingIps=z;a.default=(0,D.inject)("rootStore")((0,D.observer)(z))},937267:(e,a,r)=>{"use strict";var n=r(818565),l=r(213696),i=r(303787),o=r(810732),s=r(532462),u=r(110819),d=r(722338),c=r(633950),f=r(548924);c(a,"__esModule",{value:!0}),a.default=a.Create=void 0;var p=f(r(68982)),h=f(r(424836)),m=f(r(113635)),g=f(r(89195)),v=f(r(648188)),y=f(r(819989)),b=f(r(994687)),_=f(r(532462)),S=f(r(303787)),x=f(r(75613)),w=f(r(149409));r(81199);var C=f(r(318885)),k=f(r(303884));r(698368);var I=f(r(806174)),P=f(r(601839)),D=f(r(877879)),T=f(r(823872)),A=r(87067),R=f(r(242603)),F=r(211110),E=r(505997),N=f(r(48474)),M=f(r(341832)),j=f(r(342616)),B=f(r(812941)),L=f(r(452740)),V=f(r(434216)),O=(r(877800),r(127567)),z=r(860615),q=f(r(38256)),K=r(593651),G=r(536356),U=r(83575),Q=f(r(763020));function H(e,t){var a=n(e);if(l){var r=l(e);t&&(r=i(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function W(e){for(var t=1;t<arguments.length;t++){var a,r,n=null!=arguments[t]?arguments[t]:{};t%2?s(a=H(Object(n),!0)).call(a,(function(t){(0,D.default)(e,t,n[t])})):u?d(e,u(n)):s(r=H(Object(n))).call(r,(function(t){c(e,t,o(n,t))}))}return e}class J extends z.FormAction{constructor(){var e;super(...arguments),e=this,(0,D.default)(this,"onImageTabChange",(e=>{this.setState({imageTab:e})})),(0,D.default)(this,"onConfirmCancel",(()=>{var{initVolumeType:e}=this.state,{selectedRows:t,selectedRowKeys:a,snapshotId:r}=e,n={selectedRows:t,selectedRowKeys:a,snapshotId:"".concat(r,"-1")};this.setState({initVolumeType:n})})),(0,D.default)(this,"onVolumeTypeChange",(e=>{var{selectedRows:a=[]}=e;if(0===a.length)return(0,E.setCreateVolumeType)(""),void this.setState({multiattach:!1});var{id:r,extra_specs:{multiattach:n="False"}={},name:l}=a[0];if((0,E.setCreateVolumeType)(l),this.sourceTypeIsSnapshot){var{initVolumeType:{selectedRowKeys:i=[]},confirmCount:o=0}=this.state;r!==i[0]&&o<1&&(R.default.warn({title:t("Note: Are you sure you need to modify the volume type?"),content:E.snapshotTypeTip,onCancel:this.onConfirmCancel}),this.setState({confirmCount:1}))}this.setState({multiattach:"<is> True"===n})})),(0,D.default)(this,"onSnapshotChange",function(){var t=(0,P.default)((function*(t){var{selectedRows:a=[]}=t||{},r="",n=null;if(a.length){var l,{origin_data:{volume_type_id:i}={},id:o}=a[0]||{};if(i)r=i,n=(0,p.default)(l=e.volumeTypes).call(l,(e=>e.id===r));else try{var s,u=yield e.snapshotStore.fetchDetail({id:o}),{volume:{volume_type:d}}=u||{};n=(0,p.default)(s=e.volumeTypes).call(s,(e=>e.name===d)),r=n.id}catch(e){}if(n){var c={selectedRowKeys:[r],selectedRows:[n],snapshotId:o};e.setState({initVolumeType:c})}}}));return function(e){return t.apply(this,arguments)}}()),(0,D.default)(this,"onCountChange",(e=>{(0,E.setCreateVolumeCount)(e),this.setState({count:e},(()=>{this.onCountChangeCallback&&this.onCountChangeCallback()}))})),(0,D.default)(this,"getCountMax",(()=>{var{volumes:{left:e=0}={}}=this.getVolumeQuota();return-1===e?1/0:e})),(0,D.default)(this,"onSubmit",(e=>{var t,a,{count:r}=this.state;if(this.message)return h.default.reject(this.message);var{backup:n,image:l,snapshot:i,size:o,availableZone:s,shared:u,name:d,volume_type:c}=e,f={name:d,size:o,availability_zone:"noSelect"!==s?s:null,multiattach:u,volume_type:c.selectedRowKeys[0]};return n&&(0,m.default)(n.selectedRowKeys)&&n.selectedRowKeys.length&&(f.backup_id=n.selectedRowKeys[0]),l&&(0,m.default)(l.selectedRowKeys)&&l.selectedRowKeys.length&&(f.imageRef=l.selectedRowKeys[0]),i&&(0,m.default)(i.selectedRowKeys)&&i.selectedRowKeys.length&&(f.snapshot_id=i.selectedRowKeys[0]),1===r?this.volumeStore.create(f):(0,U.allSettled)((0,g.default)(t=(0,v.default)(a=new Array(r)).call(a,r)).call(t,((e,t)=>{var a,r=W(W({},f),{},{name:(0,y.default)(a="".concat(f.name,"-")).call(a,t+1)});return this.volumeStore.create(r)})))}))}init(){this.state=W(W({},this.state),{},{quotaLoading:!0,count:1,sharedDisabled:!1,confirmCount:0}),this.message="",this.snapshotStore=N.default,this.imageStore=M.default,this.volumeStore=j.default,this.volumeTypeStore=B.default,this.backupStore=V.default,this.getQuota(),this.getAvailZones(),this.getImages(),this.getVolumeTypes()}get listUrl(){return this.getRoutePath("volume")}get name(){return t("create volume")}static allowed(){return h.default.resolve(!0)}get disableSubmit(){var{quotaLoading:e}=this.state;if(e)return!0;var{cinderQuota:t={}}=L.default,{add:a,error:r}=(0,E.getAdd)(t),n=0===a;return n?r!==this.message&&(I.default.error(r),this.message=r):this.message="",n}get instanceName(){var e,t,{name:a}=(0,b.default)(this)||{},{count:r=1}=this.state;return 1===r?a:(0,g.default)(e=(0,v.default)(t=new Array(r)).call(t,r)).call(e,((e,t)=>{var r;return(0,y.default)(r="".concat(a,"-")).call(r,t+1)})).join(", ")}get errorText(){return this.message?t("Unable to create volume: insufficient quota to create resources."):super.errorText}get showQuota(){return!0}getVolumeQuota(){var{quota:e={}}=this.state;return(0,E.getQuota)(e)}get quotaInfo(){return(0,E.getQuotaInfo)(this)}get defaultSize(){return this.quotaIsLimit&&this.maxSize<10?this.maxSize:10}get defaultValue(){var{initVolumeType:e}=this.state;return{source:this.sourceTypes[0],size:this.defaultSize,project:this.currentProjectName,availableZone:(this.availableZones[0]||[]).value,volume_type:e}}get availableZones(){var e,a,r=[{label:t("Not select"),value:"noSelect"}];return(0,_.default)(e=(0,S.default)(a=this.volumeStore.availabilityZones||[]).call(a,(e=>e.zoneState.available))).call(e,(e=>{r.push({value:e.zoneName,label:e.zoneName})})),r}get images(){var e,{imageTab:t}=this.state,a=(0,S.default)(e=this.imageStore.list.data||[]).call(e,(e=>!(!(0,K.canImageCreateInstance)(e)&&!(0,K.canImageCreateIronicInstance)(e))&&(t?(0,K.getImageOS)(e)===t&&"active"===e.status:e)));return(0,g.default)(a).call(a,(e=>W(W({},e),{},{key:e.id})))}get volumeTypes(){var e=this.volumeTypeStore.list.data||[],t=(0,x.default)(e).call(e,(e=>{var t;return!(0,w.default)(t=e.name).call(t,"__")}))?(0,S.default)(e).call(e,(e=>{var t;return!(0,w.default)(t=e.name).call(t,"__")})):e;return(0,O.toJS)(t)}get backups(){var e;return(0,g.default)(e=this.backupStore.list.data||[]).call(e,(e=>W(W({},e),{},{key:e.id})))}get sourceTypes(){return[{label:t("Blank Volume"),value:"blank-volume"},{label:t("Image"),value:"image"},{label:t("Volume Snapshot"),value:"snapshot"}]}get quotaIsLimit(){var{gigabytes:{limit:e}={}}=this.getVolumeQuota();return-1!==e}get maxSize(){var{gigabytes:{left:e=0}={}}=this.getVolumeQuota();return-1===e?1e3:e}getAvailZones(){this.volumeStore.fetchAvailabilityZoneList()}getImages(){this.imageStore.fetchList({all_projects:this.hasAdminRole})}getVolumeTypes(){var e=this;return(0,P.default)((function*(){var t=yield e.volumeTypeStore.fetchList({showQoS:!0});if(t.length>0){var a=t[0],{id:r,name:n}=a,l={selectedRowKeys:[r],selectedRows:[a]};(0,E.setCreateVolumeType)(n),e.setState({initVolumeType:l,volume_type:a},(()=>{e.updateFormValue("volume_type",l),e.updateDefaultValue()}))}}))()}getQuota(){var e=this;return(0,P.default)((function*(){yield(0,E.fetchQuota)(e,0),(0,E.setCreateVolumeSize)(e.defaultSize),e.onCountChange(1),e.updateDefaultValue()}))()}get systemTabs(){var e,t=this.imageStore.list.data||[],a=(0,g.default)(e=(0,S.default)(t).call(t,(e=>"active"===e.status))).call(e,(e=>W(W({},e),{},{key:e.id}))),r=(0,K.getImageSystemTabs)()||[];return(0,S.default)(r).call(r,(e=>(0,x.default)(a).call(a,(t=>(0,K.getImageOS)(t)===e.value))))}getVolumeTypeExtra(){if(this.sourceTypeIsSnapshot)return E.snapshotTypeTip;var{multiattach:e=!1}=this.state;return e?E.multiTip:void 0}get sourceTypeIsImage(){var{source:e}=this.state;return e===this.sourceTypes[1].value}get sourceTypeIsSnapshot(){var{source:e}=this.state;return e===this.sourceTypes[2].value}getDiskMinSize(){var e=0;if(this.sourceTypeIsImage){var{min_disk:t=0,size:a=0}=this.state.image||{},r=Math.ceil(a/1024/1024/1024);e=Math.max(t,r,1)}else if(this.sourceTypeIsSnapshot){var{size:n=0}=this.state.snapshot||{};e=n}return Math.max(e,1)}get nameForStateUpdate(){return["source","image","snapshot","size","volume_type"]}get formItems(){var e,{initVolumeType:a}=this.state,r=this.getDiskMinSize(),n=this.systemTabs;return n&&0!==n.length?[{name:"project",label:t("Project"),type:"label"},{name:"availableZone",label:t("Available Zone"),type:"select",placeholder:t("Please select"),options:this.availableZones,tip:t("Unless you know clearly which AZ to create the volume in, you do not need to fill in here.")},{type:"divider"},{name:"source",label:t("Data Source Type"),type:"radio",options:this.sourceTypes,required:!0,isWrappedValue:!0},{name:"image",label:t("Operating System"),type:"select-table",data:this.images,isLoading:this.imageStore.list.isLoading,required:this.sourceTypeIsImage,isMulti:!1,hidden:!this.sourceTypeIsImage,filterParams:[{label:t("Name"),name:"name"}],columns:(0,K.getImageColumns)(this),tabs:n,defaultTabValue:this.locationParams.os_distro||n[0].value,selectedLabel:t("Image"),onTabChange:this.onImageTabChange},{name:"snapshot",label:t("Volume Snapshot"),type:"select-table",backendPageStore:this.snapshotStore,required:this.sourceTypeIsSnapshot,isMulti:!1,hidden:!this.sourceTypeIsSnapshot,isSortByBack:!0,defaultSortKey:"created_at",defaultSortOrder:"descend",onChange:this.onSnapshotChange,filterParams:[{label:t("Name"),name:"name"}],columns:[{title:t("Name"),dataIndex:"name"},{title:t("Size"),dataIndex:"size",unit:"GiB",sorter:!1},{title:t("Status"),dataIndex:"status",valueMap:E.volumeStatus},{title:t("Description"),dataIndex:"description",sorter:!1},{title:t("Created At"),dataIndex:"created_at",render:e=>(0,F.getSinceTime)(e)}]},{type:"divider"},{name:"volume_type",label:t("Volume Type"),type:"select-table",tip:t('The volume type needs to set "multiattach" in the metadata to support shared volume attributes.'),columns:(0,G.getVolumeTypeColumns)(this.volumeTypes),filterParams:G.volumeTypeFilters,data:this.volumeTypes,isLoading:this.volumeTypeStore.list.isLoading,required:!0,extra:this.getVolumeTypeExtra(),onChange:this.onVolumeTypeChange,initValue:a},{name:"size",label:t("Capacity (GiB)"),type:"slider-input",max:this.maxSize,min:r,description:(0,y.default)(e="".concat(r,"GiB-")).call(e,this.maxSize,"GiB"),required:this.quotaIsLimit,hidden:!this.quotaIsLimit,onChange:E.onVolumeSizeChange},{name:"size",label:t("Capacity (GiB)"),type:"input-int",min:r,hidden:this.quotaIsLimit,required:!this.quotaIsLimit,onChange:E.onVolumeSizeChange},{type:"divider"},{name:"name",label:t("Name"),type:"input-name",placeholder:t("Please input name"),required:!0},{title:t("Description"),dataIndex:"description"}]:[]}onCountChangeCallback(){}renderFooterLeft(){var{count:e=1}=this.state,a={min:1,max:this.getCountMax(),precision:0,onChange:this.onCountChange,formatter:e=>"$ ".concat(e).replace(/\D/g,"")};return T.default.createElement("div",null,T.default.createElement("span",null,t("Count")),T.default.createElement(C.default,(0,k.default)({},a,{value:e,className:(0,q.default)(Q.default.input,"volume-count")})))}}a.Create=J,(0,D.default)(J,"id","volume-create"),(0,D.default)(J,"title",t("Create Volume")),(0,D.default)(J,"path","/storage/volume/create"),(0,D.default)(J,"policy","volume:create");a.default=(0,A.inject)("rootStore")((0,A.observer)(J))},945107:(e,t,a)=>{"use strict";var r=a(633950),n=a(548924);r(t,"__esModule",{value:!0}),t.default=t.NeutronStore=void 0;var l,i,o,s=n(a(810732)),u=n(a(601839)),d=n(a(337187)),c=(n(a(877879)),n(a(533301))),f=(n(a(155041)),a(127567)),p=n(a(892621)),h=n(a(381891)),m=new(t.NeutronStore=(l=class extends h.default{constructor(){super(...arguments),(0,d.default)(this,"availableZones",i,this),(0,d.default)(this,"zoneLoading",o,this)}get zoneClient(){return p.default.neutron.azones}fetchAvailableZones(){var e=this;return(0,u.default)((function*(){e.zoneLoading=!0;var t=yield e.zoneClient.list(),{availability_zones:a=[]}=t;e.availableZones=a,e.zoneLoading=!1}))()}},i=(0,c.default)(l.prototype,"availableZones",[f.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),o=(0,c.default)(l.prototype,"zoneLoading",[f.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,c.default)(l.prototype,"fetchAvailableZones",[f.action],(0,s.default)(l.prototype,"fetchAvailableZones"),l.prototype),l));t.default=m},945805:(e,a,r)=>{"use strict";var n=r(818565),l=r(213696),i=r(303787),o=r(810732),s=r(532462),u=r(110819),d=r(722338),c=r(633950),f=r(548924);c(a,"__esModule",{value:!0}),a.default=a.CloneVolume=void 0;var p=f(r(68982)),h=f(r(819989)),m=f(r(424836)),g=f(r(601839)),v=f(r(549849)),y=f(r(877879)),b=r(87067),_=r(860615),S=f(r(342616)),x=r(505997),w=["volume","more"];function C(e,t){var a=n(e);if(l){var r=l(e);t&&(r=i(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a,r,n=null!=arguments[t]?arguments[t]:{};t%2?s(a=C(Object(n),!0)).call(a,(function(t){(0,y.default)(e,t,n[t])})):u?d(e,u(n)):s(r=C(Object(n))).call(r,(function(t){c(e,t,o(n,t))}))}return e}class I extends _.ModalAction{constructor(){super(...arguments),(0,y.default)(this,"onSubmit",(e=>{var{volume:t,more:a}=e,r=k(k({},(0,v.default)(e,w)),{},{source_volid:this.item.id});return this.store.create(r)}))}get name(){return t("Clone volume")}get tips(){return t("It is recommended that you perform this cloning operation on a disk without any reading/writing")}init(){this.store=S.default,this.getVolumeTypes(),(0,x.fetchQuota)(this,this.item.size)}getVolumeTypes(){var e=this;return(0,g.default)((function*(){var t;yield e.store.fetchVolumeTypes();var a=(0,p.default)(t=e.volumeTypes).call(t,(t=>t.label===e.item.volume_type));e.defaultType=a,a&&(0,x.setCreateVolumeType)(e.item.volume_type),e.updateDefaultValue()}))()}get volumeTypes(){return this.store.volumeTypes}static get disableSubmit(){return(0,x.checkQuotaDisable)()}static get showQuota(){return!0}get showQuota(){return!0}get quotaInfo(){return(0,x.getQuotaInfo)(this)}get defaultValue(){var e,t,{name:a,id:r,volume_type:n,size:l}=this.item;return{volume:(0,h.default)(e=(0,h.default)(t="".concat(a||r,"(")).call(t,n," | ")).call(e,l,"GiB)"),volume_type:(this.defaultType||{}).value,size:l}}get maxSize(){var{quota:{gigabytes:{left:e=0}={}}={}}=this.state;return-1===e?1/0:e}get formItems(){var{size:e}=this.item,{more:a}=this.state;return[{name:"volume",label:t("Volume"),type:"label",iconType:"volume"},{name:"name",label:t("Volume Name"),type:"input-name",required:!0},{name:"size",label:t("Capacity (GiB)"),type:"input-int",min:e,max:this.maxSize,required:!0,onChange:x.onVolumeSizeChange},{name:"more",type:"more",label:t("Advanced Options")},{name:"volume_type",label:t("Volume Type"),type:"select",options:this.volumeTypes,onChange:x.onVolumeTypeChange,allowClear:!1,hidden:!a}]}}a.CloneVolume=I,(0,y.default)(I,"id","clone-volume"),(0,y.default)(I,"title",t("Clone Volume")),(0,y.default)(I,"policy","volume:create"),(0,y.default)(I,"allowed",(e=>m.default.resolve((0,x.isAvailableOrInUse)(e))));a.default=(0,b.inject)("rootStore")((0,b.observer)(I))},948858:(e,t,a)=>{var r=a(614530);"string"==typeof r&&(r=[[e.id,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(453027)(r,n);r.locals&&(e.exports=r.locals)},951478:(e,a,r)=>{"use strict";var n=r(818565),l=r(213696),i=r(303787),o=r(810732),s=r(532462),u=r(110819),d=r(722338),c=r(633950),f=r(548924);c(a,"__esModule",{value:!0}),a.default=a.SystemStep=void 0;var p=f(r(424836)),h=f(r(89195)),m=f(r(303787)),g=f(r(601839)),v=f(r(877879)),y=f(r(756612)),b=r(87067),_=f(r(165304)),S=f(r(899196)),x=f(r(429886)),w=f(r(608690)),C=f(r(936689)),k=f(r(978711)),I=r(646197),P=r(178819),D=r(492325),T=r(83575),A=r(70591);function R(e,t){var a=n(e);if(l){var r=l(e);t&&(r=i(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function F(e){for(var t=1;t<arguments.length;t++){var a,r,n=null!=arguments[t]?arguments[t]:{};t%2?s(a=R(Object(n),!0)).call(a,(function(t){(0,v.default)(e,t,n[t])})):u?d(e,u(n)):s(r=R(Object(n))).call(r,(function(t){c(e,t,o(n,t))}))}return e}class E extends k.default{constructor(){super(...arguments),(0,v.default)(this,"allowed",(()=>p.default.resolve())),(0,v.default)(this,"onValuesChange",(e=>{(0,y.default)(e,"serverGroup")&&this.onServerGroupChange(e.serverGroup)})),(0,v.default)(this,"onServerGroupChange",(e=>{var{selectedRows:t=[]}=e||{};this.updateContext({serverGroupRow:t[0]||null})}))}init(){this.keyPairStore=_.default,this.serverStore=S.default,this.hypervisorStore=x.default,this.serverGroupStore=w.default,this.getKeypairs(),this.hasAdminRole&&this.getHypervisors(),this.getServerGroups()}get hypervisorColumns(){var e=[...P.hypervisorColumns];return e[0]={title:t("Hostname"),dataIndex:"hypervisor_hostname"},e}get hypervisorFilters(){var e=[...P.hypervisorFilters];return e[0]={label:t("Hostname"),name:"hypervisor_hostname"},e}get title(){return"SystemStep"}get name(){return"SystemStep"}get keypairs(){var e;return(0,h.default)(e=this.keyPairStore.list.data||[]).call(e,(e=>F(F({},e),{},{key:e.name,id:e.name})))}get hypervisors(){var e;return(0,h.default)(e=this.hypervisorStore.list.data||[]).call(e,(e=>F(F({},e),{},{key:e.id,name:e.hypervisor_hostname})))}get serverGroups(){var e;return(0,m.default)(e=this.serverGroupStore.list.data||[]).call(e,(e=>{var{servergroup:t}=this.locationParams;return!t||e.id===t}))}get serverGroupRequired(){var{more:e}=this.state,{servergroup:t}=this.locationParams;return!!t&&e}get inputHelp(){var{input:e=""}=this.state;return t("Entered: {length, plural, =1 {one character} other {# characters} }(maximum {maxCount} characters)",{length:e.length,maxCount:1e3})}get sourceInfo(){var{context:e={}}=this.props,{source:t={},image:a={},bootableVolume:r={},instanceSnapshot:n={}}=e;if("image"===t.value){var{selectedRows:l=[]}=a;return l.length&&l[0]}if("bootableVolume"===t.value){var{selectedRows:i=[]}=r,o=i.length&&i[0].origin_data||{},s=i.length&&i[0].volume_image_metadata;return o.volume_image_metadata||s}if("instanceSnapshot"===t.value){var{selectedRows:u=[]}=n;return u.length&&u[0]}return!1}get isWindowsImage(){return this.sourceInfo&&"windows"===this.sourceInfo.os_distro}get defaultValue(){var e,{servergroup:t}=this.locationParams,{context:a={}}=this.props,r={loginType:a.loginType||(this.isWindowsImage?this.loginTypes[1]:this.loginTypes[0]),more:!1,physicalNodeType:D.physicalNodeTypes[0],userData:"",username:this.loginUserName||this.loginUserNameInContext};t&&(r.serverGroup={selectedRowKeys:[t],selectedRows:(0,m.default)(e=this.serverGroups).call(e,(e=>e.id===t))});var{name:n}=this.state;return n&&(r.name=n),r}get loginTypes(){return[{label:t("Keypair"),value:"keypair",disabled:this.isWindowsImage},{label:t("Password"),value:"password"}]}getKeypairs(){var e=this;return(0,g.default)((function*(){yield e.keyPairStore.fetchList()}))()}getHypervisors(){this.hypervisorStore.fetchList()}getServerGroups(){var e=this;return(0,g.default)((function*(){yield e.serverGroupStore.fetchList(),e.updateDefaultValue();var{servergroup:t}=e.locationParams;t&&e.onServerGroupChange({selectedRows:e.serverGroups})}))()}get nameForStateUpdate(){return["name","loginType","password","confirmPassword","more","physicalNodeType","serverGroup"]}get loginUserName(){return this.sourceInfo&&this.sourceInfo.os_admin_user}get loginUserNameInContext(){var{username:e=""}=this.props.context||{};return e||""}get isPassword(){var{loginType:e}=this.state;return e===this.loginTypes[1].value}get usernameFormItem(){var e={name:"username",label:t("Login Name"),type:"input",extra:this.loginUserName?"":t("The feasible configuration of cloud-init or cloudbase-init service in the image is not synced to image's properties, so the Login Name is unknown."),tip:t("Whether the Login Name can be used is up to the feasible configuration of cloud-init or cloudbase-init service in the image."),required:this.isPassword,hidden:!this.isPassword};return e.disabled=!!this.loginUserName,e}get formItems(){var{more:e=!1,physicalNodeType:a}=this.state,r=a===D.physicalNodeTypes[1].value,{initKeyPair:n}=this.state;return[{name:"name",label:t("Name"),type:"input-name",required:!0,isInstance:!0},{name:"loginType",label:t("Login Type"),type:"radio",options:this.loginTypes,isWrappedValue:!0},this.usernameFormItem,{name:"keypair",label:t("Keypair"),type:"select-table",data:this.keypairs,isLoading:this.keyPairStore.list.isLoading,required:!this.isPassword,hidden:this.isPassword,header:(0,A.getKeyPairHeader)(this),initValue:n,tip:t("The SSH key is a way to remotely log in to the instance. The cloud platform only helps to keep the public key. Please keep your private key properly."),filterParams:[{label:t("Name"),name:"name"}],columns:[{title:t("Name"),dataIndex:"name"},{title:t("Fingerprint"),dataIndex:"fingerprint"}],selectedLabel:t("Keypair")},{name:"password",label:t("Login Password"),type:"input-password",required:this.isPassword,hidden:!this.isPassword,otherRule:(0,I.getPasswordOtherRule)("password","instance")},{name:"confirmPassword",label:t("Confirm Password"),type:"input-password",required:this.isPassword,hidden:!this.isPassword,otherRule:(0,I.getPasswordOtherRule)("confirmPassword","instance")},{type:"divider"},{name:"more",label:t("Advanced Options"),type:"more"},{name:"physicalNodeType",label:t("Physical Node"),type:"radio",hidden:!e||!this.hasAdminRole,options:D.physicalNodeTypes,isWrappedValue:!0},{name:"physicalNode",label:t("Specify Physical Node"),type:"select-table",hidden:!this.hasAdminRole||!e||!r,required:r,data:this.hypervisors,isLoading:this.hypervisorStore.list.isLoading,extra:t("You can manually specify a physical node to create an instance."),columns:this.hypervisorColumns,filterParams:this.hypervisorFilters},{name:"serverGroup",label:t("Server Group"),type:"select-table",hidden:!e,data:this.serverGroups,isLoading:this.serverGroupStore.list.isLoading,required:this.serverGroupRequired,extra:t("Using server groups, you can create cloud hosts on the same/different physical nodes as much as possible to meet the affinity/non-affinity requirements of business applications."),columns:[{title:t("Name"),dataIndex:"name"},{title:t("Member Count"),dataIndex:"members",render:e=>e.length},{title:t("Policy"),dataIndex:"policy",valueMap:C.default}],filterParams:[{label:t("Name"),name:"name"},{label:t("Policy"),name:"policy",options:(0,T.getOptions)(C.default)}]},{name:"userData",label:t("User Data"),type:"textarea-from-file",validator:I.asciiValidator,hidden:!e,extra:t("The user needs to ensure that the input is a shell script that can run completely and normally.")}]}}a.SystemStep=E;a.default=(0,b.inject)("rootStore")((0,b.observer)(E))},952885:(e,a,r)=>{"use strict";var n=r(633950),l=r(548924);n(a,"__esModule",{value:!0}),a.default=void 0;var i=l(r(877879)),o=r(860615),s=l(r(648136));class u extends o.ConfirmAction{constructor(){super(...arguments),(0,i.default)(this,"policy","identity:delete_application_credential"),(0,i.default)(this,"onSubmit",(e=>{var{user_id:t,id:a}=e;return s.default.client.delete(t,a)}))}get id(){return"delete"}get title(){return t("Delete Application Credential")}get isDanger(){return!0}get buttonText(){return t("Delete")}get actionName(){return t("delete application credential")}}a.default=u},955924:(e,a,r)=>{"use strict";var n=r(633950),l=r(548924);n(a,"__esModule",{value:!0}),a.availabilityZoneState=a.availabilityZoneResource=void 0,a.enablePFW=function(){var{neutronExtensions:e}=o.default,t=!1,a=!1;return(0,i.default)(e).call(e,(e=>{"floating-ip-port-forwarding"===e.alias?t=!0:"expose-port-forwarding-in-fip"===e.alias&&(a=!0)})),t&&a};var i=l(r(532462)),o=l(r(577186));a.availabilityZoneState={available:t("Available"),unavailable:t("Unavailable")},a.availabilityZoneResource={router:t("Router"),network:t("Network")}},961362:(e,t,a)=>{"use strict";var r=a(818565),n=a(213696),l=a(303787),i=a(810732),o=a(532462),s=a(110819),u=a(722338),d=a(633950),c=a(548924);d(t,"__esModule",{value:!0}),t.default=t.UserStore=void 0;var f,p,h=c(a(601839)),m=c(a(549849)),g=c(a(68982)),v=c(a(532462)),y=c(a(818565)),b=c(a(424836)),_=c(a(89195)),S=c(a(303787)),x=c(a(810732)),w=c(a(337187)),C=c(a(877879)),k=c(a(533301)),I=(c(a(155041)),a(127567)),P=c(a(331440)),D=c(a(892621)),T=c(a(577186)),A=c(a(452740)),R=c(a(653884)),F=c(a(381891)),E=["id","projectId","groupId","roleId","withProjectRole","withSystemRole","all_projects"],N=["select_project","select_user_group","projectRoles","defaultRole"];function M(e,t){var a=r(e);if(n){var o=n(e);t&&(o=l(o).call(o,(function(t){return i(e,t).enumerable}))),a.push.apply(a,o)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a,r,n=null!=arguments[t]?arguments[t]:{};t%2?o(a=M(Object(n),!0)).call(a,(function(t){(0,C.default)(e,t,n[t])})):s?u(e,s(n)):o(r=M(Object(n))).call(r,(function(t){d(e,t,i(n,t))}))}return e}var B=new(t.UserStore=(f=class extends F.default{constructor(){super(...arguments),(0,w.default)(this,"userProjects",p,this),(0,C.default)(this,"addGroupUsers",((e,t)=>R.default.addGroupUsers({id:e,userId:t}))),(0,C.default)(this,"addProjectUser",((e,t,a)=>A.default.assignUserRole({id:e,userId:t,roleId:a}))),(0,C.default)(this,"getUserDefaultProject",((e,t)=>{var{default_project_id:a}=e;if(a){var r=(0,g.default)(t).call(t,(e=>e.id===a));e.defaultProject=null==r?void 0:r.name}})),(0,C.default)(this,"getProjectMapRoles",((e,t,a,r)=>{var n={},{id:l}=e;return(0,v.default)(t).call(t,(e=>{var{scope:{project:{id:t}={}}={},role:{id:i}={},user:{id:o}={}}=e;if(o===l&&i&&t){var s=(0,g.default)(a).call(a,(e=>e.id===i));if(n[t])n[t].roles=[...n[t].roles,s];else{var u=(0,g.default)(r).call(r,(e=>e.id===t));n[t]={project:u,roles:[s]}}}})),n})),(0,C.default)(this,"getSystemRoles",((e,t,a,r)=>{var n=[],{id:l}=e||{};return(0,v.default)(t).call(t,(e=>{var{role:{id:t}={},user:{id:r}={}}=e;if(r===l&&t){var i=(0,g.default)(a).call(a,(e=>e.id===t));n.push(i)}})),n})),(0,C.default)(this,"updateUser",((e,t,a,r,n,l)=>{this.getUserDefaultProject(e,n);var i=this.getProjectMapRoles(e,t,r,n),o=this.getSystemRoles(e,a,r,n),s=(0,g.default)(l).call(l,(t=>t.id===e.domain_id));return j(j({},e),{},{projects:i,projectCount:(0,y.default)(i).length,domain:s,domainName:(s||{}).name||e.domain_id,systemRoles:o})}))}get client(){return D.default.keystone.users}get domainClient(){return D.default.keystone.domains}get systemGroupClient(){return D.default.keystone.systemGroups}get roleClient(){return D.default.keystone.roles}get roleAssignmentClient(){return D.default.keystone.roleAssignments}get projectClient(){return D.default.keystone.projects}get systemUserClient(){return D.default.keystone.systemUsers}get groupClient(){return D.default.keystone.groups}listFetchByClient(e,t){var{groupId:a}=t;return a?this.groupClient.users.list(a,e):this.client.list(e)}get paramsFunc(){return e=>{var{id:t,projectId:a,groupId:r,roleId:n,withProjectRole:l,withSystemRole:i,all_projects:o}=e;return(0,m.default)(e,E)}}create(e){var t=this;return(0,h.default)((function*(){var a,r={},{select_project:n,select_user_group:l=[],projectRoles:i,defaultRole:o}=e,s=(0,m.default)(e,N);r[t.responseKey]=s,t.isSubmitting=!0;var u=yield t.client.create(r),{user:{id:d}}=u,c=[];return(0,v.default)(l).call(l,(e=>{c.push(t.addGroupUsers(e,d))})),(0,v.default)(a=(0,y.default)(i)).call(a,(e=>{var a=i[e];(0,v.default)(a).call(a,(a=>{c.push(t.addProjectUser(e,d,a))}))})),yield b.default.all(c),t.isSubmitting=!1,u}))()}getUserProjects(){var e=this;return(0,h.default)((function*(){e.userProjects.update({isLoading:!0});var{user:{user:{id:t}}}=T.default,{projects:a}=yield e.client.projects.list(t);return e.userProjects.update({data:a,isLoading:!1}),a}))()}listDidFetch(e,t,a){var r=this;return(0,h.default)((function*(){if(!e.length)return e;var{withProjectRole:t=!0,withDefaultProject:n=!0,withSystemRole:l=!0,projectId:i,roleId:o,domain_id:s}=a,u=t||l,d={};o&&(d["role.id"]=o),i&&(d["scope.project.id"]=i);var c=[t?r.roleAssignmentClient.list(d):null,l?r.roleAssignmentClient.list({"scope.system":"all"}):null,u?r.roleClient.list():null,t||n?r.projectClient.list():null,s?null:r.domainClient.list()],[f,p,h,m,v]=yield b.default.all(c),{roles:y=[]}=h||{},{domains:x=[]}=v||{},{role_assignments:w=[]}=f||{},{role_assignments:C=[]}=p||{},{projects:k=[]}=m||{},I=(0,_.default)(e).call(e,(e=>r.updateUser(e,w,C,y,k,x)));return i?(0,S.default)(I).call(I,(e=>!!e.projectCount)):o?(0,S.default)(I).call(I,(e=>{var{projectCount:t,systemRoles:a}=e;return!!t||!!(0,g.default)(a).call(a,(e=>e.id===o))})):I}))()}fetchUserDefaultProject(e){var t=this;return(0,h.default)((function*(){var{default_project_id:a}=e;if(!a)return null;try{var{project:r}=yield t.projectClient.show(a);return r}catch(e){return null}}))()}detailDidFetch(e){var t=this;return(0,h.default)((function*(){var{id:a}=e,r={"user.id":a,"scope.system":"all"},n=[t.roleAssignmentClient.list(r),t.roleClient.list(),t.domainClient.list(),t.fetchUserDefaultProject(e)],[l,i,o,s]=yield b.default.all(n),{roles:u=[]}=i||{},{domains:d=[]}=o,{role_assignments:c=[]}=l||{};return t.updateUser(e,[],c,u,s?[s]:[],d)}))()}enable(e){var t=this;return(0,h.default)((function*(){var{id:a}=e;return t.submitting(t.client.patch(a,{user:{enabled:!0}}))}))()}forbidden(e){var t=this;return(0,h.default)((function*(){var{id:a}=e;return t.submitting(t.client.patch(a,{user:{enabled:!1}}))}))()}changePassword(e){var t=this;return(0,h.default)((function*(){var{id:a,password:r}=e,n={user:{password:r}};return t.submitting(t.client.patch(a,n))}))()}changePasswordUser(e){var t=this;return(0,h.default)((function*(){var{id:a,password:r,original_password:n}=e,l={user:{password:r,original_password:n}};return t.submitting(t.client.updatePassword(a,l))}))()}assignSystemRole(e){var t=this;return(0,h.default)((function*(){var{id:a,roleId:r}=e;return t.systemUserClient.roles.update(a,r)}))()}deleteSystemRole(e){var t=this;return(0,h.default)((function*(){var{id:a,roleId:r}=e;return t.systemUserClient.roles.delete(a,r)}))()}edit(e,t){var a=this;return(0,h.default)((function*(){var{email:r,phone:n,real_name:l,description:i,name:o}=t,s={user:{email:r,phone:n,real_name:l,description:i,name:o}};return a.submitting(a.client.patch(e,s))}))()}setDefaultProject(e,t){var a=this;return(0,h.default)((function*(){var r={user:{default_project_id:t}};return a.submitting(a.client.patch(e,r))}))()}},p=(0,k.default)(f.prototype,"userProjects",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new P.default}}),(0,k.default)(f.prototype,"create",[I.action],(0,x.default)(f.prototype,"create"),f.prototype),(0,k.default)(f.prototype,"getUserProjects",[I.action],(0,x.default)(f.prototype,"getUserProjects"),f.prototype),(0,k.default)(f.prototype,"enable",[I.action],(0,x.default)(f.prototype,"enable"),f.prototype),(0,k.default)(f.prototype,"forbidden",[I.action],(0,x.default)(f.prototype,"forbidden"),f.prototype),(0,k.default)(f.prototype,"changePassword",[I.action],(0,x.default)(f.prototype,"changePassword"),f.prototype),(0,k.default)(f.prototype,"changePasswordUser",[I.action],(0,x.default)(f.prototype,"changePasswordUser"),f.prototype),(0,k.default)(f.prototype,"assignSystemRole",[I.action],(0,x.default)(f.prototype,"assignSystemRole"),f.prototype),(0,k.default)(f.prototype,"deleteSystemRole",[I.action],(0,x.default)(f.prototype,"deleteSystemRole"),f.prototype),(0,k.default)(f.prototype,"edit",[I.action],(0,x.default)(f.prototype,"edit"),f.prototype),(0,k.default)(f.prototype,"setDefaultProject",[I.action],(0,x.default)(f.prototype,"setDefaultProject"),f.prototype),f));t.default=B},983202:(e,t,a)=>{"use strict";var r=a(818565),n=a(213696),l=a(303787),i=a(810732),o=a(532462),s=a(110819),u=a(722338),d=a(633950),c=a(548924);d(t,"__esModule",{value:!0}),t.default=t.SecretsStore=void 0;var f,p=c(a(549849)),h=c(a(149409)),m=c(a(303787)),g=c(a(29672)),v=c(a(89195)),y=c(a(424836)),b=c(a(677861)),_=c(a(804445)),S=c(a(810732)),x=c(a(601839)),w=c(a(877879)),C=c(a(533301)),k=c(a(381891)),I=c(a(892621)),P=a(127567),D=c(a(308934)),T=["expiration","secret_type","algorithm","bit_length","mode","payload_content_encoding"];function A(e,t){var a=r(e);if(n){var o=n(e);t&&(o=l(o).call(o,(function(t){return i(e,t).enumerable}))),a.push.apply(a,o)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a,r,n=null!=arguments[t]?arguments[t]:{};t%2?o(a=A(Object(n),!0)).call(a,(function(t){(0,w.default)(e,t,n[t])})):s?u(e,s(n)):o(r=A(Object(n))).call(r,(function(t){d(e,t,i(n,t))}))}return e}var F=new(t.SecretsStore=(f=class extends k.default{constructor(){super(...arguments),(0,w.default)(this,"updateMarkerParams",((e,t)=>({limit:e,offset:t})))}get client(){return I.default.barbican.secrets}get payloadClient(){return I.default.barbican.secrets.payload}get fetchListByLimit(){return!0}get paramsFunc(){return e=>R({},e)}get mapper(){return e=>{var{secret_ref:t,algorithm:a,expiration:r}=e,[,n]=t.split("/secrets/"),l=r;if(a&&(0,h.default)(a).call(a,"{"))try{l=JSON.parse(a).expiration||r}catch(e){}return R(R({},e),{},{id:n,expiration:l})}}requestListAllByLimit(e,t){var a=this;return(0,x.default)((function*(){for(var r=!0,n=[];r;){var l=n.length||"",i=yield a.requestListByMarker(e,t,l),o=a.getListDataFromResult(i);n=[...n,...o],(t>=i.total||l>=i.total)&&(r=!1)}return n}))()}updateItem(e,t){var{secret_ref:a}=e,r=(0,m.default)(t).call(t,(e=>{var t=[e.default_tls_container_ref,e.client_ca_tls_container_ref,...e.sni_container_refs];return(0,g.default)(t).call(t,a)}));return r.length&&(e.listener=(0,v.default)(r).call(r,(e=>({id:e.id,name:e.name,lb:e.lbIds[0]})))),e}fetchDetail(e){var t=this;return(0,x.default)((function*(){var{id:a,silent:r}=e;r||(t.isLoading=!0);var[n,l]=yield y.default.all([t.client.show(a,null,{headers:{Accept:"application/json"}}),t.payloadClient.list(a,null,{headers:{Accept:"*/*"},responseType:"arraybuffer"})]),i=[];try{i=yield D.default.fetchList()}catch(e){i=[]}var o=l;if(l)try{if(l instanceof ArrayBuffer){var s=new Uint8Array(l),u=n.payload_content_type||"text/plain",d=new TextDecoder("utf-8",{fatal:!1}).decode(s);if(/^[\x20-\x7E\n\r\t]*$/.test(d)&&((0,g.default)(u).call(u,"text")||(0,g.default)(u).call(u,"plain")||(0,g.default)(u).call(u,"json")))o=d;else{for(var c="",f=0;f<s.byteLength;f++)c+=String.fromCharCode(s[f]);o=btoa(c)}}else o="string"==typeof l?l:(0,b.default)(l,null,2)}catch(e){o="Error decoding payload"}n.payload=o,t.updateItem(n,i);var p=t.mapper(n||{});return t.detail=p,t.isLoading=!1,p}))()}listDidFetch(e){var t=this;return(0,x.default)((function*(){if(0===e.length)return e;var a=[];try{a=yield D.default.fetchList()}catch(e){a=[]}return(0,v.default)(e).call(e,(e=>(t.updateItem(e,a),R({},e))))}))()}create(e){var t=this;return(0,x.default)((function*(){var{expiration:a,secret_type:r,algorithm:n,bit_length:l,mode:i,payload_content_encoding:o}=e,s=R(R(R(R(R(R(R({},(0,p.default)(e,T)),r&&""!==(0,_.default)(r).call(r)&&{secret_type:r}),n&&""!==(0,_.default)(n).call(n)&&{algorithm:n}),l&&{bit_length:l}),i&&""!==(0,_.default)(i).call(i)&&{mode:i}),o&&""!==(0,_.default)(o).call(o)&&{payload_content_encoding:o}),a&&{expiration:a});return t.client.create(s)}))()}},(0,C.default)(f.prototype,"fetchDetail",[P.action],(0,S.default)(f.prototype,"fetchDetail"),f.prototype),(0,C.default)(f.prototype,"create",[P.action],(0,S.default)(f.prototype,"create"),f.prototype),f));t.default=F},983867:(e,a,r)=>{"use strict";var n=r(633950),l=r(548924);n(a,"__esModule",{value:!0}),a.default=a.CreateImage=void 0;var i=l(r(89195)),o=l(r(818565)),s=l(r(424836)),u=l(r(877879)),d=r(87067),c=r(860615),f=r(593651),p=l(r(342616)),h=r(505997);class m extends c.ModalAction{constructor(){super(...arguments),(0,u.default)(this,"onSubmit",(e=>{var{id:t}=this.item;return this.store.uploadImage(t,e)}))}get name(){return t("Create Image")}get defaultValue(){return{disk_format:"raw"}}get osList(){var e;return(0,i.default)(e=(0,o.default)(f.imageOS)).call(e,(e=>({value:e,label:f.imageOS[e]})))}get formatList(){var e;return(0,i.default)(e=(0,o.default)(f.volumeCreateImageTypes)).call(e,(e=>({label:f.volumeCreateImageTypes[e],value:e})))}get formItems(){return[{name:"image_name",label:t("Image Name"),type:"input-name",placeholder:t("Please input name"),isImage:!0,required:!0},{name:"disk_format",label:t("Format"),type:"select",options:this.formatList,required:!0}]}init(){this.store=p.default}}a.CreateImage=m,(0,u.default)(m,"id","create-image"),(0,u.default)(m,"title",t("Create Image")),(0,u.default)(m,"policy","volume_extension:volume_actions:upload_image"),(0,u.default)(m,"allowed",(e=>s.default.resolve((0,h.isAvailable)(e))));a.default=(0,d.inject)("rootStore")((0,d.observer)(m))},988039:(e,t,a)=>{"use strict";var r=a(818565),n=a(213696),l=a(303787),i=a(810732),o=a(532462),s=a(110819),u=a(722338),d=a(633950),c=a(548924);d(t,"__esModule",{value:!0}),t.default=t.ContainersStore=void 0;var f,p,h=c(a(303787)),m=c(a(29672)),g=c(a(89195)),v=c(a(424836)),y=c(a(532462)),b=c(a(68982)),_=c(a(208044)),S=c(a(677861)),x=c(a(810732)),w=c(a(601839)),C=c(a(337187)),k=c(a(877879)),I=(c(a(155041)),c(a(533301))),P=c(a(381891)),D=c(a(892621)),T=a(127567),A=a(983202),R=c(a(308934));function F(e,t){var a=r(e);if(n){var o=n(e);t&&(o=l(o).call(o,(function(t){return i(e,t).enumerable}))),a.push.apply(a,o)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a,r,n=null!=arguments[t]?arguments[t]:{};t%2?o(a=F(Object(n),!0)).call(a,(function(t){(0,k.default)(e,t,n[t])})):s?u(e,s(n)):o(r=F(Object(n))).call(r,(function(t){d(e,t,i(n,t))}))}return e}var N=new(t.ContainersStore=(f=class extends P.default{constructor(){super(...arguments),(0,k.default)(this,"updateMarkerParams",((e,t)=>({limit:e,offset:t}))),(0,C.default)(this,"delete",p,this)}get client(){return D.default.barbican.containers}get payloadClient(){return D.default.barbican.secrets.payload}get fetchListByLimit(){return!0}get secretStore(){return new A.SecretsStore}get mapper(){return e=>{var{container_ref:t,algorithm:a}=e,[,r]=t.split("/containers/"),{domain:n,expiration:l}=a?JSON.parse(a):{};return E(E({},e),{},{id:r,domain:n,expiration:l})}}requestListAllByLimit(e,t){var a=this;return(0,w.default)((function*(){for(var r=!0,n=[];r;){var l=n.length||"",i=yield a.requestListByMarker(e,t,l),o=a.getListDataFromResult(i);n=[...n,...o],(t>=i.total||l>=i.total)&&(r=!1)}return n}))()}updateItem(e,t){var{container_ref:a}=e,r=(0,h.default)(t).call(t,(e=>{var t=[e.default_tls_container_ref,e.client_ca_tls_container_ref,...e.sni_container_refs];return(0,m.default)(t).call(t,a)}));return r.length&&(e.listener=(0,g.default)(r).call(r,(e=>({id:e.id,name:e.name,lb:e.lbIds[0]})))),e}listDidFetch(e){var t=this;return(0,w.default)((function*(){if(0===e.length)return e;var[a,r]=yield v.default.all([t.secretStore.fetchList({mode:"SERVER"}),R.default.fetchList()]),n=(0,g.default)(e).call(e,(e=>{var{secret_refs:n=[]}=e;return 0===n.length?e.hidden=!0:((0,y.default)(n).call(n,(t=>{var{secret_ref:r=""}=t,[,n]=r.split("/secrets/"),l=(0,b.default)(a).call(a,(e=>e.id===n));l?((0,_.default)(t,{secret_info:l}),(0,_.default)(e,{algorithm:l.algorithm,mode:l.mode})):e.hidden=!0})),t.updateItem(e,r)),E({},e)}));return(0,h.default)(n).call(n,(e=>!0!==e.hidden))}))()}detailDidFetch(e){var t=this;return(0,w.default)((function*(){var a,{secret_refs:r=[]}=e,[n,l]=yield v.default.all([t.secretStore.fetchList({mode:"SERVER"}),R.default.fetchList()]),i=[];(0,y.default)(r).call(r,function(){var t=(0,w.default)((function*(t){var{secret_ref:a=""}=t,[,r]=a.split("/secrets/"),l=(0,b.default)(n).call(n,(e=>e.id===r));l&&(i.push(l.id),(0,_.default)(t,{secret_info:l}),(0,_.default)(e,{algorithm:l.algorithm,mode:l.mode}))}));return function(e){return t.apply(this,arguments)}}()),t.updateItem(e,l);var o=yield v.default.all((0,g.default)(i).call(i,function(){var e=(0,w.default)((function*(e){try{var a=yield t.payloadClient.list(e,null,{headers:{Accept:"*/*"},responseType:"arraybuffer"});if(a instanceof ArrayBuffer){var r=new Uint8Array(a),n=new TextDecoder("utf-8",{fatal:!1}).decode(r);if(/^[\x20-\x7E\n\r\t]*$/.test(n))return n;for(var l="",i=0;i<r.byteLength;i++)l+=String.fromCharCode(r[i]);return btoa(l)}return a}catch(e){return null}}));return function(t){return e.apply(this,arguments)}}()));return(0,y.default)(a=o||[]).call(a,((e,t)=>{r[t].secret_info.payload=e})),e}))()}create(e){var t=this;return(0,w.default)((function*(){var a={name:e.name,mode:e.mode,payload_content_type:"text/plain",secret_type:"certificate",algorithm:(0,S.default)({domain:e.domain,expiration:e.expiration})},r=E(E({},a),{},{payload:e.certificate}),n=[t.secretStore.create(r)];if("SERVER"===e.mode){var l=E(E({},a),{},{payload:e.private_key});n.push(t.secretStore.create(l))}var[i,o]=yield v.default.all(n),s=[{name:"certificate",secret_ref:i.secret_ref}];o&&s.push({name:"private_key",secret_ref:o.secret_ref});var u={type:"certificate",name:e.name,secret_refs:s};return t.client.create(u)}))()}},(0,I.default)(f.prototype,"create",[T.action],(0,x.default)(f.prototype,"create"),f.prototype),p=(0,I.default)(f.prototype,"delete",[T.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,w.default)((function*(t){var{id:a,secret_refs:r=[]}=t;return yield v.default.all((0,g.default)(r).call(r,(t=>{var{secret_ref:a=""}=t,[,r]=a.split("/secrets/");return e.secretStore.delete({id:r})}))),e.submitting(e.client.delete(a))}));return function(e){return t.apply(this,arguments)}}()}}),f));t.default=N}}]);