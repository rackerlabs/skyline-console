"use strict";(self.webpackChunkskyline_console=self.webpackChunkskyline_console||[]).push([[137],{13820:(e,t,a)=>{var r=a(33950),l=a(48924);r(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a(21888)),i=l(a(30916)),s=l(a(92715)),o=l(a(88850)),u=l(a(86334)),d="/heat";t.default=[{path:d,component:n.default,routes:[{path:"".concat(d,"/stack"),component:s.default,exact:!0},{path:"".concat(d,"/stack/create"),component:u.default,exact:!0},{path:"".concat(d,"/stack/edit/:id/:name"),component:u.default,exact:!0},{path:"".concat(d,"/stack/detail/:id/:name"),component:o.default,exact:!0},{path:"*",component:i.default}]}]},13999:(e,t,a)=>{var r=a(33950),l=a(48924);r(t,"__esModule",{value:!0}),t.default=t.StackEventStore=void 0;var n=l(a(92621)),i=l(a(81891));class s extends i.default{get client(){return n.default.heat.stacks}get responseKey(){return"event"}listFetchByClient(e,t){var{id:a,name:r}=t;return this.client.events({id:a,name:r},e)}get paramsFunc(){return()=>{}}}t.StackEventStore=s;var o=new s;t.default=o},25761:(e,a,r)=>{var l=r(33950),n=r(48924);l(a,"__esModule",{value:!0}),a.default=a.Event=void 0;var i=n(r(77879)),s=n(r(23872)),o=r(87067),u=n(r(54017)),d=r(13999),c=r(92666);class m extends u.default{constructor(){super(...arguments),(0,i.default)(this,"getColumns",(()=>[{title:t("Event Time"),dataIndex:"event_time",valueRender:"toLocalTime"},{title:t("Stack Resource"),dataIndex:"logical_resource_id",render:e=>s.default.createElement("div",{style:{wordWrap:"break-word",wordBreak:"break-word"}},e)},{title:t("Resource"),dataIndex:"physical_resource_id",render:e=>s.default.createElement("div",{style:{wordWrap:"break-word",wordBreak:"break-word"}},e)},{title:t("Resource Status"),dataIndex:"resource_status",isHideable:!0,valueMap:c.stackStatus},{title:t("Resource Status Reason"),dataIndex:"resource_status_reason",isHideable:!0,isStatus:!1,width:300}]))}init(){this.store=new d.StackEventStore}get policy(){return"events:index"}get aliasPolicy(){return"heat:events:index"}get name(){return t("stack events")}get hideSearch(){return!0}}a.Event=m;a.default=(0,o.inject)("rootStore")((0,o.observer)(m))},26552:(e,a,r)=>{var l=r(33950),n=r(48924);l(a,"__esModule",{value:!0}),a.default=void 0;var i=n(r(77879)),s=n(r(23872)),o=r(60615),u=n(r(72415));class d extends o.ConfirmAction{constructor(){super(...arguments),(0,i.default)(this,"policy","stacks:abandon"),(0,i.default)(this,"allowedCheckFunc",(e=>!0)),(0,i.default)(this,"confirmContext",(e=>{var a=this.getName(e);return s.default.createElement("div",null,s.default.createElement("p",null,this.unescape(t("Are you sure to {action} (instance: {name})?",{action:this.actionNameDisplay||this.title,name:a}))),s.default.createElement("p",null,t("Abandoning this stack will preserve the resources deployed by the stack.")))})),(0,i.default)(this,"onSubmit",(e=>{var{id:t,name:a}=e||this.item;return u.default.abandon({id:t,name:a})}))}get id(){return"abandon"}get title(){return t("Abandon Stack")}get actionName(){return t("abandon stack")}get isDanger(){return!0}get isAsyncAction(){return!0}}a.default=d},33323:(e,a,r)=>{var l=r(33950),n=r(48924);l(a,"__esModule",{value:!0}),a.default=a.Edit=void 0;var i=n(r(24836)),s=n(r(77879)),o=r(87067),u=r(13479),d=n(r(86334));class c extends d.default{get listUrl(){return this.getRoutePath("stack")}get name(){return t("Update Template")}static allowed(){return i.default.resolve(!0)}}a.Edit=c,(0,s.default)(c,"id","edit-template"),(0,s.default)(c,"title",t("Update Template")),(0,s.default)(c,"path",((e,t)=>{var{isAdminPage:a}=t,r=a?"stackEditAdmin":"stackEdit",{id:l,stack_name:n}=e;return(0,u.getPath)({key:r,params:{id:l,name:n}})})),(0,s.default)(c,"policy","stacks:update");a.default=(0,o.inject)("rootStore")((0,o.observer)(c))},44279:(e,a,r)=>{var l=r(18565),n=r(13696),i=r(3787),s=r(10732),o=r(32462),u=r(10819),d=r(22338),c=r(33950),m=r(48924);c(a,"__esModule",{value:!0}),a.default=a.Parameter=void 0;var p=m(r(18565)),f=m(r(32462)),v=m(r(29672)),h=m(r(77879)),k=r(87067),g=m(r(78711)),y=r(92666),S=r(45232);function _(e,t){var a=l(e);if(n){var r=n(e);t&&(r=i(r).call(r,(function(t){return s(e,t).enumerable}))),a.push.apply(a,r)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a,r,l=null!=arguments[t]?arguments[t]:{};t%2?o(a=_(Object(l),!0)).call(a,(function(t){(0,h.default)(e,t,l[t])})):u?d(e,u(l)):o(r=_(Object(l))).call(r,(function(t){c(e,t,s(l,t))}))}return e}class x extends g.default{constructor(){super(...arguments),(0,h.default)(this,"updateParamsInContext",((e,t)=>{var{params:a=""}=this.props.context||{},r=a?(0,y.getYaml)(a):{parameters:{}};r.parameters[e]=t,this.updateContext({params:(0,S.getValue)(r)})})),(0,h.default)(this,"onValuesChange",(e=>{var t,a=(0,y.getParamsFromContent)(this.template),r=(0,p.default)(a);(0,f.default)(t=(0,p.default)(e)).call(t,(t=>{(0,v.default)(r).call(r,t)&&this.updateParamsInContext(t,e[t])}))}))}get isStep(){return!0}get title(){return t("Parameter")}get name(){return t("Parameter")}get defaultValue(){var e=b({rollback:!0,timeout_mins:60},this.defaultParams);return this.isEdit&&(e.stack_name=this.props.extra.stack_name,e.rollback=!this.props.extra.disable_rollback),e}get isEdit(){return!!this.props.extra}get template(){return(0,y.getTemplate)(this.props.context||{})}get defaultParams(){var{params:e=""}=this.props.context||{},t=(0,y.getFormDefaultValues)(this.template),a=(0,y.getYaml)(e)||{},r=a.parameters||a;return b(b({},t),r)}get templateFormItems(){return(0,y.getFormItems)(this.template)}get rollbackOptions(){return[{value:!0,label:t("Enable")},{value:!1,label:t("Disable")}]}get formItems(){var e=this.templateFormItems,a={name:"name",label:t("Stack Name"),type:"label"},r={name:"name",label:t("Stack Name"),type:"input-name",required:!0,isStack:!0},l=[{name:"timeout_mins",label:t("Creation Timeout (Minutes)"),type:"input-int",required:!0},{name:"rollback",label:t("Fail Rollback"),type:"radio",required:!0,tip:y.rollbackTip,options:this.rollbackOptions},{label:t("Fill In The Parameters"),type:"title"},...e];return this.isEdit?l.unshift(a):l.unshift(r),l}}a.Parameter=x;a.default=(0,k.inject)("rootStore")((0,k.observer)(x))},51101:(e,a,r)=>{var l=r(33950),n=r(48924);l(a,"__esModule",{value:!0}),a.default=a.BaseDetail=void 0;var i=n(r(89195)),s=n(r(18565)),o=n(r(23872)),u=r(87067),d=n(r(42181)),c=r(92666);class m extends d.default{get leftCards(){return[this.startCard,this.outputCard]}get rightCards(){return[this.paramCard]}get outputCard(){var{outputs:e={}}=this.detailData,a=(0,i.default)(e).call(e,(e=>{var{output_key:t,output_value:a,description:r}=e;return{label:t,dataIndex:t,copyable:!1,render:()=>o.default.createElement("div",null,o.default.createElement("div",null,a),o.default.createElement("div",null,r))}}));return{title:t("Outputs"),options:a}}get paramCard(){var e,{parameters:a={}}=this.detailData,r=(0,i.default)(e=(0,s.default)(a)).call(e,(e=>({label:e,dataIndex:e,render:()=>a[e]})));return{title:t("Deployment Parameters"),options:r}}get startCard(){var e=[{label:t("Timeout(Minute)"),dataIndex:"timeout_mins"},{label:t("Fail Rollback"),dataIndex:"disable_rollback",tooltip:c.rollbackTip,render:e=>e?t("Disable"):t("Enable")}];return{title:t("Startup Parameters"),options:e}}}a.BaseDetail=m;a.default=(0,u.inject)("rootStore")((0,u.observer)(m))},53452:(e,t,a)=>{var r=a(33950),l=a(48924);r(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a(65512)),i=l(a(13820));t.default=e=>(0,n.default)(i.default,e)},56701:(e,a,r)=>{var l=r(33950),n=r(48924);l(a,"__esModule",{value:!0}),a.default=a.Resource=void 0;var i=n(r(68982)),s=n(r(77879)),o=r(87067),u=n(r(54017)),d=r(58163),c=r(92666);class m extends u.default{constructor(){super(...arguments),(0,s.default)(this,"getResourceUrl",((e,t)=>{var a;if(!e)return"-";var{resource_type:r}=t,l=(0,i.default)(a=this.resourceMap).call(a,(e=>e.key===r));if(!l)return e;var{isAdmin:n,routeName:s}=l,o=this.getLinkRender(s,e,{id:e});return n?this.isAdminPage?o:e:s?o:e})),(0,s.default)(this,"getColumns",(()=>[{title:t("Stack Resource"),dataIndex:"logical_resource_id"},{title:t("Resource"),dataIndex:"physical_resource_id",render:(e,t)=>this.getResourceUrl(e,t)},{title:t("Stack Resource Type"),dataIndex:"resource_type"},{title:t("Created At"),dataIndex:"creation_time",isHideable:!0,valueRender:"sinceTime"},{title:t("Resource Status"),dataIndex:"resource_status",isHideable:!0,valueMap:c.stackStatus},{title:t("Resource Status Reason"),dataIndex:"resource_status_reason",isStatus:!1,isHideable:!0,width:300}]))}init(){this.store=new d.StackResourceStore}get policy(){return"resource:index"}get name(){return t("stack resources")}get hideSearch(){return!0}get resourceMap(){return[{key:"OS::Cinder::EncryptedVolumeType",isAdmin:!0,routeName:"volumeTypeDetail"},{key:"OS::Cinder::QoSAssociation",isAdmin:!0,routeName:"volumeTypeQosDetail"},{key:"OS::Cinder::QoSSpecs",isAdmin:!0,routeName:"volumeTypeQosDetail"},{key:"OS::Cinder::Volume",routeName:"volumeDetail"},{key:"OS::Cinder::VolumeType",isAdmin:!0,routeName:"volumeTypeDetail"},{key:"OS::Glance::WebImage",routeName:"imageDetail"},{key:"OS::Heat::Stack",routeName:"stackDetail"},{key:"OS::Ironic::Port",routeName:"portDetail"},{key:"OS::Keystone::Domain",routeName:"domainDetail",isAdmin:!0},{key:"OS::Keystone::Group",routeName:"userGroupDetail",isAdmin:!0},{key:"OS::Keystone::Project",routeName:"projectDetail",isAdmin:!0},{key:"OS::Keystone::Role",routeName:"roleDetail",isAdmin:!0},{key:"OS::Keystone::User",routeName:"userDetail",isAdmin:!0},{key:"OS::Neutron::FloatingIP",routeName:"fipDetail"},{key:"OS::Neutron::LBaaS::LoadBalancer",routeName:"lbDetail"},{key:"OS::Neutron::Net",routeName:"networkDetail"},{key:"OS::Neutron::Port",routeName:"portDetail"},{key:"OS::Neutron::QoSPolicy",routeName:"networkQosDetail"},{key:"OS::Neutron::Router",routeName:"routerDetail"},{key:"OS::Neutron::SecurityGroup",routeName:"securityGroupDetail"},{key:"OS::Nova::Flavor",isAdmin:!0,routeName:"flavorDetail"},{key:"OS::Nova::KeyPair",routeName:"keypairDetail"},{key:"OS::Nova::Server",routeName:"instanceDetail"},{key:"OS::Nova::ServerGroup",routeName:"serverGroupDetail"},{key:"OS::Octavia::LoadBalancer",routeName:"lbDetail"}]}}a.Resource=m;a.default=(0,o.inject)("rootStore")((0,o.observer)(m))},57867:(e,t,a)=>{var r=a(33950),l=a(48924);r(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a(65138)),i=l(a(86334)),s=l(a(33323)),o=l(a(26552)),u={rowActions:{firstAction:n.default,moreActions:[{action:s.default},{action:o.default}]},batchActions:[n.default],primaryActions:[i.default]};t.default=u},58163:(e,t,a)=>{var r=a(33950),l=a(48924);r(t,"__esModule",{value:!0}),t.default=t.StackResourceStore=void 0;var n=l(a(92621)),i=l(a(81891));class s extends i.default{get client(){return n.default.heat.stacks}get responseKey(){return"resource"}listFetchByClient(e,t){var{id:a,name:r}=t;return this.client.resources({id:a,name:r},e)}get paramsFunc(){return()=>{}}}t.StackResourceStore=s;var o=new s;t.default=o},65138:(e,a,r)=>{var l=r(33950),n=r(48924);l(a,"__esModule",{value:!0}),a.default=void 0;var i=n(r(77879)),s=n(r(23872)),o=r(60615),u=n(r(72415));class d extends o.ConfirmAction{constructor(){super(...arguments),(0,i.default)(this,"policy","stacks:delete"),(0,i.default)(this,"allowedCheckFunc",(e=>!0)),(0,i.default)(this,"confirmContext",(e=>{var a=this.getName(e);return s.default.createElement("div",null,s.default.createElement("p",null,this.unescape(t("Are you sure to {action} (instance: {name})?",{action:this.actionNameDisplay||this.title,name:a}))),s.default.createElement("p",null,t("Deleting this stack will delete all resources deployed by the stack.")))})),(0,i.default)(this,"onSubmit",(e=>{var{id:t,name:a}=e||this.item;return u.default.delete({id:t,name:a})}))}get id(){return"delete"}get title(){return t("Delete")}get actionName(){return t("delete stack")}get isDanger(){return!0}get isAsyncAction(){return!0}}a.default=d},79753:(e,t,a)=>{var r=a(71742),l=a(33950),n=a(10732),i=a(48924);l(t,"__esModule",{value:!0}),t.default=t.Template=void 0,a(24871);var s=i(a(14605)),o=i(a(77879)),u=function(e,t){if("function"==typeof r)var a=new r,i=new r;return function(e,t){if(!t&&e&&e.__esModule)return e;var r,s,o={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return o;if(r=t?i:a){if(r.has(e))return r.get(e);r.set(e,o)}for(var u in e)"default"!==u&&{}.hasOwnProperty.call(e,u)&&((s=(r=l)&&n(e,u))&&(s.get||s.set)?r(o,u,s):o[u]=e[u]);return o}(e,t)}(a(23872)),d=a(87067),c=a(72415),m=i(a(7270)),p=(a(77800),i(a(657)));class f extends u.Component{constructor(e){super(e),(0,o.default)(this,"fetchData",(()=>{this.store.getTemplate(this.params)})),(0,o.default)(this,"renderContent",(()=>{var{template:e}=this.store,t={value:m.default.dump(e),mode:"yaml",options:{readOnly:!0}};return u.default.createElement(p.default,t)})),this.store=new c.StackStore}componentDidMount(){this.fetchData()}get params(){var{params:e}=this.props.match;return e}render(){return u.default.createElement(s.default,{style:{marginLeft:16,marginRight:16}},this.renderContent())}}t.Template=f;t.default=(0,d.inject)("rootStore")((0,d.observer)(f))},86334:(e,a,r)=>{var l=r(33950),n=r(48924);l(a,"__esModule",{value:!0}),a.default=a.StepCreate=void 0;var i=n(r(24836)),s=n(r(60147)),o=n(r(1839)),u=n(r(49849)),d=n(r(77879)),c=r(87067),m=r(60615),p=n(r(72415)),f=r(92666),v=r(27567),h=n(r(44279)),k=n(r(92662)),g=["params","content","rollback","name","timeout_mins"],y=["stack_name"];class S extends m.StepAction{constructor(){super(...arguments),(0,d.default)(this,"onSubmit",(e=>{var{params:t,content:a,rollback:r,name:l,timeout_mins:n}=e,i=(0,u.default)(e,g),s={stack_name:l,disable_rollback:!r,timeout_mins:n,template:(0,f.getYaml)(a),parameters:i};if(this.isEdit){var{stack_name:o}=s,d=(0,u.default)(s,y);return this.store.edit(this.params,d)}return this.store.create(s)}))}static allowed(){return i.default.resolve(!0)}get listUrl(){return this.getRoutePath("stack")}get name(){return this.isEdit?t("update template"):t("create stack")}get hasConfirmStep(){return!1}get hasExtraProps(){return this.isEdit}get isEdit(){var{pathname:e}=this.props.location;return(0,s.default)(e).call(e,"edit")>=0}get params(){var{id:e,name:t}=this.props.match.params;return{id:e,name:t}}get steps(){return[{title:t("Prepare Template"),component:k.default},{title:t("Orchestration information"),component:h.default}]}init(){this.store=p.default,this.getDetail()}getDetail(){var e=this;return(0,o.default)((function*(){if(e.isEdit){var t=yield p.default.fetchDetail(e.params);e.setState({extra:(0,v.toJS)(t)})}}))()}}a.StepCreate=S,(0,d.default)(S,"id","stack-create"),(0,d.default)(S,"title",t("Create Stack")),(0,d.default)(S,"path",((e,t)=>{var{isAdminPage:a}=t;return a?"/heat/stack-admin/create":"/heat/stack/create"})),(0,d.default)(S,"policy","stacks:create");a.default=(0,c.inject)("rootStore")((0,c.observer)(S))},88850:(e,a,r)=>{var l=r(33950),n=r(48924);l(a,"__esModule",{value:!0}),a.default=a.StackDetail=void 0;var i=r(87067),s=n(r(19585)),o=r(72415),u=r(92666),d=n(r(51101)),c=n(r(56701)),m=n(r(25761)),p=n(r(79753)),f=n(r(57867));class v extends s.default{get name(){return t("stack")}get policy(){return"stacks:show"}get listUrl(){return this.getRoutePath("stack")}init(){this.store=new o.StackStore}get actionConfigs(){return f.default}get detailInfos(){return[{title:t("Name"),dataIndex:"stack_name"},{title:t("Stack Status"),dataIndex:"stack_status",valueMap:u.stackStatus},{title:t("Description"),dataIndex:"description"},{title:t("Created At"),dataIndex:"creation_time",valueRender:"toLocalTime"},{title:t("Updated At"),dataIndex:"updated_time",valueRender:"toLocalTime"}]}get tabs(){return[{title:t("Detail"),key:"detail",component:d.default},{title:t("Stack Resources"),key:"resource",component:c.default},{title:t("Stack Events"),key:"event",component:m.default},{title:t("YAML File"),key:"template",component:p.default}]}}a.StackDetail=v;a.default=(0,i.inject)("rootStore")((0,i.observer)(v))},92662:(e,a,r)=>{var l=r(33950),n=r(48924);l(a,"__esModule",{value:!0}),a.default=a.Template=void 0;var i=r(87067),s=n(r(78711)),o=r(92666);class u extends s.default{get isStep(){return!0}get title(){return t("Prepare Template")}get name(){return t("Prepare Template")}get isEdit(){return!!this.props.extra}get defaultValue(){var{versionContent:e=""}=this.state;return{versionContent:e,name:this.isEdit?this.props.extra.stack_name:""}}get fontStyle(){return{fontFamily:'"Menlo", "Liberation Mono", "Consolas", "DejaVu Sans Mono", "Ubuntu Mono", "Courier New", "andale mono", "lucida console", monospace'}}get formItems(){return[{name:"name",label:t("Template Name"),type:"label",hidden:!this.isEdit},{name:"content",label:t("Template Content"),type:"textarea-from-file",required:!0,tip:o.yamlTip,validator:o.validateYaml,rows:10},{name:"params",label:t("Environment Variable"),type:"textarea-from-file",tip:o.paramTip,validator:o.validateYaml,rows:6}]}}a.Template=u;a.default=(0,i.inject)("rootStore")((0,i.observer)(u))},92715:(e,a,r)=>{var l=r(71742),n=r(33950),i=r(10732),s=r(48924);n(a,"__esModule",{value:!0}),a.default=a.Stack=void 0;var o=s(r(89195)),u=s(r(77879)),d=r(87067),c=s(r(54017)),m=function(e,t){if("function"==typeof l)var a=new l,r=new l;return function(e,t){if(!t&&e&&e.__esModule)return e;var l,s,o={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return o;if(l=t?r:a){if(l.has(e))return l.get(e);l.set(e,o)}for(var u in e)"default"!==u&&{}.hasOwnProperty.call(e,u)&&((s=(l=n)&&i(e,u))&&(s.get||s.set)?l(o,u,s):o[u]=e[u]);return o}(e,t)}(r(72415)),p=r(92666),f=s(r(57867));class v extends c.default{constructor(){super(...arguments),(0,u.default)(this,"getColumns",(()=>[{title:t("ID/Name"),dataIndex:"stack_name",routeName:this.getRouteName("stackDetail"),routeParamsFunc:e=>({id:e.id,name:e.stack_name}),isLink:!0},{title:t("Project ID/Name"),dataIndex:"project_name",isHideable:!0,hidden:!this.isAdminPage,sorter:!1},{title:t("Stack Status"),dataIndex:"stack_status",isHideable:!0,valueMap:p.stackStatus},{title:t("Created At"),dataIndex:"creation_time",isHideable:!0,valueRender:"sinceTime"},{title:t("Updated At"),dataIndex:"updated_time",isHideable:!0,valueRender:"sinceTime"}]))}init(){this.store=m.default,this.downloadStore=new m.StackStore}get policy(){return this.isAdminPage?"stacks:global_index":"stacks:index"}get name(){return t("stacks")}get isFilterByBackend(){return!0}get isSortByBackend(){return!0}get defaultSortKey(){return"creation_time"}get adminPageHasProjectFilter(){return!0}get projectFilterKey(){return"tenant"}get actionConfigs(){return f.default}get searchFilters(){var e=["CREATE_COMPLETE","CREATE_FAILED","ROLLBACK_COMPLETE","ROLLBACK_FAILED","UPDATE_COMPLETE","UPDATE_FAILED","DELETE_COMPLETE","DELETE_FAILED"],a=(0,o.default)(e).call(e,(e=>({key:e,label:p.stackStatus[e]})));return[{label:t("ID"),name:"id"},{label:t("Name"),name:"name"},{label:t("Stack Status"),name:"status",options:a}]}}a.Stack=v;a.default=(0,d.inject)("rootStore")((0,d.observer)(v))}}]);